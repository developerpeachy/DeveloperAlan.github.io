var EuroCountryFormat=["de","gr","cz","dk","fi","fr","it","no","nl","pl","pt","se","es","ro","ch","mx","tr"];var GOOGLE_MAPS_VERSION="";var MAX_PINS=20000;var MAX_FREE_GEO=250;var BASIC_GROUP_COUNT=10;var MAX_GROUPS=20;var MAX_FILTERS=12;var MAX_FILTER_SIZE=200;var BASE_IMAGE_URL="http://images.easymapmaker.com";var CUSTOM_IMAGE_URL="http://www.easymapmaker.com";var IMAGE_PATH="/marker_images/";var IMG_LIST=["red","blue","green","yellow","orange","purple","brown","pink","dark_green","pale_blue","dark_pink","royal_blue","blue_green","lime_green","pink_purple","gold","brown2","crimson","dark_gray","light_gray","mocassin"];var IMG_FILE_ENDING="_Marker.png";var IMG_HEX_COLORS=["FF776B","6B98FF","97EC7D","FFED5C","FD8D08","C89BFF","CB9D7C","FDABFF","01BF00","BCE3FF","E14F9E","4169E1","00FFFF","00FF00","CC0099","CCCC00","A52A2A","DC143C","A9A9A9","D3D3D3","FFE4B5"];var DOT_IMAGE_ENDING="_nodot_Marker.png";var SMALL_IMAGE="small_";var DEFAULT_IMAGE="/marker_images/image.png";var DEFAULT_SHADOW="shadow.png";var DEFAULT_SHAPE={coord:[13,0,15,1,16,2,17,3,18,4,18,5,19,6,19,7,19,8,19,9,19,10,19,11,19,12,19,13,18,14,18,15,17,16,16,17,15,18,14,19,14,20,13,21,13,22,12,23,12,24,12,25,12,26,11,27,11,28,11,29,11,30,11,31,11,32,11,33,8,33,8,32,8,31,8,30,8,29,8,28,8,27,8,26,7,25,7,24,7,23,6,22,6,21,5,20,5,19,4,18,3,17,2,16,1,15,1,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,0,6,1,5,1,4,2,3,3,2,4,1,6,0,13,0],type:"poly"};var selectedFilterValues=[];var multiSelectFilterValues=[];var activeMultiSelectFilter=-1;var userSettings={};userSettings.email=null;userSettings.title=null;userSettings.description=null;userSettings.protectionLevel=null;userSettings.alias=null;userSettings.view_count=null;userSettings.name=null;userSettings.autoDelete=null;userSettings.dataOnPage=null;userSettings.genKML=null;userSettings.imgDir=null;userSettings.mapLanguage="en";mObject.dataType=null;mObject.address=null;mObject.city=null;mObject.state=null;mObject.zip=null;mObject.country=null;mObject.lat=null;mObject.lng=null;mObject.title=null;mObject.web=null;mObject.image=null;mObject.email=null;mObject.group=null;mObject.mapType=null;mObject.pinLabel=null;mObject.hideLatLong=true;mObject.markerTitle=false;mObject.regionCode="";mObject.regionCountry="Auto-Detect";mObject.showLabels=true;mObject.moveSingleMarker=false;mObject.emm_lat=-1;mObject.emm_lng=-1;mObject.emm_acc=-1;mObject.center_lat=-1000;mObject.center_lng=-1000;mObject.zoom=-1;mObject.customZoomAndCenter=null;mObject.displayDataOnPage=false;mObject.clustering=true;mObject.showMoreOptions=null;mObject.disAbleDynamicFilters=null;mObject.exportData=null;mObject.scrollWheel=false;mObject.zoomInSearching=null;mObject.zoomInLevel=null;mObject.mapLanguage="";mObject.showMarkerNumbers=null;mObject.multiSelectFilters=null;mObject.showDirectionDescription=null;mObject.columnHeaderArray=[];mObject.headerDisplayOrderIdxs=[];mObject.groupHash={};mObject.sortedGroupKeys=[];mObject.groupImageHash={};mObject.groupCustomColorImageHash={};mObject.ImageDimensions={};mObject.StreetView=false;mObject.filterListNames=[];mObject.filterListArray=[];mObject.filterListSortedKeyHash={};mObject.filterColumnIdxs=[];mObject.filterCounts=null;mObject.markerImageIdx=[];mObject.useCustomImages=null;mObject.CustomImages=[];mObject.customImageSizes={};mObject.singleCustomImage=null;mObject.singleCustomImageHeight=null;mObject.singleCustomImageWidth=null;mObject.customSearchText=null;mObject.clusterColor="red";mObject.clusterHexColor="FF776B";function isIgnoreSearchColumn(a){return(a==mObject.lat||a==mObject.lng||a==mObject.web||a==mObject.image)}function isSelectedColumn(a){return(a==mObject.lat||a==mObject.lng||a==mObject.emm_acc||a==mObject.address||a==mObject.city||a==mObject.state||a==mObject.zip||a==mObject.country||a==mObject.title||a==mObject.web||a==mObject.image||a==mObject.email)}function urlizeUrl(a){if(a.length>0&&!a.match(/^(https?|ftp):\/\//)){return"http://"+a}return a}!function(d){var c='[data-dismiss="alert"]',b=function(e){d(e).on("click",c,this.close)};b.prototype.close=function(k){var j=d(this),g=j.attr("data-target"),h;if(!g){g=j.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}h=d(g);k&&k.preventDefault();h.length||(h=j.hasClass("alert")?j:j.parent());h.trigger(k=d.Event("close"));if(k.isDefaultPrevented()){return}h.removeClass("in");function f(){h.trigger("closed").remove()}d.support.transition&&h.hasClass("fade")?h.on(d.support.transition.end,f):f()};var a=d.fn.alert;d.fn.alert=function(e){return this.each(function(){var g=d(this),f=g.data("alert");if(!f){g.data("alert",(f=new b(this)))}if(typeof e=="string"){f[e].call(g)}})};d.fn.alert.Constructor=b;d.fn.alert.noConflict=function(){d.fn.alert=a;return this};d(document).on("click.alert.data-api",c,b.prototype.close)}(window.jQuery);!function(c){var b=function(e,d){this.options=d;this.$element=c(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",c.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var d=this,f=c.Event("show");this.$element.trigger(f);if(this.isShown||f.isDefaultPrevented()){return}this.isShown=true;this.escape();this.backdrop(function(){var e=c.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}d.$element.show();if(e){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false);d.enforceFocus();e?d.$element.one(c.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(f){f&&f.preventDefault();var d=this;f=c.Event("hide");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.escape();c(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);c.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;c(document).on("focusin.modal",function(f){if(d.$element[0]!==f.target&&!d.$element.has(f.target).length){d.$element.focus()}})},escape:function(){var d=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(f){f.which==27&&d.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var d=this,e=setTimeout(function(){d.$element.off(c.support.transition.end);d.hideModal()},500);this.$element.one(c.support.transition.end,function(){clearTimeout(e);d.hideModal()})},hideModal:function(){var d=this;this.$element.hide();this.backdrop(function(){d.removeBackdrop();d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(g){var f=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=c.support.transition&&e;this.$backdrop=c('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?c.proxy(this.$element[0].focus,this.$element[0]):c.proxy(this.hide,this));if(d){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!g){return}d?this.$backdrop.one(c.support.transition.end,g):g()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");c.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(c.support.transition.end,g):g()}else{if(g){g()}}}}};var a=c.fn.modal;c.fn.modal=function(d){return this.each(function(){var g=c(this),f=g.data("modal"),e=c.extend({},c.fn.modal.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("modal",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}else{if(e.show){f.show()}}})};c.fn.modal.defaults={backdrop:true,keyboard:true,show:true};c.fn.modal.Constructor=b;c.fn.modal.noConflict=function(){c.fn.modal=a;return this};c(document).on("click.modal.data-api",'[data-toggle="modal"]',function(j){var h=c(this),f=h.attr("href"),d=c(h.attr("data-target")||(f&&f.replace(/.*(?=#[^\s]+$)/,""))),g=d.data("modal")?"toggle":c.extend({remote:!/#/.test(f)&&f},d.data(),h.data());j.preventDefault();d.modal(g).one("hide",function(){h.focus()})})}(window.jQuery);!function(c){var b=function(e,d){this.init("tooltip",e,d)};b.prototype={constructor:b,init:function(k,h,f){var l,d,j,e,g;this.type=k;this.$element=c(h);this.options=this.getOptions(f);this.enabled=true;j=this.options.trigger.split(" ");for(g=j.length;g--;){e=j[g];if(e=="click"){this.$element.on("click."+this.type,this.options.selector,c.proxy(this.toggle,this))}else{if(e!="manual"){l=e=="hover"?"mouseenter":"focus";d=e=="hover"?"mouseleave":"blur";this.$element.on(l+"."+this.type,this.options.selector,c.proxy(this.enter,this));this.$element.on(d+"."+this.type,this.options.selector,c.proxy(this.leave,this))}}}this.options.selector?(this._options=c.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(d){d=c.extend({},c.fn[this.type].defaults,this.$element.data(),d);if(d.delay&&typeof d.delay=="number"){d.delay={show:d.delay,hide:d.delay}}return d},enter:function(h){var g=c.fn[this.type].defaults,f={},d;this._options&&c.each(this._options,function(e,j){if(g[e]!=j){f[e]=j}},this);d=c(h.currentTarget)[this.type](f).data(this.type);if(!d.options.delay||!d.options.delay.show){return d.show()}clearTimeout(this.timeout);d.hoverState="in";this.timeout=setTimeout(function(){if(d.hoverState=="in"){d.show()}},d.options.delay.show)},leave:function(f){var d=c(f.currentTarget)[this.type](this._options).data(this.type);if(this.timeout){clearTimeout(this.timeout)}if(!d.options.delay||!d.options.delay.hide){return d.hide()}d.hoverState="out";this.timeout=setTimeout(function(){if(d.hoverState=="out"){d.hide()}},d.options.delay.hide)},show:function(){var j,l,g,k,d,h,f=c.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(f);if(f.isDefaultPrevented()){return}j=this.tip();this.setContent();if(this.options.animation){j.addClass("fade")}d=typeof this.options.placement=="function"?this.options.placement.call(this,j[0],this.$element[0]):this.options.placement;j.detach().css({top:0,left:0,display:"block"});this.options.container?j.appendTo(this.options.container):j.insertAfter(this.$element);l=this.getPosition();g=j[0].offsetWidth;k=j[0].offsetHeight;switch(d){case"bottom":h={top:l.top+l.height,left:l.left+l.width/2-g/2};break;case"top":h={top:l.top-k,left:l.left+l.width/2-g/2};break;case"left":h={top:l.top+l.height/2-k/2,left:l.left-g};break;case"right":h={top:l.top+l.height/2-k/2,left:l.left+l.width};break}this.applyPlacement(h,d);this.$element.trigger("shown")}},applyPlacement:function(g,h){var j=this.tip(),e=j[0].offsetWidth,m=j[0].offsetHeight,d,k,l,f;j.offset(g).addClass(h).addClass("in");d=j[0].offsetWidth;k=j[0].offsetHeight;if(h=="top"&&k!=m){g.top=g.top+m-k;f=true}if(h=="bottom"||h=="top"){l=0;if(g.left<0){l=g.left*-2;g.left=0;j.offset(g);d=j[0].offsetWidth;k=j[0].offsetHeight}this.replaceArrow(l-e+d,d,"left")}else{this.replaceArrow(k-m,k,"top")}if(f){j.offset(g)}},replaceArrow:function(f,e,d){this.arrow().css(d,f?(50*(1-f/e)+"%"):"")},setContent:function(){var e=this.tip(),d=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](d);e.removeClass("fade in top bottom left right")},hide:function(){var d=this,g=this.tip(),f=c.Event("hide");this.$element.trigger(f);if(f.isDefaultPrevented()){return}g.removeClass("in");function h(){var e=setTimeout(function(){g.off(c.support.transition.end).detach()},500);g.one(c.support.transition.end,function(){clearTimeout(e);g.detach()})}c.support.transition&&this.$tip.hasClass("fade")?h():g.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var d=this.$element;if(d.attr("title")||typeof(d.attr("data-original-title"))!="string"){d.attr("data-original-title",d.attr("title")||"").attr("title","")}},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return c.extend({},(typeof d.getBoundingClientRect=="function")?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var f,d=this.$element,e=this.options;f=d.attr("data-original-title")||(typeof e.title=="function"?e.title.call(d[0]):e.title);return f},tip:function(){return this.$tip=this.$tip||c(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(f){var d=f?c(f.currentTarget)[this.type](this._options).data(this.type):this;d.tip().hasClass("in")?d.hide():d.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=c.fn.tooltip;c.fn.tooltip=function(d){return this.each(function(){var g=c(this),f=g.data("tooltip"),e=typeof d=="object"&&d;if(!f){g.data("tooltip",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.tooltip.Constructor=b;c.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};c.fn.tooltip.noConflict=function(){c.fn.tooltip=a;return this}}(window.jQuery);!function(c){var b=function(e,d){this.$element=c(e);this.options=c.extend({},c.fn.button.defaults,d)};b.prototype.setState=function(g){var j="disabled",e=this.$element,f=e.data(),h=e.is("input")?"val":"html";g=g+"Text";f.resetText||e.data("resetText",e[h]());e[h](f[g]||this.options[g]);setTimeout(function(){g=="loadingText"?e.addClass(j).attr(j,j):e.removeClass(j).removeAttr(j)},0)};b.prototype.toggle=function(){var d=this.$element.closest('[data-toggle="buttons-radio"]');d&&d.find(".active").removeClass("active");this.$element.toggleClass("active")};var a=c.fn.button;c.fn.button=function(d){return this.each(function(){var g=c(this),f=g.data("button"),e=typeof d=="object"&&d;if(!f){g.data("button",(f=new b(this,e)))}if(d=="toggle"){f.toggle()}else{if(d){f.setState(d)}}})};c.fn.button.defaults={loadingText:"loading..."};c.fn.button.Constructor=b;c.fn.button.noConflict=function(){c.fn.button=a;return this};c(document).on("click.button.data-api","[data-toggle^=button]",function(f){var d=c(f.target);if(!d.hasClass("btn")){d=d.closest(".btn")}d.button("toggle")})}(window.jQuery);!function(a){a(function(){a.support.transition=(function(){var b=(function(){var e=document.createElement("bootstrap"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in d){if(e.style[c]!==undefined){return d[c]}}}());return b&&{end:b}})()})}(window.jQuery);!function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},b.fn.collapse.defaults,d);if(this.options.parent){this.$parent=b(this.options.parent)}this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var g,d,f,e;if(this.transitioning||this.$element.hasClass("in")){return}g=this.dimension();d=b.camelCase(["scroll",g].join("-"));f=this.$parent&&this.$parent.find("> .accordion-group > .in");if(f&&f.length){e=f.data("collapse");if(e&&e.transitioning){return}f.collapse("hide");e||f.data("collapse",null)}this.$element[g](0);this.transition("addClass",b.Event("show"),"shown");b.support.transition&&this.$element[g](this.$element[0][d])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension();this.reset(this.$element[d]());this.transition("removeClass",b.Event("hide"),"hidden");this.$element[d](0)},reset:function(d){var e=this.dimension();this.$element.removeClass("collapse")[e](d||"auto")[0].offsetWidth;this.$element[d!==null?"addClass":"removeClass"]("collapse");return this},transition:function(h,e,f){var g=this,d=function(){if(e.type=="show"){g.reset()}g.transitioning=0;g.$element.trigger(f)};this.$element.trigger(e);if(e.isDefaultPrevented()){return}this.transitioning=1;this.$element[h]("in");b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,d):d()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var a=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var g=b(this),f=g.data("collapse"),e=b.extend({},b.fn.collapse.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("collapse",(f=new c(this,e)))}if(typeof d=="string"){f[d]()}})};b.fn.collapse.defaults={toggle:true};b.fn.collapse.Constructor=c;b.fn.collapse.noConflict=function(){b.fn.collapse=a;return this};b(document).on("click.collapse.data-api","[data-toggle=collapse]",function(j){var h=b(this),d,g=h.attr("data-target")||j.preventDefault()||(d=h.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=b(g).data("collapse")?"toggle":h.data();h[b(g).hasClass("in")?"addClass":"removeClass"]("collapsed");b(g).collapse(f)})}(window.jQuery);!function(f){var b="[data-toggle=dropdown]",a=function(h){var g=f(h).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){g.parent().removeClass("open")})};a.prototype={constructor:a,toggle:function(k){var j=f(this),h,g;if(j.is(".disabled, :disabled")){return}h=e(j);g=h.hasClass("open");d();if(!g){if("ontouchstart" in document.documentElement){f('<div class="dropdown-backdrop"/>').insertBefore(f(this)).on("click",d)}h.toggleClass("open")}j.focus();return false},keydown:function(m){var l,n,g,k,j,h;if(!/(38|40|27)/.test(m.keyCode)){return}l=f(this);m.preventDefault();m.stopPropagation();if(l.is(".disabled, :disabled")){return}k=e(l);j=k.hasClass("open");if(!j||(j&&m.keyCode==27)){if(m.which==27){k.find(b).focus()}return l.click()}n=f("[role=menu] li:not(.divider):visible a",k);if(!n.length){return}h=n.index(n.filter(":focus"));if(m.keyCode==38&&h>0){h--}if(m.keyCode==40&&h<n.length-1){h++}if(!~h){h=0}n.eq(h).focus()}};function d(){f(".dropdown-backdrop").remove();f(b).each(function(){e(f(this)).removeClass("open")})}function e(j){var g=j.attr("data-target"),h;if(!g){g=j.attr("href");g=g&&/#/.test(g)&&g.replace(/.*(?=#[^\s]*$)/,"")}h=g&&f(g);if(!h||!h.length){h=j.parent()}return h}var c=f.fn.dropdown;f.fn.dropdown=function(g){return this.each(function(){var j=f(this),h=j.data("dropdown");if(!h){j.data("dropdown",(h=new a(this)))}if(typeof g=="string"){h[g].call(j)}})};f.fn.dropdown.Constructor=a;f.fn.dropdown.noConflict=function(){f.fn.dropdown=c;return this};f(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(g){g.stopPropagation()}).on("click.dropdown.data-api",b,a.prototype.toggle).on("keydown.dropdown.data-api",b+", [role=menu]",a.prototype.keydown)}(window.jQuery);if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());function ClusterIcon(a,b){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.cluster_=a;this.className_=a.getMarkerClusterer().getClusterClass();this.styles_=b;this.center_=null;this.div_=null;this.shadowDiv_=null;this.sums_=null;this.visible_=false;this.setMap(a.getMap())}ClusterIcon.prototype.onAdd=function(){var c=this;var a;var b;this.div_=document.createElement("div");this.div_.className=this.className_;if(this.visible_){this.show()}this.getPanes().overlayMouseTarget.appendChild(this.div_);google.maps.event.addListener(this.getMap(),"bounds_changed",function(){b=a});google.maps.event.addDomListener(this.div_,"mousedown",function(){a=true;b=false});google.maps.event.addDomListener(this.div_,"click",function(h){a=false;if(!b){var d;var f;var g=c.cluster_.getMarkerClusterer();google.maps.event.trigger(g,"click",c.cluster_);google.maps.event.trigger(g,"clusterclick",c.cluster_);if(g.getZoomOnClick()){f=g.getMaxZoom();d=c.cluster_.getBounds();g.getMap().fitBounds(d);setTimeout(function(){g.getMap().fitBounds(d);if(f!==null&&(g.getMap().getZoom()>f)){g.getMap().setZoom(f+1)}},100)}h.cancelBubble=true;if(h.stopPropagation){h.stopPropagation()}}});google.maps.event.addDomListener(this.div_,"mouseover",function(){var d=c.cluster_.getMarkerClusterer();google.maps.event.trigger(d,"mouseover",c.cluster_)});google.maps.event.addDomListener(this.div_,"mouseout",function(){var d=c.cluster_.getMarkerClusterer();google.maps.event.trigger(d,"mouseout",c.cluster_)})};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();google.maps.event.clearInstanceListeners(this.div_);this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);if(this.cluster_.printable_){this.div_.innerHTML="<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>"}else{this.div_.innerHTML=this.sums_.text}if(typeof this.sums_.title==="undefined"||this.sums_.title===""){this.div_.title=this.cluster_.getMarkerClusterer().getTitle()}else{this.div_.title=this.sums_.title}this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.useStyle=function(b){this.sums_=b;var a=Math.max(0,b.index-1);a=Math.min(this.styles_.length-1,a);var c=this.styles_[a];this.url_=c.url;this.shadow_=c.shadow;this.height_=c.height;this.width_=c.width;this.anchor_=c.anchor;this.anchorIcon_=c.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)];this.textColor_=c.textColor||"black";this.textSize_=c.textSize||11;this.textDecoration_=c.textDecoration||"none";this.fontWeight_=c.fontWeight||"bold";this.fontStyle_=c.fontStyle||"normal";this.fontFamily_=c.fontFamily||"Arial,sans-serif";this.backgroundPosition_=c.backgroundPosition||"0 0"};ClusterIcon.prototype.updateUrl=function(f){var d={};if(f.length<2){return}var b=0;for(i=0;i<f.length;i++){if(d.hasOwnProperty(f[i].hexColor)){d[f[i].hexColor]=d[f[i].hexColor]+1}else{d[f[i].hexColor]=1;b++}}var c="";var g="";for(var a in d){if(c.length>0){c=c+"|"+a}else{c=a}if(g.length>0){g=g+","+d[a].toString()}else{g=d[a].toString()}}if(b==1){this.url_=this.url_.replace("color_",f[0].color)}else{var e=MarkerClusterer.IMAGE_SIZES.indexOf(this.height_);this.height_=MarkerClusterer.CHART_IMAGE_SIZES[e];this.width_=MarkerClusterer.CHART_IMAGE_SIZES[e];this.shadow_=MarkerClusterer.CHART_SHADOW_PATH+"/"+this.width_.toString()+MarkerClusterer.CHART_SHADOW;this.url_="//chart.googleapis.com/chart?cht=p&chs="+this.height_.toString()+"x"+this.width_.toString()+"&chd=t:"+g+"&chco="+c+"&chf=a,s,000000CC|bg,s,67676700"}};ClusterIcon.prototype.setCenter=function(a){this.center_=a};ClusterIcon.prototype.createCss=function(b){var a=[];if(!this.cluster_.printable_){a.push("background-image:url("+this.url_+");");a.push("background-position:"+this.backgroundPosition_+";")}if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){a.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{a.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){a.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{a.push("width:"+this.width_+"px; text-align:center;")}}else{a.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}a.push("cursor:pointer; top:"+b.y+"px; left:"+b.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+"; text-decoration:"+this.textDecoration_+";");return a.join("")};ClusterIcon.prototype.createCssShadow=function(b){var a=[];if(!this.cluster_.printable_){a.push("background-image:url("+this.shadow_+");");a.push("background-position: -4px -4px;")}a.push("height:"+this.height_+"px; width:"+(this.width_*1.54).toString()+"px;");a.push("z-index: -1; position: absolute; top:"+b.y+"px; left:"+b.x+"px; ");return a.join("")};ClusterIcon.prototype.getPosFromLatLng_=function(b){var a=this.getProjection().fromLatLngToDivPixel(b);a.x-=this.anchorIcon_[1];a.y-=this.anchorIcon_[0];return a};function Cluster(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.minClusterSize_=a.getMinimumClusterSize();this.averageCenter_=a.getAverageCenter();this.printable_=a.getPrintable();this.markers_=[];this.center_=null;this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,a.getStyles())}Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var a;var b=new google.maps.LatLngBounds(this.center_,this.center_);var c=this.getMarkers();for(a=0;a<c.length;a++){b.extend(c[a].getPosition())}return b};Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null);this.markers_=[];delete this.markers_};Cluster.prototype.addMarker=function(b){var e;var d;var f;if(this.isMarkerAlreadyAdded_(b)){return false}if(!this.center_){this.center_=b.getPosition();this.calculateBounds_()}else{if(this.averageCenter_){var a=this.markers_.length+1;var g=(this.center_.lat()*(a-1)+b.getPosition().lat())/a;var c=(this.center_.lng()*(a-1)+b.getPosition().lng())/a;this.center_=new google.maps.LatLng(g,c);this.calculateBounds_()}}b.isAdded=true;this.markers_.push(b);d=this.markers_.length;f=this.markerClusterer_.getMaxZoom();if(f!==null&&this.map_.getZoom()>f){if(b.getMap()!==this.map_){b.setMap(this.map_)}}else{if(d<this.minClusterSize_){if(b.getMap()!==this.map_){b.setMap(this.map_)}}else{if(d===this.minClusterSize_){for(e=0;e<d;e++){this.markers_[e].setMap(null)}}else{b.setMap(null)}}}this.updateIcon_();return true};Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};Cluster.prototype.updateIcon_=function(){var b=this.markers_.length;var d=this.markerClusterer_.getMaxZoom();if(d!==null&&this.map_.getZoom()>d){this.clusterIcon_.hide();return}if(b<this.minClusterSize_){this.clusterIcon_.hide();return}var c=this.markerClusterer_.getStyles().length;var a=this.markerClusterer_.getCalculator()(this.markers_,c);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.useStyle(a);this.clusterIcon_.updateUrl(this.markers_);this.clusterIcon_.show()};Cluster.prototype.isMarkerAlreadyAdded_=function(a){var b;if(this.markers_.indexOf){return this.markers_.indexOf(a)!==-1}else{for(b=0;b<this.markers_.length;b++){if(a===this.markers_[b]){return true}}}return false};function MarkerClusterer(c,a,b){this.extend(MarkerClusterer,google.maps.OverlayView);a=a||[];b=b||{};this.markers_=[];this.clusters_=[];this.listeners_=[];this.activeMap_=null;this.ready_=false;this.gridSize_=b.gridSize||60;this.minClusterSize_=b.minimumClusterSize||2;this.maxZoom_=b.maxZoom||null;this.styles_=b.styles||[];this.title_=b.title||"";this.zoomOnClick_=true;if(b.zoomOnClick!==undefined){this.zoomOnClick_=b.zoomOnClick}this.averageCenter_=false;if(b.averageCenter!==undefined){this.averageCenter_=b.averageCenter}this.ignoreHidden_=false;if(b.ignoreHidden!==undefined){this.ignoreHidden_=b.ignoreHidden}this.printable_=false;if(b.printable!==undefined){this.printable_=b.printable}this.imagePath_=b.imagePath||MarkerClusterer.IMAGE_PATH;this.imageExtension_=b.imageExtension||MarkerClusterer.IMAGE_EXTENSION;this.imageSizes_=b.imageSizes||MarkerClusterer.IMAGE_SIZES;this.calculator_=b.calculator||MarkerClusterer.CALCULATOR;this.batchSize_=b.batchSize||MarkerClusterer.BATCH_SIZE;this.batchSizeIE_=b.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE;this.clusterClass_=b.clusterClass||"cluster";if(navigator.userAgent.toLowerCase().indexOf("msie")!==-1){this.batchSize_=this.batchSizeIE_}this.setupStyles_();this.addMarkers(a,true);this.setMap(c)}MarkerClusterer.prototype.onAdd=function(){var a=this;this.activeMap_=this.getMap();this.ready_=true;this.repaint();this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){a.resetViewport_(false);if(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom")){google.maps.event.trigger(this,"idle")}}),google.maps.event.addListener(this.getMap(),"idle",function(){a.redraw_()})]};MarkerClusterer.prototype.onRemove=function(){var a;for(a=0;a<this.markers_.length;a++){if(this.markers_[a].getMap()!==this.activeMap_){this.markers_[a].setMap(this.activeMap_)}}for(a=0;a<this.clusters_.length;a++){this.clusters_[a].remove()}this.clusters_=[];for(a=0;a<this.listeners_.length;a++){google.maps.event.removeListener(this.listeners_[a])}this.listeners_=[];this.activeMap_=null;this.ready_=false};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){var b,a;if(this.styles_.length>0){return}for(b=0;b<this.imageSizes_.length;b++){a=this.imageSizes_[b];this.styles_.push({url:this.imagePath_+"/"+((b*5)+35)+"_color_."+this.imageExtension_,shadow:this.imagePath_+"/"+((b*5)+35)+"_shadow."+this.imageExtension_,height:a,width:a})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var a;var c=this.getMarkers();var b=new google.maps.LatLngBounds();for(a=0;a<c.length;a++){b.extend(c[a].getPosition())}this.getMap().fitBounds(b)};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a};MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinimumClusterSize=function(a){this.minClusterSize_=a};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.setStyles=function(a){this.styles_=a};MarkerClusterer.prototype.getTitle=function(){return this.title_};MarkerClusterer.prototype.setTitle=function(a){this.title_=a};MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.setZoomOnClick=function(a){this.zoomOnClick_=a};MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.setAverageCenter=function(a){this.averageCenter_=a};MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_};MarkerClusterer.prototype.setIgnoreHidden=function(a){this.ignoreHidden_=a};MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_};MarkerClusterer.prototype.setImageExtension=function(a){this.imageExtension_=a};MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_};MarkerClusterer.prototype.setImagePath=function(a){this.imagePath_=a};MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_};MarkerClusterer.prototype.setImageSizes=function(a){this.imageSizes_=a};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a};MarkerClusterer.prototype.getPrintable=function(){return this.printable_};MarkerClusterer.prototype.setPrintable=function(a){this.printable_=a};MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_};MarkerClusterer.prototype.setBatchSizeIE=function(a){this.batchSizeIE_=a};MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_};MarkerClusterer.prototype.setClusterClass=function(a){this.clusterClass_=a};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.getClusters=function(){return this.clusters_};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a);if(!b){this.redraw_()}};MarkerClusterer.prototype.addMarkers=function(c,b){var a;for(a=0;a<c.length;a++){this.pushMarkerTo_(c[a])}if(!b){this.redraw_()}};MarkerClusterer.prototype.pushMarkerTo_=function(a){if(a.getDraggable()){var b=this;google.maps.event.addListener(a,"dragend",function(){if(b.ready_){this.isAdded=false;b.repaint()}})}a.isAdded=false;this.markers_.push(a)};MarkerClusterer.prototype.removeMarker=function(a,b){var c=this.removeMarker_(a);if(!b&&c){this.repaint()}return c};MarkerClusterer.prototype.removeMarkers=function(e,b){var a,c;var d=false;for(a=0;a<e.length;a++){c=this.removeMarker_(e[a]);d=d||c}if(!b&&d){this.repaint()}return d};MarkerClusterer.prototype.removeMarker_=function(a){var c;var b=-1;if(this.markers_.indexOf){b=this.markers_.indexOf(a)}else{for(c=0;c<this.markers_.length;c++){if(a===this.markers_[c]){b=c;break}}}if(b===-1){return false}a.setMap(null);this.markers_.splice(b,1);return true};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(true);this.markers_=[]};MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_=[];this.resetViewport_(false);this.redraw_();setTimeout(function(){var b;for(b=0;b<a.length;b++){a[b].remove()}},0)};MarkerClusterer.prototype.getExtendedBounds=function(e){var c=this.getProjection();var f=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng());var h=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng());var d=c.fromLatLngToDivPixel(f);d.x+=this.gridSize_;d.y-=this.gridSize_;var b=c.fromLatLngToDivPixel(h);b.x-=this.gridSize_;b.y+=this.gridSize_;var g=c.fromDivPixelToLatLng(d);var a=c.fromDivPixelToLatLng(b);e.extend(g);e.extend(a);return e};MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)};MarkerClusterer.prototype.resetViewport_=function(c){var b,a;for(b=0;b<this.clusters_.length;b++){this.clusters_[b].remove()}this.clusters_=[];for(b=0;b<this.markers_.length;b++){a=this.markers_[b];a.isAdded=false;if(c){a.setMap(null)}}};MarkerClusterer.prototype.distanceBetweenPoints_=function(k,h){var g=6371;var e=(h.lat()-k.lat())*Math.PI/180;var f=(h.lng()-k.lng())*Math.PI/180;var b=Math.sin(e/2)*Math.sin(e/2)+Math.cos(k.lat()*Math.PI/180)*Math.cos(h.lat()*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);var l=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));var j=g*l;return j};MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())};MarkerClusterer.prototype.addToClosestCluster_=function(c){var f,g,b,a;var h=40000;var e=null;for(f=0;f<this.clusters_.length;f++){b=this.clusters_[f];a=b.getCenter();if(a){g=this.distanceBetweenPoints_(a,c.getPosition());if(g<h){h=g;e=b}}}if(e&&e.isMarkerInClusterBounds(c)){e.addMarker(c)}else{b=new Cluster(this);b.addMarker(c);this.clusters_.push(b)}};MarkerClusterer.prototype.createClusters_=function(a){var e,c;var b;var d=this;if(!this.ready_){return}if(a===0){google.maps.event.trigger(this,"clusteringbegin",this);if(typeof this.timerRefStatic!=="undefined"){clearTimeout(this.timerRefStatic);delete this.timerRefStatic}}if(this.getMap().getZoom()>3){b=new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast())}else{b=new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625))}var g=this.getExtendedBounds(b);var f=Math.min(a+this.batchSize_,this.markers_.length);for(e=a;e<f;e++){c=this.markers_[e];if(!c.isAdded&&this.isMarkerInBounds_(c,g)){if(!this.ignoreHidden_||(this.ignoreHidden_&&c.getVisible())){this.addToClosestCluster_(c)}}}if(f<this.markers_.length){this.timerRefStatic=setTimeout(function(){d.createClusters_(f)},0)}else{delete this.timerRefStatic;google.maps.event.trigger(this,"clusteringend",this)}};MarkerClusterer.prototype.extend=function(b,a){return(function(c){var d;for(d in c.prototype){this.prototype[d]=c.prototype[d]}return this}).apply(b,[a])};MarkerClusterer.CALCULATOR=function(f,d){var a=0;var e="";var c=f.length.toString();var b=c;while(b!==0){b=parseInt(b/10,10);a++}a=Math.min(a,d);return{text:c,index:a,title:e}};MarkerClusterer.BATCH_SIZE=2000;MarkerClusterer.BATCH_SIZE_IE=500;MarkerClusterer.IMAGE_EXTENSION="png";MarkerClusterer.IMAGE_PATH="/cluster_images/semi_opaq";MarkerClusterer.IMAGE_SIZES=[35,40,45,50,55,60,65];MarkerClusterer.CHART_IMAGE_SIZES=[50,55,60,65,70,73,75];MarkerClusterer.CHART_SHADOW_PATH="/cluster_images/chart";MarkerClusterer.CHART_SHADOW="_shadow.png";!function(c){if(Array.prototype.forEach===null||Array.prototype.forEach===undefined){Array.prototype.forEach=function(e){var d;for(d=0;d<this.length;++d){e(this[d])}}}if(typeof ko!=="undefined"&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect){ko.bindingHandlers.multiselect={init:function(g,h,j,f,d){var k=j().selectedOptions,e=ko.utils.unwrapObservable(h());c(g).multiselect(e);if(a(k)){k.subscribe(function(n){var l=[],m=[];n.forEach(function(o){switch(o.status){case"added":l.push(o.value);break;case"deleted":m.push(o.value);break}});if(l.length>0){c(g).multiselect("select",l)}if(m.length>0){c(g).multiselect("deselect",m)}},null,"arrayChange")}},update:function(j,k,l,h,d){var g=l().options,f=c(j).data("multiselect"),e=ko.utils.unwrapObservable(k());if(a(g)){g.subscribe(function(m){c(j).multiselect("rebuild")})}if(!f){c(j).multiselect(e)}else{f.updateOriginalOptions()}}}}function a(d){return ko.isObservable(d)&&!(d.destroyAll===undefined)}function b(d,e){this.options=this.mergeOptions(e);this.$select=c(d);this.originalOptions=this.$select.clone()[0].options;this.query="";this.searchTimeout=null;this.options.multiple=this.$select.attr("multiple")==="multiple";this.options.onChange=c.proxy(this.options.onChange,this);this.options.onDropdownShow=c.proxy(this.options.onDropdownShow,this);this.options.onDropdownHide=c.proxy(this.options.onDropdownHide,this);this.buildContainer();this.buildButton();this.buildDropdown();this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();this.$select.hide().after(this.$container)}b.prototype={defaults:{buttonText:function(e,d){if(e.length===0){return this.nonSelectedText+' <b class="caret"></b>'}else{if(e.length>this.numberDisplayed){return e.length+" "+this.nSelectedText+' <b class="caret"></b>'}else{var f="";e.each(function(){var g=(c(this).attr("label")!==undefined)?c(this).attr("label"):c(this).html();f+=g+", "});return f.substr(0,f.length-2)+' <b class="caret"></b>'}}},buttonTitle:function(e,d){if(e.length===0){return this.nonSelectedText}else{var f="";e.each(function(){f+=c(this).text()+", "});return f.substr(0,f.length-2)}},label:function(d){return c(d).attr("label")||c(d).html()},onChange:function(d,e){},onDropdownShow:function(d){},onDropdownHide:function(d){},buttonClass:"btn btn-default",dropRight:false,selectedClass:"active",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:false,checkboxName:"multiselect",includeSelectAllOption:false,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",enableFiltering:false,enableCaseInsensitiveFiltering:false,filterPlaceholder:"Search",filterBehavior:"text",preventInputChangeEvent:false,nonSelectedText:"None selected",nSelectedText:"selected",numberDisplayed:3,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item group"><label class="multiselect-group"></label></li>'}},constructor:b,buildContainer:function(){this.$container=c(this.options.buttonContainer);this.$container.on("show.bs.dropdown",this.options.onDropdownShow);this.$container.on("hide.bs.dropdown",this.options.onDropdownHide)},buildButton:function(){this.$button=c(this.options.templates.button).addClass(this.options.buttonClass);if(this.$select.prop("disabled")){this.disable()}else{this.enable()}if(this.options.buttonWidth&&this.options.buttonWidth!=="auto"){this.$button.css({width:this.options.buttonWidth})}var d=this.$select.attr("tabindex");if(d){this.$button.attr("tabindex",d)}this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=c(this.options.templates.ul);if(this.options.dropRight){this.$ul.addClass("pull-right")}if(this.options.maxHeight){this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"})}this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(c.proxy(function(e,f){var d=c(f).prop("tagName").toLowerCase();if(d==="optgroup"){this.createOptgroup(f)}else{if(d==="option"){if(c(f).data("role")==="divider"){this.createDivider()}else{this.createOptionValue(f)}}}},this));c("li input",this.$ul).on("change",c.proxy(function(h){var d=c(h.target);var g=d.prop("checked")||false;var e=d.val()===this.options.selectAllValue;if(this.options.selectedClass){if(g){d.parents("li").addClass(this.options.selectedClass)}else{d.parents("li").removeClass(this.options.selectedClass)}}var j=d.val();var k=this.getOptionByValue(j);var l=c("option",this.$select).not(k);var f=c("input",this.$container).not(d);if(e){if(g){this.selectall()}else{this.deselectall()}}if(!e){if(g){k.prop("selected",true);if(this.options.multiple){k.prop("selected",true)}else{if(this.options.selectedClass){c(f).parents("li").removeClass(this.options.selectedClass)}c(f).prop("checked",false);l.prop("selected",false);this.$button.click()}if(this.options.selectedClass==="active"){l.parents("a").css("outline","")}}else{k.prop("selected",false)}}this.$select.change();this.updateButtonText();this.updateSelectAll();this.options.onChange(k,g);if(this.options.preventInputChangeEvent){return false}},this));c("li a",this.$ul).on("touchstart click",function(j){j.stopPropagation();var d=c(j.target);if(j.shiftKey){var h=d.prop("checked")||false;if(h){var g=d.parents("li:last").siblings('li[class="active"]:first');var f=d.parents("li").index();var e=g.index();if(f>e){d.parents("li:last").prevUntil(g).each(function(){c(this).find("input:first").prop("checked",true).trigger("change")})}else{d.parents("li:last").nextUntil(g).each(function(){c(this).find("input:first").prop("checked",true).trigger("change")})}}}d.blur()});this.$container.off("keydown.multiselect").on("keydown.multiselect",c.proxy(function(g){if(c('input[type="text"]',this.$container).is(":focus")){return}if((g.keyCode===9||g.keyCode===27)&&this.$container.hasClass("open")){this.$button.click()}else{var h=c(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!h.length){return}var d=h.index(h.filter(":focus"));if(g.keyCode===38&&d>0){d--}else{if(g.keyCode===40&&d<h.length-1){d++}else{if(!~d){d=0}}}var f=h.eq(d);f.focus();if(g.keyCode===32||g.keyCode===13){var e=f.find("input");e.prop("checked",!e.prop("checked"));e.change()}g.stopPropagation();g.preventDefault()}},this))},createOptionValue:function(e){if(c(e).is(":selected")){c(e).prop("selected",true)}var d=this.options.label(e);var j=c(e).val();var h=this.options.multiple?"checkbox":"radio";var k=c(this.options.templates.li);c("label",k).addClass(h);c("label",k).append('<input type="'+h+'" name="'+this.options.checkboxName+'" />');var g=c(e).prop("selected")||false;var f=c("input",k);f.val(j);if(j===this.options.selectAllValue){k.addClass("multiselect-item multiselect-all");f.parent().parent().addClass("multiselect-all")}c("label",k).append(" "+d);this.$ul.append(k);if(c(e).is(":disabled")){f.attr("disabled","disabled").prop("disabled",true).parents("a").attr("tabindex","-1").parents("li").addClass("disabled")}f.prop("checked",g);if(g&&this.options.selectedClass){f.parents("li").addClass(this.options.selectedClass)}},createDivider:function(e){var d=c(this.options.templates.divider);this.$ul.append(d)},createOptgroup:function(d){var f=c(d).prop("label");var e=c(this.options.templates.liGroup);c("label",e).text(f);this.$ul.append(e);if(c(d).is(":disabled")){e.addClass("disabled")}c("option",d).each(c.proxy(function(g,h){this.createOptionValue(h)},this))},buildSelectAll:function(){var d=this.hasSelectAll();if(!d&&this.options.includeSelectAllOption&&this.options.multiple&&c("option",this.$select).length>this.options.includeSelectAllIfMoreThan){if(this.options.includeSelectAllDivider){this.$ul.prepend(c(this.options.templates.divider))}var f=c(this.options.templates.li);c("label",f).addClass("checkbox");c("label",f).append('<input type="checkbox" name="'+this.options.checkboxName+'" />');var e=c("input",f);e.val(this.options.selectAllValue);f.addClass("multiselect-item multiselect-all");e.parent().parent().addClass("multiselect-all");c("label",f).append(" "+this.options.selectAllText);this.$ul.prepend(f);e.prop("checked",false)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var d=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=d){this.$filter=c(this.options.templates.filter);c("input",this.$filter).attr("placeholder",this.options.filterPlaceholder);this.$ul.prepend(this.$filter);this.$filter.val(this.query).on("click",function(e){e.stopPropagation()}).on("input keydown",c.proxy(function(e){clearTimeout(this.searchTimeout);this.searchTimeout=this.asyncFunction(c.proxy(function(){if(this.query!==e.target.value){this.query=e.target.value;c.each(c("li",this.$ul),c.proxy(function(g,h){var k=c("input",h).val();var l=c("label",h).text();var f="";if((this.options.filterBehavior==="text")){f=l}else{if((this.options.filterBehavior==="value")){f=k}else{if(this.options.filterBehavior==="both"){f=l+"\n"+k}}}if(k!==this.options.selectAllValue&&l){var j=false;if(this.options.enableCaseInsensitiveFiltering&&f.toLowerCase().indexOf(this.query.toLowerCase())>-1){j=true}else{if(f.indexOf(this.query)>-1){j=true}}if(j){c(h).show().removeClass("filter-hidden")}else{c(h).hide().addClass("filter-hidden")}}},this))}this.updateSelectAll()},this),300,this)},this))}}},destroy:function(){this.$container.remove();this.$select.show();this.$select.data("multiselect",null)},refresh:function(){c("option",this.$select).each(c.proxy(function(d,e){var f=c("li input",this.$ul).filter(function(){return c(this).val()===c(e).val()});if(c(e).is(":selected")){f.prop("checked",true);if(this.options.selectedClass){f.parents("li").addClass(this.options.selectedClass)}}else{f.prop("checked",false);if(this.options.selectedClass){f.parents("li").removeClass(this.options.selectedClass)}}if(c(e).is(":disabled")){f.attr("disabled","disabled").prop("disabled",true).parents("li").addClass("disabled")}else{f.prop("disabled",false).parents("li").removeClass("disabled")}},this));this.updateButtonText();this.updateSelectAll()},select:function(h){if(!c.isArray(h)){h=[h]}for(var d=0;d<h.length;d++){var f=h[d];var g=this.getOptionByValue(f);var e=this.getInputByValue(f);if(this.options.selectedClass){e.parents("li").addClass(this.options.selectedClass)}e.prop("checked",true);g.prop("selected",true)}this.updateButtonText()},clearSelection:function(){this.deselectall(false);this.updateButtonText();this.updateSelectAll()},deselect:function(d){if(!c.isArray(d)){d=[d]}for(var e=0;e<d.length;e++){var g=d[e];var h=this.getOptionByValue(g);var f=this.getInputByValue(g);if(this.options.selectedClass){f.parents("li").removeClass(this.options.selectedClass)}f.prop("checked",false);h.prop("selected",false)}this.updateButtonText()},selectall:function(){var h=c("li input[type='checkbox']:enabled",this.$ul),f=h.filter(":visible"),g=h.length,d=f.length;f.prop("checked",true);c("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass);if(g===d){c("option:enabled",this.$select).prop("selected",true)}else{var e=f.map(function(){return c(this).val()}).get();c("option:enabled",this.$select).filter(function(j){return c.inArray(c(this).val(),e)!==-1}).prop("selected",true)}},deselectall:function(d){var g=c("li input[type='checkbox']:enabled",this.$ul),d=typeof d==="undefined"?true:d,f=void (0);if(d){var e=void (0);f=g.filter(":visible");f.prop("checked",false);e=f.map(function(){return c(this).val()}).get();c("option:enabled",this.$select).filter(function(h){return c.inArray(c(this).val(),e)!==-1}).prop("selected",false);c("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else{g.prop("checked",false);c("option:enabled",this.$select).prop("selected",false);c("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)}},rebuild:function(){this.$ul.html("");this.options.multiple=this.$select.attr("multiple")==="multiple";this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll()},dataprovider:function(d){var e="";d.forEach(function(f){e+='<option value="'+f.value+'">'+f.label+"</option>"});this.$select.html(e);this.rebuild()},enable:function(){this.$select.prop("disabled",false);this.$button.prop("disabled",false).removeClass("disabled")},disable:function(){this.$select.prop("disabled",true);this.$button.prop("disabled",true).addClass("disabled")},setOptions:function(d){this.options=this.mergeOptions(d)},mergeOptions:function(d){return c.extend(true,{},this.defaults,d)},hasSelectAll:function(){return c("li."+this.options.selectAllValue,this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var h=c("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),g=h.length,e=h.filter(":checked").length,d=c("li."+this.options.selectAllValue,this.$ul),f=d.find("input");if(e>0&&e===g){f.prop("checked",true);d.addClass(this.options.selectedClass)}else{f.prop("checked",false);d.removeClass(this.options.selectedClass)}}},updateButtonText:function(){var d=this.getSelected();c("button",this.$container).html(this.options.buttonText(d,this.$select));c("button",this.$container).attr("title",this.options.buttonTitle(d,this.$select))},getSelected:function(){return c("option",this.$select).filter(":selected")},getOptionByValue:function(g){var d=c("option",this.$select);var h=g.toString();for(var e=0;e<d.length;e=e+1){var f=d[e];if(f.value===h){return c(f)}}},getInputByValue:function(g){var f=c("li input",this.$ul);var h=g.toString();for(var d=0;d<f.length;d=d+1){var e=f[d];if(e.value===h){return c(e)}}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(g,f,d){var e=Array.prototype.slice.call(arguments,3);return setTimeout(function(){g.apply(d||window,e)},f)}};c.fn.multiselect=function(d,e){return this.each(function(){var g=c(this).data("multiselect");var f=typeof d==="object"&&d;if(!g){g=new b(this,f);c(this).data("multiselect",g)}if(typeof d==="string"){g[d](e);if(d==="destroy"){c(this).data("multiselect",false)}}})};c.fn.multiselect.Constructor=b;c(function(){c("select[data-role=multiselect]").multiselect()})}(window.jQuery);if(!window.console){console={debug:function(a){}}}var console=console||{debug:function(){}};var errorHash={};if(typeof window.onerror==="undefined"){}else{window.onerror=function(e,b,a,d,c){if(d==undefined){d="unknown column"}if(c==undefined){c="unknown error object"}fUNQ37(b+":"+a+":"+d+" stack trace: "+c+"\n\n"+e);return true}}function fUNQ37(a){if(errorHash.hasOwnProperty(a)){return}else{errorHash[a]=1}$.ajax({type:"POST",url:"/errors/errorHandler.php",data:JSON.stringify({context:navigator.userAgent,details:a}),contentType:"application/json; charset=utf-8"})}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}String.prototype.endsWith=function(a){return this.length>=a.length&&this.substr(this.length-a.length)==a};if(!String.prototype.startsWith){String.prototype.startsWith=function(b,a){a=a||0;return this.lastIndexOf(b,a)===a}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]===c){return b}}return -1}}function fUNQ38(){var a=document.getElementById("noDisplay");var b=document.getElementById("toDisplay");jQuery("#moveToDisplay").click(function(){$("#noDisplay option:selected").each(function(){$("#toDisplay").append($(this).clone(true));$(this).remove()});fUNQ39(b);fUNQ41()});jQuery("#removeFromDisplay").click(function(){$("#toDisplay option:selected").each(function(){$("#noDisplay").append($(this).clone(true));$(this).remove()});fUNQ39(a);fUNQ41()});jQuery("#moveAllToDisplay").click(function(){$("#noDisplay option").each(function(){$("#toDisplay").append($(this).clone(true));$(this).remove()});fUNQ39(b);fUNQ41()});jQuery("#removeAllFromDisplay").click(function(){$("#toDisplay option").each(function(){$("#noDisplay").append($(this).clone(true));$(this).remove()});fUNQ39(a);fUNQ41()})}function fUNQ39(c){var b=[],a;for(a=0;a<c.options.length;a++){b[a]=[];b[a][0]=c.options[a].text;b[a][1]=c.options[a].value}b.sort(function(e,d){return e[1]-d[1]});while(c.options.length>0){c.options[0]=null}for(a=0;a<b.length;a++){c.options[a]=new Option(b[a][0],b[a][1])}}function fUNQ41(){mObject.headerDisplayOrderIdxs.length=0;var c;var b=dataLines[0];var a=0;$("#toDisplay option").each(function(){var d=$(this).attr("value");mObject.headerDisplayOrderIdxs[mObject.headerDisplayOrderIdxs.length]=parseFloat(d);a+=30});c='<div id="innerMarkerDescDiv" >'+fUNQ42(b)+"</div>";$("#markerDescriptionDiv").html(c)}function fUNQ42(d){var h="";if(fUNQ241(mObject.title)&&d[mObject.title]!=""){if(fUNQ241(mObject.web)&&d[mObject.web]!=""){h='<div><a href="'+urlizeUrl(d[mObject.web])+'" target="_blank">'+d[mObject.title]+"</a></div>"}else{h=d[mObject.title]}}var b;b=fUNQ223(d,"<br>",true);if(b!=""){b="<div>"+b+"</div>"}var g="";for(var e=0;e<mObject.headerDisplayOrderIdxs.length;e++){if(!isSelectedColumn(mObject.headerDisplayOrderIdxs[e])){var a=d[mObject.headerDisplayOrderIdxs[e]];var c=mObject.columnHeaderArray[mObject.headerDisplayOrderIdxs[e]];if(a!=null&&a.trim()!=""){if(a.indexOf("\n")>0&&a.charAt(0)=='"'&&a.endsWith('"')){a=a.replace(/\n/g,"<br>");a=a.substr(1,a.length-2)}a=a.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>');if(mObject.showLabels){g=g+'<div class="markerLabelDiv"><span class="markerLabel">'+c+": </span>"+a+"</div>"}else{g=g+'<div class="markerLabelDiv">'+a+"</div>"}}}}var f=h+b+g;f+=fUNQ43(d,h,true,true);return f}function fUNQ43(e,h,d,g){var f="";var c="";if(fUNQ241(mObject.image)&&e[mObject.image]!=""){c='<div><img src="'+e[mObject.image]+'"/></div>'}else{if(d&&mObject.StreetView&&((mObject.emm_acc>0&&e[emm_acc]=="ROOFTOP")||g)){c='<div><img src="//maps.googleapis.com/maps/api/streetview?size=200x200&location='+fUNQ271(fUNQ222(e))+'"/></div>'}}var b="";if(fUNQ241(mObject.email)&&e[mObject.email]!=""){if(fUNQ44(e[mObject.email])){b='<div>e-mail: <a href="mailto:'+e[mObject.email]+'"  class="markerLabelDiv">'+e[mObject.email]+"</a></div>"}else{b="<div>e-mail:"+e[mObject.email]+"</div>"}}var a="";if(h==""&&fUNQ241(mObject.web)&&e[mObject.web]!=""){a='<div ><a href="'+urlizeUrl(e[mObject.web])+'" target="_blank"  class="markerLabelDiv">'+e[mObject.web]+"</a></div>"}f+=c;f+=b;f+=a;return f}function fUNQ44(b){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,4}$/.test(b)}function fUNQ45(b){return/^[a-zA-Z0-9_-]+$/.test(b)}function fUNQ46(a){jQuery("#moveToFilter").click(function(){var b=$("#toFilter");$("#noFilter option:selected").each(function(){if(a>b.children().length){$("#toFilter").append($(this).clone(true));$(this).remove()}});if(a<=b.children().length){jQuery("#moveToFilter").attr("disabled","disabled")}});jQuery("#removeFromFilter").click(function(){$("#toFilter option:selected").each(function(){$("#noFilter").append($(this).clone(true));$(this).remove()});jQuery("#moveToFilter").removeAttr("disabled")});jQuery("#removeAllFromFilter").click(function(){$("#toFilter option").each(function(){$("#noFilter").append($(this).clone(true));$(this).remove()});jQuery("#moveToFilter").removeAttr("disabled")})}function fUNQ47(e,a,b,h,d){var c=jQuery("#"+e),k=jQuery("#"+a);c.empty();k.empty();var f="",g;for(g=0;g<h.length;g++){f+='<option value="'+h[g]+'">'+d[h[g]]+"</option>"}var j="";for(g=0;g<b.length;g++){j+='<option value="'+b[g]+'">'+d[b[g]]+"</option>"}if(f!=""){c.append(f)}if(j!=""){k.append(j)}}function fUNQ48(a,c){var b=[];$("#toFilter option").each(function(){var d=$(this).attr("value");b.push(d)});if(b.length>0){mObject.filterColumnIdxs=b;fUNQ49(b,a,c)}else{if(mObject.filterListNames.length>0){mObject.filterListNames.length=0;mObject.filterListArray.length=0;mObject.filterListSortedKeyHash={}}}}function fUNQ49(b,a,c){mObject.filterListNames.length=0;mObject.filterListArray.length=0;mObject.filterListSortedKeyHash={};for(var d=0;d<b.length;d++){var e=b[d];if(e>=a.length){}else{var f=a[e];fUNQ50(c,f,e,MAX_FILTER_SIZE)}}}function fUNQ50(c,h,l,k){var n={};var j=true;var b=true;var f=0;var e=[];for(var g=0;g<c.length;g++){var a=c[g];var m=a[l];if(m==null||m.trim().length==0||m==ALL_FILTER){continue}m=m.trim();if(j){if(!$.isNumeric(fUNQ51(m))){j=false}}if(b){if(!fUNQ161(m)){b=false}}var d;if(n.hasOwnProperty(m)){d=n[m];d.push(g)}else{d=[];d.push(g);n[m]=d;e.push(m);f++}}if(j){e.sort(function(p,o){return fUNQ51(p)-fUNQ51(o)})}else{if(b){fUNQ69(e)}else{e.sort()}}mObject.filterListNames.push(h);mObject.filterListArray.push(n);mObject.filterListSortedKeyHash[h]=e}function fUNQ51(a){return parseFloat(a.toString().replace(/\$|\,|\s+|\%/g,""))}function fUNQ52(a){return a.toString().indexOf("%")!=-1?"%":""}function fUNQ53(a){return a.toString().indexOf("$")!=-1?"$":""}function fUNQ54(){var b="",c;if(mObject.filterListNames.length==0){if(userSettings.title!=null&&userSettings.title.length>0){c=$("#filtersDiv");if(c.length>0){c.html('<div id="mapTitle" style="overflow: hidden;">'+userSettings.title+"</div>");c.show()}}return}selectedFilterValues=new Array(mObject.filterListNames.length);var o="",j;var p="";for(j=0;j<mObject.filterListNames.length;j++){var l=[];var n=[];if(mObject.multiSelectFilters==null||!mObject.multiSelectFilters){n.push(ALL_FILTER)}n=n.concat(mObject.filterListSortedKeyHash[mObject.filterListNames[j]]);if(mObject.filterCounts!=null&&mObject.filterCounts){var f=mObject.filterListSortedKeyHash[mObject.filterListNames[j]];if(mObject.multiSelectFilters==null||!mObject.multiSelectFilters){l.push(dataLines.length)}for(var d=0;d<f.length;d++){l.push(fUNQ58(mObject.filterListNames[j],f[d]).length)}}var a=fUNQ65(n,ALL_FILTER,j.toString()+"_rfilter",null,null,l,mObject.multiSelectFilters);if(mObject.filterListNames.length>4){if(j==0){o='<tr><td rowspan="2"><button id="filterOptionsBlank" class="btn-mod btn-mod-default btn-mod-xs" style="display: none;"  onclick="fUNQ191();" ><i class="icon-mod-minus"></i></button><button id="moreFilterOptions" class="btn-mod btn-mod-default btn-mod-xs" onclick="fUNQ190();" title="Show all filters"><i class="icon-mod-plus"></i></button></td>';b="<tr>"}else{if(j%3==0){o='<tr class="hide_tr"><td></td>';b='<tr class="hide_tr"><td></td>'}}o=o+"<td>"+mObject.filterListNames[j]+"</td>";b=b+"<td>"+a+"</td>";if(j%3==2){o+="</tr>";b+="</tr>";p+=o;p+=b}else{if(mObject.filterListNames.length==j+1){if(mObject.filterListNames.length%3==1){o+="<td></td>";b+="<td></td>"}else{if(mObject.filterListNames.length%3==0){o+="<td></td><td></td>";b+="<td></td><td></td>"}}o+="</tr>";b+="</tr>";p+=o;p+=b}}}else{o=o+"<td>"+mObject.filterListNames[j]+"</td>";b=b+"<td>"+a+"</td>";selectedFilterValues[j]=ALL_FILTER}}if(mObject.filterListNames.length<=4){p="<tr>"+o+"</tr><tr>"+b+"</tr>"}var h="";if(mObject.filterListNames.length>4||mObject.multiSelectFilters!=null||mObject.multiSelectFilters){h=' style="overflow: visible;" '}var e="<div"+h+'><table id="filtersTable"><tbody>'+p+"</tbody></table></div>";c=$("#filtersDiv");if(!editMap&&(mObject.multiSelectFilters==null||!mObject.multiSelectFilters)){c.css("max-height",45)}if(c.length>0){c.html(e);c.show()}for(j=0;j<mObject.filterListNames.length;j++){var k=j;var g=j.toString()+"_rfilter";if(mObject.multiSelectFilters!=null&&mObject.multiSelectFilters){fUNQ55(g,k)}else{fUNQ57(g,k)}}}function fUNQ55(a,b){$("#"+a).multiselect({includeSelectAllOption:true,maxHeight:200,selectAllText:msSelectAll,nSelectedText:msNumSelected,nonSelectedText:msNoneSelected,numberDisplayed:1,onChange:function(c,d){fUNQ56(a,b)},onDropdownShow:function(c){alert("drop down show event invoked!")}})}function fUNQ56(c,a){var d=$("select#"+c).val();multiSelectFilterValues[a]=d;for(var b=0;d!=null&&b<d.length;b++){}activeMultiSelectFilter=a;fUNQ225();activeMultiSelectFilter=-1}function fUNQ57(b,a){jQuery("#"+b).change(function(){selectedFilterValues[a]=this.value;fUNQ225()})}function fUNQ58(b,d){var a=mObject.filterListNames.indexOf(b);if(a==-1){return[]}var c=mObject.filterListArray[a];if(c.hasOwnProperty(d)){return c[d]}return[]}function fUNQ59(b,a){var c=$("#group_sel option:selected").attr("value");if(c==-1){mObject.sortedGroupKeys.length=0;mObject.groupHash={};mObject.markerImageIdx=[];mObject.groupCustomColorImageHash={};return}var d=BASIC_GROUP_COUNT;if(mObject.mapType=="advanced"){d=MAX_GROUPS}a=typeof a!=="undefined"?a:d;fUNQ66(b,c,a)}function fUNQ60(b,a){fUNQ59(b,a);if(mObject.sortedGroupKeys.length>0){fUNQ61(b.length)}}function fUNQ61(f){if(mObject.useCustomImages!=null&&mObject.useCustomImages){return}var e=new Array(f);mObject.groupImageHash={};var a=0;for(var b=0;b<mObject.sortedGroupKeys.length;b++){var h=mObject.sortedGroupKeys[b];if(mObject.groupHash.hasOwnProperty(h)){var d=mObject.groupHash[h];var g=a;if(mObject.groupCustomColorImageHash!=undefined&&mObject.groupCustomColorImageHash.hasOwnProperty(h)){g=mObject.groupCustomColorImageHash[h]}for(var c=0;c<d.length;c++){e[d[c]]=g}mObject.groupImageHash[h]=g;a++}}if(mObject.sortedGroupKeys.length>0){mObject.markerImageIdx=e}}function fUNQ62(a){if(mObject.groupHash.hasOwnProperty(a)){return mObject.groupHash[a]}return[]}function fUNQ63(e,g,c,d){var f=$("#"+c);var a="";$("option",$(f)).remove();for(var b=0;b<e.length;b++){if(d.length==e.length){a=" ("+d[b]+")"}if(fUNQ89(e[b],g)){f.append('<option value="'+e[b]+'" selected>'+e[b]+a+"</option>\n")}else{f.append('<option value="'+e[b]+'" >'+e[b]+a+"</option>\n")}}f.multiselect("rebuild")}function fUNQ64(e,g,c,d){var f=$("#"+c);var h="";var a="";for(var b=0;b<e.length;b++){if(d.length==e.length){a=" ("+d[b]+")"}if(e[b]==g){h=h.concat('<option value="'+e[b]+'" selected>'+e[b]+a+"</option>\n")}else{h=h.concat('<option value="'+e[b]+'" >'+e[b]+a+"</option>\n")}}f.html(h)}function fUNQ65(d,e,b,k,f,l,j){var n=false;var m="";var o="";var p="250";if(f!=undefined){p=f;m=' style="width: '+p+'px;" '}if(j!=undefined&&j!=null&&j){o=' class="multiselect" multiple="multiple" '}if(l!=undefined&&d.length==l.length){n=true}var c="";if(k){c='<label id="'+b+'_label" for="'+b+'" >'+k+"</label>"}var g="";var a='<select name="'+b+'" id="'+b+'"'+m+" "+o+">\n";for(var h=0;h<d.length;h++){if(n){g=" ("+l[h]+")"}if(d[h]==e){a=a.concat('<option class="selectFont" value="'+d[h]+'" selected>'+d[h]+g+"</option>\n")}else{a=a.concat('<option class="selectFont" value="'+d[h]+'" >'+d[h]+g+"</option>\n")}}a=a.concat("</select>");return c+a}function fUNQ66(c,n,j){mObject.sortedGroupKeys.length=0;mObject.groupHash={};if((typeof n=="undefined")||n<0){return}var m={};var k=true;var b=true;var g=0;var f=[];var e=[];var h;for(h=0;h<c.length;h++){var a=c[h];if(a==null||a.length==0){continue}var l=a[n];if(l==null||l.trim()==""){e.push(h);continue}if(k){if(!$.isNumeric(fUNQ51(l))){k=false}}l=l.trim();if(b){if(!fUNQ161(l)){b=false}}var d;if(m.hasOwnProperty(l)){d=m[l];d.push(h)}else{d=[];d.push(h);m[l]=d;f.push(l);g++}}if(e.length>0){j=j-1}if(j>=g){if(b){fUNQ69(f)}else{if(k){f.sort(function(p,o){return fUNQ51(p)-fUNQ51(o)})}else{f.sort()}}for(h=0;h<f.length;h++){mObject.sortedGroupKeys.push(f[h]);mObject.groupHash[f[h]]=m[f[h]]}}if(g>j){if(b){fUNQ69(f)}else{if(k){f.sort(function(p,o){return fUNQ51(p)-fUNQ51(o)})}else{f.sort(function(p,o){return p.toLowerCase().localeCompare(o.toLowerCase())})}}fUNQ67(m,f,g,j)}if(e.length>0){mObject.groupHash[emptyText]=e;mObject.sortedGroupKeys.push(emptyText)}}function fUNQ67(n,b,e,k){var f;var a=Math.ceil(e/k);var o=e%k;if(o==0){o=k}var h,g,l,d,c;d=[];var m=0;for(f=0;f<k;f++){d=[];if(f<o){h=b[m];g=b[m+a-1];for(c=0;c<a;c++){d=d.concat(n[b[m]]);m++}}else{h=b[m];g=b[m+a-2];for(c=0;c<a-1;c++){d=d.concat(n[b[m]]);m++}}l=h+"-"+g;if(h==g){l=h}mObject.groupHash[l]=d;if(mObject.sortedGroupKeys.indexOf(l)==-1){mObject.sortedGroupKeys.push(l)}}}function fUNQ68(a,b){if(mObject.groupHash.hasOwnProperty(b)){return b}for(var c in mObject.groupHash){if(fUNQ89(a,mObject.groupHash[c])){return c}}return -1}function fUNQ69(b){var a;if(mObject.regionCode!=null&&mObject.regionCode.length>0&&mObject.regionCode!="us"){for(a=0;a<b.length;a++){b[a]=b[a].replace(/(\d+)\/(\d+)\//,"$2/$1/")}}b.sort(function(d,c){d=new Date(d);c=new Date(c);return d<c?-1:d>c?1:0});if(mObject.regionCode!=null&&mObject.regionCode.length>0&&mObject.regionCode!="us"){for(a=0;a<b.length;a++){b[a]=b[a].replace(/(\d+)\/(\d+)\//,"$2/$1/")}}}function fUNQ70(){var b="",a;for(a=0;a<dataLines.length;a++){if(dataLines[a]==null||dataLines[a].length==0){continue}b=b+fUNQ73(dataLines[a])+"\n"}return b}function safeLineProcessor(c,a,b){fUNQ71(c,a,b)}function fUNQ71(h,f,c){var d=false;var g=0;var a=h.split("\n");for(var b=0;b<a.length;b++){if(a[b].trim().indexOf("#")==0||a[b].trim()==""){continue}itemArray=a[b].split("	");if(!d){if(c&&c>0){g=c}else{g=itemArray.length}d=true}var e=1;while(itemArray[itemArray.length-1].length>0&&itemArray[itemArray.length-1].indexOf('"')==0&&b+e<a.length){itemArray[itemArray.length-1]+="\n"+a[b+e];if(a[b+e].length>0&&(a[b+e].endsWith('"')||a[b+e].indexOf('"	')>=0)){itemArray[itemArray.length-1]=fUNQ72(itemArray[itemArray.length-1]);if(itemArray.join("	").split("	").length==g&&itemArray.join("	").match(/\"/g||[]).length%2==0){itemArray=itemArray.join("	").split("	");b+=e;break}else{if(itemArray.join("	").split("	").length>g){break}}}e++}f.push(itemArray)}}function fUNQ72(c){var a=c.indexOf('"	');if(a<1){return c}var b=c.substr(0,a).replace(/\t/g,"")+c.substr(a,c.length-a);return b}function fUNQ73(e){var d="";for(var c=0;c<e.length;c++){var b=(e[c]==null?"":e[c].toString());var a=b.replace(/"/g,'""');if(a.search(/("|	|\n)/g)>=0){a='"'+a+'"'}if(c>0){d+="	"}d+=a}return d}function fUNQ74(a){if(a&&a.length>0){var b=$('#region_sel option[value="'+a.toLowerCase()+'"]');if(b.length>0){b.prop("selected",true)}}}function fUNQ75(b){if(b.country_code){var a=$('#region_sel option[value="'+b.country_code.toLowerCase()+'"]');if(a.length>0){a.prop("selected",true)}}}function fUNQ76(a){$.ajax({type:"GET",url:"/location",data:{ip_addr:a},dataType:"json",success:function(d,c,b){var e="OK";if(d.errorMessage){e=d.errorMessage}if(d.reservedIp!=0){e="Reserved IP"}fUNQ132(d,e,a)},error:function(d,c,b){var e="Other Error";if(d.errorMessage){e=d.errorMessage}fUNQ132(d,e,a)}})}function fUNQ77(){return;if(!((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined"))){return}var c=location.pathname;var d=$("#map_lang_sel");var a=c.split("/");if(a.length>0){for(var b=0;b<a.length;b++){if(a[b].length==2||a[b].length==5){if(d.find('option[value="'+a[b]+'"]').length()>0){$('#map_lang_sel option[value="'+a[b]+'"]').prop("selected",true);return}}}}}function fUNQ78(){$("#region_sel").change(function(){mObject.regionCode=this.value;fUNQ41()});if(!((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined"))){return}$.ajax({type:"GET",url:"/location",dataType:"json",success:function(c,b,a){if(c.errorMessage){}if(c.reservedIp==0){fUNQ75(c)}},error:function(c,b,a){if(c.errorMessage){}}})}function fUNQ79(b,c){var a=fUNQ260();$.ajax({type:"POST",url:"/savekml",data:{kml:a,Id:b},cache:false,dataType:"json",success:function(f,e,d){if(f.errorMessage){alert(f.errorMessage)}fUNQ80(true,b,c)},error:function(f,e,d){if(f.errorMessage){alert(f.errorMessage)}fUNQ80(false)}})}function fUNQ80(j,g,b){var l=$("#mapSaveStatus");var k=$("#mapUrl");l.show();if(j){var h="";if(savedMapId==null){savedMapId=g}else{h="re-"}fUNQ81(l,"<h5>"+savedSuccessText+"</h5>","success");if(g!=null&&k.length>0){userSettings.name=g.toString();var c=location.protocol+"//"+location.hostname+"/map/";var m=location.protocol+"//"+location.hostname+"/map/"+g.toString();k.html('<pre><p style="margin-bottom: 0px;">'+mapUrlText+' </p><a href="'+m+'" target="_blank">'+m+"</a></pre>");var f=' <pre><p style="margin-bottom: 0px;">'+mapUrlText+'  </p>  <a id="genMapUrl" href="'+m+'" target="_blank">'+c+'<span  id="editable-url">'+g.toString()+'</span></a><span  id="mod-url" style="display: none;"></span> <a onclick="fUNQ166(); return false;"  id="editable_url_btn" class="btn btn-mini btn-primary" href="#">'+editText+'</a><span id="edit-slug-buttons" style="display: none;"><a onclick="fUNQ167(); return false;"  class="btn btn-mini btn-primary" href="#">'+saveText+'</a> <a onclick="fUNQ168(); return false;" style=" white-space: nowrap; font-size: 11px; margin-right: 10px;" href="#">'+cancelText+'</a></span><span id="aliasStatusDiv" style="margin-left: 5px; margin-bottom: 0; padding: 4px; white-space: nowrap;"></span><span id="aliasInstDiv" style="display: none;"><p>'+validUrlChars+"</p></span></pre>";k.html(f);if(b!=null&&b.length>0&&geoCodeStats!=null&&geoCodeStats.limitHit){var d=$("#bulkGeoUrl");var e=location.protocol+"//"+location.hostname+"/bulkgeo/"+g.toString()+"/"+b.toString();d.html('<pre><p style="margin-bottom: 0px;">'+geoCodeMore+' </p><a href="'+e+'" target="_blank">'+e+"</a></pre>");d.show()}if(userSettings.email!=null&&userSettings.email){var a=$("#emailDisplay");a.show()}}if(typeof EditingMap=="undefined"){k.show();$("#mapModalButton").hide()}}else{$("#mapModalButton").button("reset");fUNQ81(l,"<h5>"+mapSaveProblemText+"</h5>","error")}}function fUNQ81(c,b,a){c.html(b);if(!c.hasClass("alert")){c.addClass("alert")}if(a=="error"){if(!c.hasClass("alert-error")){c.addClass("alert-error")}if(c.hasClass("alert-success")){c.removeClass("alert-success")}}else{if(c.hasClass("alert-error")){c.removeClass("alert-error")}if(!c.hasClass("alert-success")){c.addClass("alert-success")}}}function fUNQ82(){mObject.customSearchText=$("#searchText").val()}function fUNQ83(b){userSettings.email=$("#emailInput").val();userSettings.title=$("#titleInput").val();userSettings.description=$("#descriptionInput").val();userSettings.protectionLevel=$("input[name=protectionLevel]:checked").val();userSettings.mapLanguage=$("#map_lang_sel option:selected").val();if(typeof siteLanguage!=="undefined"){userSettings.userLanguage=siteLanguage}var a=$("#genKmlCB");if(a.length>0){userSettings.genKML=a.is(":checked")}userSettings.autoDelete=true;userSettings.dataOnPage=true;if(b!=null&&b){userSettings.autoDelete=($("input[name=mapDelete]:checked").val()=="true");if($("input[name=mapLayout]:checked").val()=="mapOnly"){userSettings.dataOnPage=false}}return !(userSettings.email.length>0&&!fUNQ44(userSettings.email))}function fUNQ84(){if(removedMarkers.length>0){fUNQ85();var a=BASIC_GROUP_COUNT;if(mObject.mapType=="advanced"){a=MAX_GROUPS}fUNQ66(dataLines,mObject.group,a);if(mObject.sortedGroupKeys.length>1){fUNQ61(dataLines.length)}fUNQ49(mObject.filterColumnIdxs,mObject.columnHeaderArray,dataLines)}}function fUNQ85(){var a;removedMarkers.sort(function(d,c){return d-c});for(a=removedMarkers.length-1;a>=0;a--){dataLines.splice(removedMarkers[a],1);gMapMarkers.splice(removedMarkers[a],1)}for(a=0;a<gMapMarkers.length;a++){gMapMarkers[a].idx=a}}function fUNQ86(){fUNQ84();fUNQ266();var f=fUNQ70();var c=JSON.stringify(mObject);var d=JSON.stringify(userSettings);var e="";var b="";var a="";if(savedMapId!=null){a=savedMapId}if(originalData!=null&&geoCodeStats.limitHit){e=originalData}if(geoCodeStats!=null&&geoCodeStats.limitHit){b=JSON.stringify(geoCodeStats)}$.ajax({type:"POST",url:"/savedata",data:({usercontent:f,configContent:c,mapDetails:d,mapType:mObject.mapType,existingId:a,tempData:e,tempStats:b}),cache:false,dataType:"json",success:function(j,h,g){if(j.errorMessage){}if(userSettings.genKML!=null&&userSettings.genKML==true){fUNQ79(j.uid,j.editId)}else{fUNQ80(true,j.uid,j.editId)}},error:function(j,h,g){if(j.errorMessage){}fUNQ80(false)}})}function fUNQ87(a){return(typeof(a)==typeof(Function))}function fUNQ88(b,a){for(var c in b){if(fUNQ89(b[c],a)){return true}}return false}function fUNQ89(b,a){return(a.indexOf(b)>=0)}function fUNQ90(c,b){var a=[];for(var d=0;d<c.length;d++){if(b.indexOf(c[d])!==-1){a.push(c[d])}}return a}function fUNQ91(b,a){var d=0;for(var c=0;c<b.length;c++){if(a.indexOf(b[c])!==-1){d++}}return d}var removedMarkers=[];var gMapMarkers=[];var gMap=null;var openMarker=null;var openWindow=null;var ignorePagingEvent=false;var samePosMarkers=[];var groupsOff=[];var selectedMarkers=[];var selectedMarkerSet=false;var markerCluster=null;var showFilterCounts=false;var googleMapOptions=[];var DISPLAYABLE_ITEMS_PER_PAGE=50;var CLUSTER_ZOOM_LEVEL=12;var ITEMS_PER_PAGE=5;var currentPageMarkerNum=1;var lastPageMarkerNum=1;var nextPageMarkerNum=1+ITEMS_PER_PAGE;var previousPageMarkerNum=1;var searchTermHash={};var secondarySearchTermHash={};var mobileDevice=false;var tabletDevice=false;var inIframe=false;var showDirections=true;var directionsService=null;var directionsDisplay=null;var sizeMapOnLoad=true;var markerDescriptions=[];var markerImgEnding=IMG_FILE_ENDING;var showMoreOptions=false;var exportData=false;var zoomInSearching=false;var mapGeocoder=null;var validNav=true;var navMarker=null;var showNumberedMarkers=false;var circle=null;var circleFilter=false;var showDistance=false;var circleRadius=0;var activeDirTextBox=0;var nearAddressTextBox=false;function initMap(p,d){if(mObject.showLabels==null){mObject.showLabels=true}if(mObject.showMoreOptions!=null&&mObject.showMoreOptions){showMoreOptions=true}if(mObject.filterCounts!=null&&mObject.filterCounts){showFilterCounts=true}if(mObject.sortedGroupKeys!=null&&mObject.sortedGroupKeys.length>11){markerImgEnding=DOT_IMAGE_ENDING}if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))||((navigator.userAgent.match(/mobile/i))&&(navigator.userAgent.match(/Android/i)))||(navigator.userAgent.match(/blackberry/i))||(navigator.userAgent.match(/windows phone/i))){mobileDevice=true}if(!mobileDevice&&((navigator.userAgent.match(/Android/i))||(navigator.userAgent.match(/iPad/i)))){tabletDevice=true}if(window.location!=window.parent.location){inIframe=true;if(fUNQ264("showData")=="1"){inIframe=false}else{$("body").html(fUNQ198())}}else{}if(!inIframe&&!mobileDevice&&!tabletDevice&&!editMap){$("#map").css("height",fUNQ265()-150);if(mObject.exportData!=null&&mObject.exportData){exportData=true}}if(mObject.zoomInSearching!=null&&mObject.zoomInSearching){zoomInSearching=true}if(mObject.showMarkerNumbers!=null&&mObject.showMarkerNumbers){if(!(mObject.useCustomImages!=null&&mObject.useCustomImages)){showNumberedMarkers=true}}if(mObject.showDirectionDescription!=null&&mObject.showDirectionDescription==false){showDirections=false}if(!inIframe&&tabletDevice&&showMoreOptions){$("#left").html(fUNQ197())}googleMapOptions=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID];var f=googleMapOptions[d];if(gMap!=null){return}var l=false;if(mObject.scrollWheel!=null&&mObject.scrollWheel==true){l=true}var a=new google.maps.LatLng(39.8282,-98.5795);var n=4;if(fUNQ251(mObject.center_lat,mObject.center_lng)){a=new google.maps.LatLng(mObject.center_lat,mObject.center_lng);if(mObject.customZoomAndCenter!=null&&mObject.customZoomAndCenter){if(mObject.zoom!=null&&mObject.zoom>0&&mObject.zoom<25){n=mObject.zoom;sizeMapOnLoad=false}}}var m=null;if(mObject.zoomInLevel!=null&&mObject.zoomInLevel){m=mObject.zoomInLevel}var g={zoom:n,center:a,mapTypeControl:false,scaleControl:true,scrollwheel:l,minZoom:1,maxZoom:m,panControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},scaleControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}};gMap=new google.maps.Map(document.getElementById("map"),g);gMap.setMapTypeId(f);if(!mobileDevice&&showMoreOptions){var h=document.createElement("div");h.innerHTML='<img id="moreOptionsBlank" src="/img/more_options_blank.png" style="display: none;"><img id="moreOptions" src="/img/more_options.png" onclick="fUNQ189();">';h.index=1;gMap.controls[google.maps.ControlPosition.TOP_LEFT].push(h)}if((mobileDevice||tabletDevice)&&!inIframe){var c=document.createElement("div");c.innerHTML='<img id="navHide" src="/img/location_nav2_small.png" style="display: none;" onclick="fUNQ187();"><img id="navShow" src="/img/location_nav1_small.png" onclick="fUNQ188();">';c.index=1;gMap.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(c)}var e=document.createElement("div");fUNQ202(e,gMap,myMapOptions,f,googleMapOptions);e.index=1;gMap.controls[google.maps.ControlPosition.TOP_RIGHT].push(e);google.maps.event.addListener(gMap,"click",function(){if(openWindow!=null){openWindow.close()}});if(mObject.emm_lat>-1&&mObject.lat==-1){mObject.lat=mObject.emm_lat}if(mObject.emm_lng>-1&&mObject.lng==-1){mObject.lng=mObject.emm_lng}addMarkers(mObject.lat,mObject.lng,dataLines);if(editMap){mObject.center_lat=gMap.getCenter().lat();mObject.center_lng=gMap.getCenter().lng()}fUNQ224();if(!mobileDevice){fUNQ54();fUNQ253();if(mObject.customSearchText!=null&&mObject.customSearchText.length>0){$("#searchBox").attr("placeholder",mObject.customSearchText)}if(!inIframe&&mObject.displayDataOnPage&&!tabletDevice){fUNQ244()}if(inIframe){var b=$("#mapHeader");var o=$("#map");o.css("top",b.outerHeight());setTimeout(function(){var s=$("#mapHeader");var r=$("#map");r.css("top",s.outerHeight());if(showMoreOptions){$("#left").css("top",s.outerHeight())}var u=$("#descriptionDiv");var t=0;if(u.length>0){t+=u.outerHeight(true)}var q=$("#groupChecksDiv");if(q.length>0&&q.is(":visible")){r.css("bottom",q.outerHeight()+t);if(showMoreOptions){$("#left").css("bottom",q.outerHeight()+t+6)}if(t>0){q.css("bottom",t)}}else{if(t>0){r.css("bottom",t);if(showMoreOptions){$("#left").css("bottom",t)}}}if(showMoreOptions&&inIframe){$("#dirTextDiv").css("height",$("#map").outerHeight()-137)}google.maps.event.trigger(gMap,"resize")},2000)}if(showMoreOptions&&!inIframe&&tabletDevice){var j=0;if($("#mapHeader").length>0){j=$("#mapHeader").outerHeight()}$("#dirTextDiv").css("height",250-j);$("#left").css("height",400-j)}}if(dataLines.length>=1000&&!mObject.clustering){google.maps.event.addListener(gMap,"idle",showMarkers)}if(showMoreOptions){fUNQ186()}if(exportData){fUNQ183()}setTimeout(function(){$("div").removeClass("gm-style")},3000);if(!editMap&&!inIframe&&!mobileDevice&&!tabletDevice){var k;setTimeout(reSizePcMap,1000);$(window).resize(function(){if(k){clearTimeout(k)}k=setTimeout(reSizePcMap,200)})}}function reSizePcMap(){var e=0;var c=$("#map");var a=$("#mapHeader");if(a.length>0&&a.outerHeight()>0){e+=a.outerHeight()}var b=$("#groupChecksDiv");if(b.length>0&&b.is(":visible")){if(b.outerHeight()>c.outerHeight()){e+=(b.outerHeight()-c.outerHeight())}else{e+=(b.outerHeight())}}var f=$("#descriptionDiv");if(f.length>0&&f.outerHeight()>0){if(f.outerHeight()>c.outerHeight()){e+=(f.outerHeight()-c.outerHeight())}else{e+=f.outerHeight()}}$("#map").css("height",fUNQ265()-e-10);$("#mapContainer").css("min-height",fUNQ265()-e-10);if(showMoreOptions){$("#left").css("height",fUNQ265()-e-10);$("#dirTextDiv").css("height",fUNQ265()-e-140)}google.maps.event.trigger(gMap,"resize");var d=$("#ui-id-1");if(d.length>0){d.css("max-height",fUNQ265()-e-10)}}function fUNQ183(){$("#exportData").show();$("#exportDataDisplay").click(function(){var a=$("#exportDataDisplay").text();if(a==showDataText){var b=$("#sourceData");$("#tableText").show();b.select();$("#exportDataDisplay").text(hideDataText);b.val(fUNQ184());$("#exportDataRefresh").show()}else{$("#tableText").hide();$("#exportDataDisplay").text(showDataText);$("#exportDataRefresh").hide()}});$("#exportDataRefresh").click(function(){$("#sourceData").val(fUNQ184())})}function fUNQ184(){var c=gMap.getBounds();var b=0;var a="";a+=fUNQ185(mObject.columnHeaderArray);for(b=0;b<gMapMarkers.length;b++){if(gMapMarkers[b].show&&c.contains(gMapMarkers[b].getPosition())){a+=fUNQ185(dataLines[b])}}return a}function fUNQ185(d){var c="";var b=0;for(var a=0;a<d.length;a++){if(a!=mObject.emm_acc&&a!=mObject.emm_lat&&a!=mObject.emm_lng){if(b!=0){c+="\t"}else{b=1}c+=d[a]}}return c+"\n"}function fUNQ186(){if($("#mapWindowData").length==0){var a=$("#displayDistance");if(a.length>0){a.hide()}}$("#dirTabDisplay").click(function(){fUNQ192()});$("#clearDirSubmit").click(function(){$("#dirAddress1").val("");$("#dirAddress2").val("");$("#dirError").hide();activeDirTextBox=0;if(directionsDisplay!=null){directionsDisplay.setPanel(null);directionsDisplay.setMap(null)}});$("#directionSubmit").click(function(){var d=$("#dirError");var c=$("#dirAddress1").val();var b=$("#dirAddress2").val();d.hide();if(c.trim().length==0){d.show();d.html(badStartAddressText);return}else{if(b.trim().length==0){d.show();d.html(badEndAddressText);return}}fUNQ196(c,b)});$("#hideOptions").click(function(){var b=$("#moreOptionsBlank");$("#left").hide();$("#moreOptions").show();b.hide();if(inIframe||tabletDevice){$("#map").css("left",0)}else{var c=$("#mapContainer");if(c.hasClass("padLeft")){c.removeClass("padLeft")}}google.maps.event.trigger(gMap,"resize");activeDirTextBox=0;nearAddressTextBox=false});$("#nearbyTabDisplay").click(function(){$("#leftDirDisplay").hide();$("#leftNearbyDisplay").show();activeDirTextBox=0;var b=$("#nearbyTabDisplay");if(!b.hasClass("activeDirHeader")){b.addClass("activeDirHeader")}$("#dirTabDisplay").removeClass("activeDirHeader")});$("#clearNearbySubmit").click(function(){$("#nearAddress").val("");$("#nearRadius").val("");$("#nearbyError").hide();if(circle!=null){circle.setMap(null)}if(circleFilter){showDistance=false;circleFilter=false;fUNQ225()}nearAddressTextBox=false});$("#nearbySubmit").click(function(){var g="";var b=$("#nearRadius").val();var e=$("input[name=distType]:checked").val();var f=$("#showCircle").is(":checked");showDistance=$("#showDistance").is(":checked");var d=$("#nearAddress").val();var j="KM";var h=$("#nearbyError");if(!$.isNumeric(b)||b<=0){g=badRadiusText+" : "+b;h.html(g);h.show();return}if(d.trim().length==0){g=emtpyLocationText;h.html(g);h.show();return}if(e=="mi"){b*=1.6093;j=milesText}b*=1000;if(mapGeocoder==null){mapGeocoder=new google.maps.Geocoder()}var c=true;mapGeocoder.geocode({address:d},function(n,k){if(k==google.maps.GeocoderStatus.OK){var l=n[0].geometry.location;gMap.setCenter(n[0].geometry.location);if(circle!=null){circle.setMap(null)}circle=new google.maps.Circle({clickable:false,draggable:false,editable:false,fillColor:"blue",fillOpacity:0.2,strokeColor:"blue",strokeOpacity:0.4,radius:b,map:gMap,center:l,visible:f});gMap.fitBounds(circle.getBounds());circleFilter=true;circleRadius=b;for(var m=0;m<gMapMarkers.length;m++){if(gMapMarkers[m]!=null){if(circle.getBounds().contains(gMapMarkers[m].getPosition())){gMapMarkers[m].distanceM=google.maps.geometry.spherical.computeDistanceBetween(l,gMapMarkers[m].getPosition());if(showDistance){if(e=="mi"){gMapMarkers[m].displayDistance=gMapMarkers[m].distanceM*0.00062137}else{gMapMarkers[m].displayDistance=gMapMarkers[m].distanceM*0.001}if(gMapMarkers[m].displayDistance<1){gMapMarkers[m].displayDistance=gMapMarkers[m].displayDistance.toFixed(3)}else{if(gMapMarkers[m].displayDistance<100){gMapMarkers[m].displayDistance=gMapMarkers[m].displayDistance.toFixed(2)}else{gMapMarkers[m].displayDistance=gMapMarkers[m].displayDistance.toFixed()}}gMapMarkers[m].displayDistance+=" "+j}}}}fUNQ225()}else{c=false}});if(c){h.hide()}else{h.html(invalidLocationText+" : "+d);h.show()}});$("#dirAddress1").click(function(){activeDirTextBox=1});$("#dirAddress2").click(function(){activeDirTextBox=2});$("#nearAddress").click(function(){nearAddressTextBox=true})}function fUNQ187(){$("#navShow").show();$("#navHide").hide();if(navMarker!=null){navMarker.setMap(null)}}function fUNQ188(){if(validNav&&navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition,errorCallback)}else{validNav=false;$("#navShow").hide();$("#navHide").hide()}}function errorCallback(a){alert(locationServicesAlert);validNav=false;$("#navShow").hide();$("#navHide").hide()}function getCurrentNavPostion(a){$("#navShow").hide();$("#navHide").show();var c=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);if(navMarker==null){var b="/img/nav1_small.png";var d={url:b,size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,16)};navMarker=new google.maps.Marker({position:c,map:gMap,icon:d,zIndex:15})}else{navMarker.setPosition(c);navMarker.setMap(gMap)}}function showPosition(a){$("#navShow").hide();$("#navHide").show();var d=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);if(navMarker==null){var c="/img/nav1_small.png";var f={url:c,size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,16)};navMarker=new google.maps.Marker({position:d,map:gMap,icon:f,zIndex:15})}else{navMarker.setPosition(d);navMarker.setMap(gMap)}var g=gMap.getZoom();if(g<12){g=14}else{if(g<16){g=15}}gMap.panTo(navMarker.getPosition());gMap.setZoom(g);var b=fUNQ257(a.coords.latitude,a.coords.longitude);if(b>=0){var e=new google.maps.LatLngBounds(navMarker.getPosition(),navMarker.getPosition());e.extend(gMapMarkers[b].getPosition());gMap.fitBounds(e)}}function fUNQ189(){$("#left").show();$("#moreOptionsBlank").show();$("#moreOptions").hide();if(inIframe||tabletDevice){$("#map").css("left",300)}else{var a=$("#mapContainer");if(!a.hasClass("padLeft")){a.addClass("padLeft")}}google.maps.event.trigger(gMap,"resize")}function fUNQ190(){$("#filterOptionsBlank").show();$("#moreFilterOptions").hide();var a=$("#filtersTable");if(!a.hasClass("activeFullFilterTable")){a.addClass("activeFullFilterTable")}$(".hide_tr").addClass("show_tr").removeClass("hide_tr")}function fUNQ191(){$("#filterOptionsBlank").hide();$("#moreFilterOptions").show();var a=$("#filtersTable");if(a.hasClass("activeFullFilterTable")){a.removeClass("activeFullFilterTable")}$(".show_tr").addClass("hide_tr").removeClass("show_tr")}function fUNQ192(){$("#leftDirDisplay").show();$("#leftNearbyDisplay").hide();var a=$("#dirTabDisplay");if(!a.hasClass("activeDirHeader")){a.addClass("activeDirHeader")}$("#nearbyTabDisplay").removeClass("activeDirHeader");nearAddressTextBox=false}function fUNQ193(a){if($("#leftNearbyDisplay").is(":visible")){var b=fUNQ195(a);$("#nearAddress").val(b)}else{fUNQ189();fUNQ192();activeDirTextBox=2;fUNQ194(a);activeDirTextBox=0;$("#dirAddress1").val("")}}function fUNQ194(a){var b;if(showMoreOptions&&activeDirTextBox>0&&$("#dirTabDisplay").is(":visible")){b=fUNQ195(a);$("#dirAddress"+activeDirTextBox).val(b)}else{if(showMoreOptions&&nearAddressTextBox&&$("#nearbyTabDisplay").is(":visible")){b=fUNQ195(a);$("#nearAddress").val(b)}}}function fUNQ195(a){var c="Marker "+a.idx+1;var b=fUNQ223(dataLines[a.idx]," ",true);if(b.length>0){c=b}else{if(fUNQ241(mObject.title)&&dataLines[a.idx][mObject.title]!=""){c=dataLines[a.idx][mObject.title]}}return c}function fUNQ196(c,a){if(directionsService==null){directionsService=new google.maps.DirectionsService()}if(directionsDisplay==null){directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:true,suppressInfoWindows:true});directionsDisplay.setMap(gMap)}if(c&&a){var b={origin:c,destination:a,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(b,function(d,e){if(e==google.maps.DirectionsStatus.OK){directionsDisplay.setMap(gMap);directionsDisplay.setPanel(document.getElementById("dirTextDiv"));directionsDisplay.setDirections(d)}else{var f=$("#dirError");f.html(directionErroText+" : "+e);f.show()}})}}function fUNQ197(){return'   <div id="left_header" class="dirHeader">        <a id="dirTabDisplay" style="margin-left: 5px;" class="activeDirHeader">'+directionText+'</a>        <a id="nearbyTabDisplay">'+nearbyText+'</a>        <img id="hideOptions" src="/img/hide_options.png" style="float: right; margin-right: 10px;  cursor: pointer;">    </div>    <div id="leftDirDisplay" class="leftDiv" style="background-color: white;">        <p> <label id="dirAddress1_label" for="dirAddress1" class="optionLabel">'+startText+': </label><input id="dirAddress1"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="dirAddress2_label" for="dirAddress2" class="optionLabel">'+endText+': </label> <input id="dirAddress2"  type="text"  SIZE=20 MAXLENGTH=200 ></p>      <!--  <p><a href="#">add location</a></p> -->        <p style="text-align: right; margin-right: 50px;"><INPUT id="directionSubmit" value="'+getDirText+'" TYPE="SUBMIT" />        <INPUT id="clearDirSubmit" value="'+clearText+'" TYPE="SUBMIT" /> </p>         <div id="dirError" style="display: none; "></div>         <div id="dirTextDiv" style="padding: 10px; height: 445px; overflow: auto;"></div>     </div>     <div id="leftNearbyDisplay" class="leftDiv" style="display: none;">         <p><label id="nearAddress_label" for="nearAddress" class="optionLabel">Location: </label><input id="nearAddress"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="nearRadius_label" for="nearRadius" class="optionLabel">'+radiusText+': </label><input id="nearRadius"  type="text"  SIZE=3 MAXLENGTH=3 style="text-align: right;" autocomplete="off">            <label class="radio" style=" text-align: left;"><input type="radio" name="distType" value="mi" id="distMi" checked  autocomplete="off">'+milesText+'  </label>            <label class="radio" style="width: 400px;  text-align: left;"><input type="radio" name="distType" value="km"  id="distKM" > km </label></p>        <p><label class="checkboxText"><input type="checkbox" name="showCircle" value="false"  id="showCircle"   class="checkLabel" >'+showCircleText+'</label></p>        <p style="text-align: right; margin-right: 50px;"><INPUT id="nearbySubmit" value="'+findNearbyText+'" TYPE="SUBMIT" />           <INPUT id="clearNearbySubmit" value="'+clearText+'" TYPE="SUBMIT" /> </p>       <div id="nearbyError" style="display: none; "></div>   </div> '}function fUNQ198(){var a="";if(userSettings.description!=null&&userSettings.description.length>0){a+='<div id="descriptionDiv" class="mapDescriptionFont"  style="position:fixed;left:0;right:0; bottom:0px; font-size: .8em;"> '+userSettings.description+"</div>"}var b="";if(showMoreOptions){b='<div id="left" class="column mapDefaultFont" style="background-color: white; width: 300px; display: none; margin-left: 0; ">    <div id="left_header" class="dirHeader">        <a id="dirTabDisplay" style="margin-left: 5px;" class="activeDirHeader">'+directionText+'</a>        <a id="nearbyTabDisplay">'+nearbyText+'</a>        <img id="hideOptions" src="/img/hide_options.png" style="float: right; margin-right: 10px;  cursor: pointer;">    </div>    <div id="leftDirDisplay" class="leftDiv" style="background-color: white;">        <p> <label id="dirAddress1_label" for="dirAddress1" class="optionLabel">'+startText+': </label><input id="dirAddress1"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="dirAddress2_label" for="dirAddress2" class="optionLabel">'+endText+': </label> <input id="dirAddress2"  type="text"  SIZE=20 MAXLENGTH=200 ></p>      <!--  <p><a href="#">add location</a></p> -->        <p style="text-align: right; margin-right: 50px;"><INPUT id="directionSubmit" value="'+getDirText+'" TYPE="SUBMIT" />        <INPUT id="clearDirSubmit" value="'+clearText+'" TYPE="SUBMIT" /> </p>         <div id="dirError" style="display: none; "></div>         <div id="dirTextDiv" style="padding: 10px; height: 445px; overflow: auto;"></div>     </div>     <div id="leftNearbyDisplay" class="leftDiv" style="display: none;">         <p><label id="nearAddress_label" for="nearAddress" class="optionLabel">Location: </label><input id="nearAddress"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="nearRadius_label" for="nearRadius" class="optionLabel">Radius: </label><input id="nearRadius"  type="text"  SIZE=3 MAXLENGTH=3 style="text-align: right;" autocomplete="off">            <label class="radio" style=" text-align: left;"><input type="radio" name="distType" value="mi" id="distMi" checked  autocomplete="off">'+milesText+'  </label>            <label class="radio" style="width: 400px;  text-align: left;"><input type="radio" name="distType" value="km"  id="distKM" > km </label></p>        <p><label class="checkboxText"><input type="checkbox" name="showCircle" value="false"  id="showCircle"   class="checkLabel" >'+showCircleText+'</label></p>        <p style="text-align: right; margin-right: 50px;"><INPUT id="nearbySubmit" value="'+findNearbyText+'" TYPE="SUBMIT" />           <INPUT id="clearNearbySubmit" value="'+clearText+'" TYPE="SUBMIT" /> </p>       <div id="nearbyError" style="display: none; "></div>   </div>  </div> '}var c=customLogUrl;if(fUNQ264("logo").length>1){c=fUNQ264("logo")}return'<div id="mapHeader"  class="mapDefaultFont" style="left:0;right:0; z-index:100; top:0px; position: fixed; min-height: 45px;">  <div id="searchDiv" class="search-query">       <input id="searchBox" class="search-query span2" type="text" placeholder="Search"  onkeypress="return handleSearchSubmit(event)" value=""><img class="search-query" src="/img/search.png" onclick="runSearch();" Title="Search">      <a href="http://www.easymapmaker.com" target="_blank"><img class="search-query" src="'+c+'" Title="'+mapMadeText+'" ></a>  </div>  <div id="filtersDiv"  class="mapFilterFont" ></div> </div> <div id="mapContainer" style="position:absolute;left:0;right:0; top:0px;bottom:0px;">     <div id="map"         style="position:absolute;left:0;right:0; top:0px;bottom:0px;"></div> '+b+'   <div id="groupsOverDiv"  class="mapGroupsFont" style="  text-align: center;     width: 100%; -webkit-text-size-adjust: none;">        <div id="groupChecksDiv" class="groupsDivPC" style="left:0;right:0; z-index:100; bottom:0px; position: fixed; display: inline-block;">         </div>    </div> '+a+"</div> "}function showMarkers(){if(gMapMarkers.length<1000){return}var b=gMap.getBounds();var a;if(selectedMarkers.length>0||selectedMarkerSet){for(a=0;a<selectedMarkers.length;a++){if(selectedMarkers[a]<gMapMarkers.length){if(gMapMarkers[selectedMarkers[a]]==null){continue}if(b.contains(gMapMarkers[selectedMarkers[a]].getPosition())&&gMapMarkers[selectedMarkers[a]].getMap()==null){gMapMarkers[selectedMarkers[a]].setMap(gMap)}else{if(!b.contains(gMapMarkers[selectedMarkers[a]].getPosition())&&gMapMarkers[selectedMarkers[a]].getMap()!=null){gMapMarkers[selectedMarkers[a]].setMap(null)}}}}}else{for(a=0;a<gMapMarkers.length;a++){if(gMapMarkers[a]==null){continue}if(b.contains(gMapMarkers[a].getPosition())&&gMapMarkers[a].getMap()==null){gMapMarkers[a].setMap(gMap)}else{if(!b.contains(gMapMarkers[a].getPosition())&&gMapMarkers[a].getMap()!=null){if(openWindow!=null&&openMarker.idx==a){continue}gMapMarkers[a].setMap(null)}}}}}function fUNQ199(b){var d=[];if(openWindow!=null){openWindow.close();openWindow=null;openMarker=null}if(mObject.clustering&&markerCluster!=null){markerCluster.clearMarkers()}for(var c=0;c<b.length;c++){var a=b[c];if(a<gMapMarkers.length){if(gMapMarkers[a]==null){continue}fUNQ231(gMapMarkers[a]);if(mObject.clustering){d.push(gMapMarkers[a])}}}if(mObject.clustering){markerCluster.addMarkers(d)}fUNQ244()}function fUNQ200(b){var f=gMap.getZoom();var e=null;var d=0;if(openWindow!=null){openWindow.close();openWindow=null;openMarker=null}for(var c=0;c<b.length;c++){var a=b[c];if(a<gMapMarkers.length){if(gMapMarkers[a]==null){continue}if(e==null){e=new google.maps.LatLngBounds(gMapMarkers[a].getPosition(),gMapMarkers[a].getPosition())}else{e.extend(gMapMarkers[a].getPosition());d++}}}if(!circleFilter){gMap.fitBounds(e);gMap.setCenter(e.getCenter())}if(d==0&&!circleFilter){if(f<17){gMap.setZoom(17)}else{gMap.setZoom(f)}}fUNQ244()}function fUNQ201(b){var g=gMap.getZoom();var f=null;var d=0;var e=[];if(openWindow!=null){openWindow.close();openWindow=null;openMarker=null}if(mObject.clustering){markerCluster.clearMarkers()}if(b.length==0){fUNQ242();return}for(var c=0;c<b.length;c++){var a=b[c];if(a<gMapMarkers.length){if(gMapMarkers[a]==null){continue}if(f==null){f=new google.maps.LatLngBounds(gMapMarkers[a].getPosition(),gMapMarkers[a].getPosition())}else{f.extend(gMapMarkers[a].getPosition());d++}if(mObject.clustering){e.push(gMapMarkers[a])}}}if(!circleFilter){gMap.fitBounds(f);gMap.setCenter(f.getCenter())}if(d==0&&!circleFilter){if(g<17){gMap.setZoom(17)}else{gMap.setZoom(g)}}if(mObject.clustering){markerCluster.addMarkers(e)}fUNQ244()}function fUNQ202(b,a,e,c,j){b.style.padding="5px";var h=document.createElement("div");h.align="center";b.appendChild(h);var g=document.createElement("select");g.name="MapStyle";g.id="MapStyle";h.appendChild(g);for(var d=0;d<e.length;d++){var f=document.createElement("option");f.value=e[d];f.innerHTML=e[d];if(c.toLowerCase()==e[d].toLowerCase()){f.selected="selected"}g.appendChild(f)}google.maps.event.addDomListener(g,"change",function(){for(var k=0;k<e.length;k++){if(this.value==e[k]){a.setMapTypeId(j[k])}}})}function addMarkers(e,g,m){if(m.length==0){return}var k=new google.maps.LatLng(m[0][e],m[0][g]);var p=new google.maps.LatLngBounds(k,k);var d=false;for(var n=0;n<m.length;n++){if(e>=m[n].length||g>=m[n].length||!fUNQ251(m[n][e],m[n][g])){continue}k=new google.maps.LatLng(m[n][e],m[n][g]);var l=IMG_LIST[0];var b=IMG_HEX_COLORS[0];var f="/marker_images/image.png";var q=new google.maps.Size(20,34);var o=new google.maps.Point(0,0);var c=new google.maps.Point(10,34);var j;if(mObject.useCustomImages!=null&&mObject.useCustomImages){if(mObject.clusterColor!=null){l=mObject.clusterColor;b=mObject.clusterHexColor}if(mObject.singleCustomImage!=null){f=mObject.singleCustomImage;q=new google.maps.Size(mObject.singleCustomImageWidth,mObject.singleCustomImageHeight);c=new google.maps.Point(Math.ceil(mObject.singleCustomImageWidth/2),mObject.singleCustomImageHeight);d=true}else{var s=fUNQ68(n,m[n][mObject.group]);if(s!=-1&&mObject.groupImageHash.hasOwnProperty(s)){f=mObject.groupImageHash[s];d=true;q=new google.maps.Size(mObject.ImageDimensions[s].width,mObject.ImageDimensions[s].height);c=new google.maps.Point(Math.ceil(mObject.ImageDimensions[s].width/2),mObject.ImageDimensions[s].height)}}j={url:f,size:q,origin:o,anchor:c}}else{if(mObject.markerImageIdx!=undefined&&mObject.markerImageIdx.length>=n&&mObject.markerImageIdx[n]>=0&&mObject.markerImageIdx[n]!=null){if(mObject.markerImageIdx.length>0&&mObject.markerImageIdx[n]<IMG_LIST.length){f=IMAGE_PATH+IMG_LIST[mObject.markerImageIdx[n]]+markerImgEnding;l=IMG_LIST[mObject.markerImageIdx[n]];b=IMG_HEX_COLORS[mObject.markerImageIdx[n]]}}if(showNumberedMarkers&&m.length<100){f=IMAGE_PATH+(n+1)+"_"+l+".png"}j={url:f,size:new google.maps.Size(20,34),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,34)}}var h;var a=null;if(!mObject.clustering){a=gMap}if(mObject.pinLabel!=null&&mObject.pinLabel>=0&&m[n][mObject.pinLabel]){var r=l+"MarkerLabel";h=new MarkerWithLabel({position:k,draggable:editMap,raiseOnDrag:editMap,map:a,labelContent:m[n][mObject.pinLabel],labelAnchor:new google.maps.Point(22,0),labelClass:r+" defaultMarkerLabel",labelStyle:{opacity:0.95},icon:f})}else{if(d){h=new google.maps.Marker({position:k,map:a,icon:j,zIndex:m.length-n})}else{h=new google.maps.Marker({position:k,map:a,icon:j,shape:DEFAULT_SHAPE,zIndex:m.length-n})}if(editMap){h.setDraggable(true)}}if(fUNQ241(mObject.title)&&mObject.markerTitle!=null&&mObject.markerTitle==true){h.setTitle(m[n][mObject.title])}if(sizeMapOnLoad){p.extend(k)}h.idx=gMapMarkers.length;h.color=l;h.hexColor=b;h.show=true;fUNQ204(h,gMapMarkers.length,m[n]);gMapMarkers.push(h);if(editMap){google.maps.event.addListener(h,"dragend",function(){fUNQ220(this,e,g)})}}if(mObject.clustering){markerCluster=new MarkerClusterer(gMap,gMapMarkers,{calculator:myCalculator,maxZoom:CLUSTER_ZOOM_LEVEL,averageCenter:true,gridSize:65})}if(sizeMapOnLoad){gMap.fitBounds(p);gMap.setCenter(p.getCenter())}}function fUNQ203(b,a,c){if(a==true){b.getIcon().url=IMAGE_PATH+c+"_"+b.color+".png"}else{b.getIcon().url=IMAGE_PATH+b.color+markerImgEnding}}function fUNQ204(d,c,b){var e=fUNQ217(b);if(mObject.displayDataOnPage&&!mobileDevice&&!inIframe&&!tabletDevice){var a=fUNQ215(b);markerDescriptions[markerDescriptions.length]={message:a,markerIdx:c}}e='<div id="markerDiv" class="infoW">'+e;if(mobileDevice){e='<div id="markerDiv" style="overflow-y:scroll; font-size:10pt; top: 26px; font-family:arial; font-weight:bold;">'+e}if(editMap){e=e+'<a id="removeMarker">'+removePinText+"</a> "}e=e+"</div>";var f=new google.maps.InfoWindow({content:e,maxWidth:400});if(mobileDevice){}else{}google.maps.event.addListener(d,"click",function(){if(openWindow!=null&&openWindow!=f){openWindow.close()}if(mObject.clustering&&d.getMap()!==gMap){gMap.setZoom(15);markerCluster.repaint()}samePosMarkers.length=0;for(var g=0;g<dataLines.length&&g<gMapMarkers.length;g++){if(gMapMarkers[g]==null){continue}if(g!=d.idx&&dataLines[g].length&&gMapMarkers[g].idx>=0&&gMapMarkers[g].getMap()!=null&&gMapMarkers[g].show&&fUNQ247(dataLines[d.idx][mObject.lat],dataLines[d.idx][mObject.lng],dataLines[g][mObject.lat],dataLines[g][mObject.lng])){samePosMarkers[samePosMarkers.length]=gMapMarkers[g].idx}}if(samePosMarkers.length>0){samePosMarkers.unshift(d.idx);currentPageMarkerNum=1;lastPageMarkerNum=1;nextPageMarkerNum=1+ITEMS_PER_PAGE;previousPageMarkerNum=1}if(showDirections||samePosMarkers.length>0){f.setContent(e)}ignorePagingEvent=false;openMarker=d;f.open(gMap,d);openWindow=f;fUNQ194(d);if(editMap||samePosMarkers.length>0||showDirections){google.maps.event.addListenerOnce(f,"domready",function(){if(samePosMarkers.length>0&&!ignorePagingEvent){fUNQ208()}if(showDirections){fUNQ212(d,openWindow)}if(editMap){fUNQ205(d,openWindow)}var h=$("#markerDiv");var j=h.parent().parent();if(h.outerHeight()<j.parent().height()&&($("#map").outerHeight()-100>h.outerHeight())){j.css({width:"",overflow:""});setTimeout(function(){j.css({width:"",overflow:""})},500)}})}});google.maps.event.addListener(f,"closeclick",function(){if(openWindow==f){openWindow=null}})}function fUNQ205(a,b){$("#removeMarker").click(function(){var c=confirm(removeMarkerText);if(c==false){return}if(samePosMarkers.length>0){a=gMapMarkers[samePosMarkers[currentPageMarkerNum-1]]}if(mObject.clustering){markerCluster.removeMarker(a,false)}b.close();a.setVisible(false);a.setMap(null);removedMarkers.push(a.idx);dataLines[a.idx].length=0;gMapMarkers[a.idx]=null})}function fUNQ206(){openMarker=gMapMarkers[samePosMarkers[currentPageMarkerNum-1]];var b=gMapMarkers[samePosMarkers[currentPageMarkerNum-1]];if(currentPageMarkerNum!=lastPageMarkerNum){gMapMarkers[samePosMarkers[lastPageMarkerNum-1]].setZIndex(3);gMapMarkers[samePosMarkers[currentPageMarkerNum-1]].setZIndex(4);lastPageMarkerNum=currentPageMarkerNum}var a=fUNQ217(dataLines[b.idx]);a='<div id="markerDiv" class="infoW">'+a;if(editMap){a=a+'<a id="removeMarker">'+removePinText+"</a> "}a+="</div>";ignorePagingEvent=true;openWindow.setContent(a);fUNQ212(openMarker,openWindow)}function fUNQ207(){var a=$("#markerPaging");if(a.length>0){a.remove()}}function fUNQ208(){var c=$("#markerDiv");var a=$("#markerPaging");var d=fUNQ211();var b='<div id="markerPaging" class="pagination marker-pagination-centered">'+d+"</div>";if(a.length>0){a.html(d)}else{c.prepend(b)}fUNQ209()}function fUNQ209(){$("#markerPaging li").click(function(){var a=$(this).attr("id");if($(this).text()!=currentPageMarkerNum){$("#markerPaging li").unbind("click");fUNQ210(a,$(this).text())}})}function fUNQ210(d,c){if(d=="pgPrevLI"){currentPageMarkerNum=previousPageMarkerNum;nextPageMarkerNum=currentPageMarkerNum+1;if(previousPageMarkerNum-ITEMS_PER_PAGE>1){previousPageMarkerNum-=5}}else{if(d=="pgNextLI"){currentPageMarkerNum=nextPageMarkerNum;previousPageMarkerNum=currentPageMarkerNum-1;if(samePosMarkers.length>=ITEMS_PER_PAGE+nextPageMarkerNum){nextPageMarkerNum+=5}}else{currentPageMarkerNum=c}}fUNQ206();var b=$("#markerDiv");var e=fUNQ211();var a='<div id="markerPaging" class="pagination marker-pagination-centered">'+e+"</div>";b.prepend(a);fUNQ209()}function fUNQ211(){var b="";var e="";if(samePosMarkers.length>ITEMS_PER_PAGE&&currentPageMarkerNum>ITEMS_PER_PAGE){b='<li id="pgPrevLI">&lt;</li>'}if(samePosMarkers.length>ITEMS_PER_PAGE&&nextPageMarkerNum>currentPageMarkerNum){e='<li id="pgNextLI">&gt;</li>'}var d=ITEMS_PER_PAGE*Math.floor((currentPageMarkerNum-1)/ITEMS_PER_PAGE);for(var c=d;c<d+ITEMS_PER_PAGE&&c<samePosMarkers.length;c++){var a=c+1;if(a==currentPageMarkerNum){b=b+'<li id="pgli'+a+'" class="active">'+a+"</li>"}else{b=b+'<li id="pgli'+a+'">'+a+"</li>"}}b=b+e;return"<ul>"+b+"</ul>"}function fUNQ212(a,b){$("#toDir").click(function(){if(!mobileDevice&&showMoreOptions){fUNQ193(openMarker);return}var c=fUNQ213();ignorePagingEvent=true;fUNQ207();b.setContent(c);fUNQ214(openMarker,b)})}function fUNQ213(){var a=openMarker;var e=hereText;var b=fUNQ223(dataLines[a.idx]," ",true);if(b.length>0){e=b}else{if(fUNQ241(mObject.title)&&dataLines[a.idx][mObject.title]!=""){e=dataLines[a.idx][mObject.title]}}var g="";var d="";var f=a.idx;if(navMarker!=null&&navMarker.getMap()!=null){g=e;e=currentLocationText;d=f;f=""}var c='<div id="directions"><table><tr><td><label>'+startText+'</label></td>   <td><input type="text" SIZE=30 MAXLENGTH=200 name="startAddr" id="startAddr" value="'+e+'" readonly />   <INPUT type="hidden" id="markerStart" value="'+f+'" /></td> <td rowspan="2"><img src="/img/reverse_img.png" Title="'+revDirText+'" onclick="fUNQ218();"></td> </tr> <tr><td align="right"><label>'+endText+' </label></td><td><input type="text" SIZE=30 MAXLENGTH=200 name="endAddr" id="endAddr" value="'+g+'" />   <INPUT type="hidden" id="markerEnd" value="'+d+'" /></td></tr> <tr>     <td colspan="2" align="right"> <INPUT id="directionSubmit" value="'+getDirText+'" TYPE="SUBMIT" /></td><td></td> </tr></table><div id="dirError"></div></div>';return c}function fUNQ214(a,b){$("#directionSubmit").click(function(){if(directionsService==null){directionsService=new google.maps.DirectionsService()}if(directionsDisplay==null){directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:true});directionsDisplay.setMap(gMap)}var g="";var c="";var d=$("#markerStart");var e=$("#markerEnd");if(d.length>0&&d.val()&&parseInt(d.val(),10)==a.idx){g=a.getPosition();c=$("#endAddr").val();if(c=="Current Location"&&navMarker!=null){c=navMarker.getPosition()}}else{if(e.length>0&&e.val()&&parseInt(e.val(),10)==a.idx){g=$("#startAddr").val();c=a.getPosition();if(g=="Current Location"&&navMarker!=null){g=navMarker.getPosition()}}}if(g&&c){var f={origin:g,destination:c,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(f,function(h,j){if(j==google.maps.DirectionsStatus.OK){b.close();openWindow=null;directionsDisplay.setDirections(h)}else{ignorePagingEvent=true;$("#directions").html(directionErroText+" : "+j)}})}})}function fUNQ215(a){var j="";if(showMoreOptions){j=' <span class="noDistDisplay">&nbsp; (##dist##)</span>'}var f="";if(fUNQ241(mObject.title)&&a[mObject.title]!=""){f="<div><b>"+a[mObject.title]+j+"</b></div>"}if(f.length>0){j=""}var h=fUNQ223(a,j+"<br>",true);if(showMoreOptions&&h.indexOf("<br>")<0){h+=j}if(h!=""){if(f.length==0){h="<b>"+h+"</b>"}h="<div>"+h+"</div>"}var e="";for(var b=0;b<mObject.headerDisplayOrderIdxs.length;b++){if(!isSelectedColumn(mObject.headerDisplayOrderIdxs[b])){var c=a[mObject.headerDisplayOrderIdxs[b]];var g=mObject.columnHeaderArray[mObject.headerDisplayOrderIdxs[b]];if(c!=null&&c.trim()!=""){if(c.indexOf("\n")>0&&c.charAt(0)=='"'&&c.endsWith('"')){c=c.replace(/\n/g,"<br>");c=c.substr(1,c.length-2)}if(fUNQ264("messageUrl")=="self"){c=c.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" >$1</a>')}else{c=c.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>')}if(mObject.showLabels){e=e+'<div class="markerLabelDiv"><span class="markerLabel">'+g+": </span>"+c+"</div>"}else{e=e+'<div class="markerLabelDiv">'+c+"</div>"}}}}var d=f+h+e;d+=fUNQ43(a,f,false,false);return d}function fUNQ216(b){var a=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;if(a.test(b)){return true}return false}function fUNQ217(d){var h="";if(fUNQ241(mObject.title)&&d[mObject.title]!=""){if(fUNQ241(mObject.web)&&d[mObject.web]!=""){h='<div><a href="'+urlizeUrl(d[mObject.web])+'" target="_blank">'+d[mObject.title]+"</a></div>";if(fUNQ264("messageUrl")=="self"){h='<div><a href="'+urlizeUrl(d[mObject.web])+'" >'+d[mObject.title]+"</a></div>"}}else{h="<div>"+d[mObject.title]+"<div>"}}var b=fUNQ223(d,"<br>",true);if(b!=""){if(showDirections){b='<div><a id="toDir" >'+b+"</a></div>"}else{b="<div>"+b+"</div>"}}else{if(showDirections){b='<div><a id="toDir" >'+directionText+"</a></div>"}}var g="";for(var e=0;e<mObject.headerDisplayOrderIdxs.length;e++){if(!isSelectedColumn(mObject.headerDisplayOrderIdxs[e])){var a=d[mObject.headerDisplayOrderIdxs[e]];var c=mObject.columnHeaderArray[mObject.headerDisplayOrderIdxs[e]];if(a!=null&&a.trim()!=""){if(a.indexOf("\n")>0&&a.charAt(0)=='"'&&a.endsWith('"')){a=a.replace(/\n/g,"<br>");a=a.substr(1,a.length-2)}if(fUNQ264("messageUrl")=="self"){a=a.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" >$1</a>')}else{a=a.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>')}if(mobileDevice){if(fUNQ216(a.trim())){a='<a href="tel:'+a.trim()+'">'+a+"</a>"}}if(mObject.showLabels){g=g+'<div ><span class="markerLabel">'+c+": </span>"+a+"</div>"}else{g=g+"<div >"+a+"</div>"}}}}var f=h+b+g;f+=fUNQ43(d,h,true,false);return f}function fUNQ218(){var g=$("#directions");if(g.length>0){var f=g.find("#markerEnd");var b=g.find("#markerStart");var e=g.find("#startAddr");var c=g.find("#endAddr");var d="";var a="";if(f.length>0){d=f.val()}if(c.length>0){a=c.val()}if(e.prop("readonly")){e.prop("readonly",false);c.prop("readonly",true)}else{if(c.prop("readonly")){e.prop("readonly",true);c.prop("readonly",false)}}f.val(b.val());c.val(e.val());b.val(d);e.val(a)}}function fUNQ219(){var b=mObject.lat,d=mObject.lng;for(var c=0;c<dataLines.length;c++){for(var a=c+1;a<dataLines.length;a++){if(dataLines[c].length>b&&dataLines[a].length>b&&dataLines[c].length>d&&dataLines[a].length>d){}if(dataLines[c][b]===dataLines[a][b]&&dataLines[c][d]===dataLines[a][d]){return true}}}return false}function fUNQ220(b,a,d){if(mObject.moveSingleMarker==null||mObject.moveSingleMarker==false){for(var c=0;c<gMapMarkers.length;c++){if(c!=b.idx&&gMapMarkers[c]!=null&&dataLines[b.idx][a]===dataLines[c][a]&&dataLines[b.idx][d]===dataLines[c][d]){dataLines[c][a]=b.getPosition().lat().toFixed(6);dataLines[c][d]=b.getPosition().lng().toFixed(6);gMapMarkers[c].setPosition(new google.maps.LatLng(b.getPosition().lat().toFixed(6),b.getPosition().lng().toFixed(6)))}}}dataLines[b.idx][a]=b.getPosition().lat().toFixed(6);dataLines[b.idx][d]=b.getPosition().lng().toFixed(6);fUNQ221()}function fUNQ221(){if(fUNQ87(redrawTextArea)){redrawTextArea()}}function fUNQ222(a){var c=false;var h=fUNQ239(a,mObject.address,""),g=fUNQ239(a,mObject.city,""),e=fUNQ239(a,mObject.state,""),d=fUNQ239(a,mObject.zip,""),f=fUNQ239(a,mObject.country,"");var b;if(mObject.regionCode!=null&&mObject.regionCode.trim().length>1&&EuroCountryFormat.indexOf(mObject.regionCode.trim())>-1){b=((d.length>0)?d:"");b+=(g.length>0)?" "+g:"";b+=((b.length>0&&e.length>0)?", "+e:e);b+=((b.length>0&&f.length>0)?" "+f:f)}else{if(mObject.regionCode=="jp"&&d.startsWith("〒")){b=((d.length>0)?d:"");b+=(g.length>0)?g:"";c=true}else{b=(g.length>0)?g:"";b+=((g.length>0&&e.length>0)?", "+e:e);b+=((b.length>0&&d.length>0)?" "+d:d);b+=((b.length>0&&f.length>0)?" "+f:f)}}if(c===true){if(h.length>0&&b.length>0){return b+" "+h}}if(h.length>0&&b.length>0){return h+" "+b}return(h.length>0?h:b)}function fUNQ223(k,j,f){var g=fUNQ240(k,mObject.address,"",f),e=fUNQ240(k,mObject.city,"",f),b=fUNQ240(k,mObject.state,"",f),c=fUNQ240(k,mObject.zip,"",f),d=fUNQ240(k,mObject.country,"",f);var a=false;if(j==undefined){j=""}var h;if(mObject.regionCode!=null&&mObject.regionCode.trim().length>1&&EuroCountryFormat.indexOf(mObject.regionCode.trim())>-1){h=((c.length>0)?c:"");h+=(e.length>0)?" "+e:"";h+=((h.length>0&&b.length>0)?", "+b:b);h+=((h.trim().length>0&&d.length>0)?j+d:d)}else{if(mObject.regionCode=="jp"&&c.startsWith("〒")){h=((c.length>0)?c:"");h+=(e.length>0)?j+e:"";a=true}else{h=(e.length>0)?e:"";h+=((e.length>0&&b.length>0)?", "+b:b);h+=((h.length>0&&c.length>0)?" "+c:c);h+=((h.trim().length>0&&d.length>0)?j+d:d)}}if(a===true){if(j!=undefined&&g.length>0&&h.length>0){return h+g}}if(j!=undefined&&g.length>0&&h.length>0){return g+j+h}if(g.length>0&&h.length>0){return g+" "+h}return(g.length>0?g:h)}function fUNQ224(){var b=$("#groupChecksDiv");if(mObject.sortedGroupKeys.length<2){if(b.length>0){b.hide()}return}var a=mObject.columnHeaderArray[mObject.group]+": ";var j="";var g=0;var f="";for(var c=0;c<mObject.sortedGroupKeys.length;c++){var h=mObject.sortedGroupKeys[c];if(mObject.groupImageHash.hasOwnProperty(h)){if(mObject.useCustomImages!=null&&mObject.useCustomImages){if(mObject.customImageSizes.hasOwnProperty(h)){f=mObject.customImageSizes[h]}else{f=IMAGE_PATH+SMALL_IMAGE+IMG_LIST[0]+IMG_FILE_ENDING}}else{var e=parseInt(mObject.groupImageHash[h],10);f=IMAGE_PATH+SMALL_IMAGE+IMG_LIST[e]+IMG_FILE_ENDING}var d=' <li class="groupItem"><img src="'+f+'"><input type="checkbox" id="groupToggle'+g.toString()+'"  onclick="fUNQ233('+g.toString()+');" CHECKED/><span class="middleGroupText">'+h+"</span></li>";j=j+d;g++}}j='<ul class="groupList"><li class="groupItem">'+a+"</li> "+j+"</ul>";if(b.length>0){b.html(j);b.show()}}function fUNQ225(c){if(c==undefined){c=true}var h=[];var k=[];var g,e;for(g=0;g<mObject.sortedGroupKeys.length;g++){var n=mObject.sortedGroupKeys[g];if(groupsOff.indexOf(g)<0){var d=fUNQ62(n);k.push.apply(k,d)}}var l=[];if(mObject.multiSelectFilters!=null&&mObject.multiSelectFilters){for(g=0;g<multiSelectFilterValues.length;g++){if(multiSelectFilterValues[g]){var m=[];for(e=0;e<multiSelectFilterValues[g].length;e++){m.push.apply(m,fUNQ58(mObject.filterListNames[g],multiSelectFilterValues[g][e]))}if(m.length>0){l[l.length]=m}}}}else{for(g=0;g<selectedFilterValues.length;g++){if(selectedFilterValues[g]&&selectedFilterValues[g]!=ALL_FILTER){var m=fUNQ58(mObject.filterListNames[g],selectedFilterValues[g]);if(m.length>0){l[l.length]=m}}}}if(l.length==0&&mObject.sortedGroupKeys.length==0){for(g=0;g<gMapMarkers.length;g++){if(gMapMarkers[g]==null){continue}if(fUNQ226(gMapMarkers[g])){h.push(gMapMarkers[g].idx);fUNQ231(gMapMarkers[g])}else{fUNQ232(gMapMarkers[g])}}selectedMarkerSet=true;selectedMarkers=h;if(mObject.multiSelectFilters==null||!mObject.multiSelectFilters){if(mObject.disAbleDynamicFilters==null||mObject.disAbleDynamicFilters==false){fUNQ227()}}else{if(mObject.multiSelectFilters!=null&&mObject.multiSelectFilters){fUNQ228()}}if(c){fUNQ201(h)}else{fUNQ199(h)}fUNQ253();return}if(mObject.sortedGroupKeys.length>0){l[l.length]=k}var b=l[0];for(g=0;g<l.length;g++){if(l[g].length<b){b=l[g]}}var f={};for(g=0;g<b.length;g++){f[b[g].toString()]=0}for(g=0;g<l.length;g++){for(var e=0;e<l[g].length;e++){if(f.hasOwnProperty(l[g][e].toString())){f[l[g][e].toString()]=parseInt(f[l[g][e].toString()],10)+1}}}for(var a in f){if(f[a]!=l.length){delete f[a]}}for(g=0;g<gMapMarkers.length;g++){if(gMapMarkers[g]==null){continue}if(f.hasOwnProperty(gMapMarkers[g].idx.toString())&&fUNQ226(gMapMarkers[g])){fUNQ231(gMapMarkers[g]);h.push(gMapMarkers[g].idx)}else{fUNQ232(gMapMarkers[g])}}selectedMarkerSet=true;selectedMarkers=h;if(mObject.multiSelectFilters==null||!mObject.multiSelectFilters){if(mObject.disAbleDynamicFilters==null||mObject.disAbleDynamicFilters==false){fUNQ227()}}else{if(mObject.multiSelectFilters!=null&&mObject.multiSelectFilters){fUNQ228()}}fUNQ253();if(c){fUNQ201(h)}else{fUNQ199(h)}}function fUNQ226(a){if(!circleFilter){return true}if(circle.getBounds().contains(a.getPosition())&&a.distanceM<=circleRadius){return true}return false}function fUNQ227(){var a=[];var d;for(d=0;d<mObject.sortedGroupKeys.length;d++){var h=mObject.sortedGroupKeys[d];if(groupsOff.indexOf(d)<0){var f=fUNQ62(h);a.push.apply(a,f)}}for(d=0;d<mObject.filterListNames.length;d++){var g=[];if(mObject.sortedGroupKeys.length>0){g.push.apply(g,a)}for(var c=0;c<selectedFilterValues.length;c++){var e=[];if(c==d||(selectedFilterValues[c]&&selectedFilterValues[c]==ALL_FILTER)){e=[];for(var b=0;b<dataLines.length;b++){e[b]=b}}else{e=fUNQ58(mObject.filterListNames[c],selectedFilterValues[c])}if(e.length>0){if(g.length==0){g.push.apply(g,e)}else{g=fUNQ90(g,e);if(g.length==0){g[0]=-1}}}}fUNQ230(d,g,selectedFilterValues[d])}}function fUNQ228(){var f=[];var e,d;for(e=0;e<mObject.sortedGroupKeys.length;e++){var m=mObject.sortedGroupKeys[e];if(groupsOff.indexOf(e)<0){var b=fUNQ62(m);f.push.apply(f,b)}}for(e=0;e<mObject.filterListNames.length;e++){var h=[];if(mObject.sortedGroupKeys.length>0){h.push.apply(h,f)}for(var c=0;c<multiSelectFilterValues.length;c++){var l=[];if(e==c){for(var a=0;a<dataLines.length;a++){l[a]=a}}else{if(multiSelectFilterValues[c]){for(d=0;d<multiSelectFilterValues[c].length;d++){l.push.apply(l,fUNQ58(mObject.filterListNames[c],multiSelectFilterValues[c][d]))}}else{for(var a=0;a<dataLines.length;a++){l[a]=a}}}if(h.length==0){h.push.apply(h,l)}else{h=fUNQ90(h,l);if(h.length==0){h[0]=-1}}}if(e==activeMultiSelectFilter){continue}var g=[];if(multiSelectFilterValues.length>e&&multiSelectFilterValues[e]){g=multiSelectFilterValues[e]}fUNQ229(e,h,g)}}function fUNQ229(b,e,c){var h=[];var g=[];var f=mObject.filterListSortedKeyHash[mObject.filterListNames[b]];for(var d=0;d<f.length;d++){var a=fUNQ58(mObject.filterListNames[b],f[d]);g.push(f[d]);if(showFilterCounts){h.push(fUNQ91(a,e))}}fUNQ63(g,c,b.toString()+"_rfilter",h)}function fUNQ230(b,e,d){var h=[];var g=[];g.push(ALL_FILTER);if(showFilterCounts){h.push(e.length)}var f=mObject.filterListSortedKeyHash[mObject.filterListNames[b]];for(var c=0;c<f.length;c++){var a=fUNQ58(mObject.filterListNames[b],f[c]);if(e.length==0||d==f[c]||fUNQ88(a,e)){g.push(f[c]);if(showFilterCounts){h.push(fUNQ91(a,e))}}}fUNQ64(g,d,b.toString()+"_rfilter",h)}function fUNQ231(a){if(!mObject.clustering&&a.getMap()==null){a.setMap(gMap)}a.show=true}function fUNQ232(a){if(!mObject.clustering&&a.getMap()!=null){a.setMap(null)}a.show=false}function fUNQ233(a){var d=parseInt(a,10);var b=false;var c=groupsOff.indexOf(a);if(c>-1){if(b){groupsOff.length=0;fUNQ225()}else{groupsOff.splice(c,1);fUNQ225()}}else{if(b){groupsOff=mObject.sortedGroupKeys;groupsOff.splice(c,1);fUNQ225()}else{groupsOff[groupsOff.length]=d;fUNQ225()}}}function fUNQ234(b){for(var a=0;a<gMapMarkers.length;a++){if(gMapMarkers[a]!=null){if(b){fUNQ231(gMapMarkers[a])}else{fUNQ232(gMapMarkers)}}}}function fUNQ235(){fUNQ236();fUNQ237()}function fUNQ236(){var a=$("#groupChecksDiv");if(a.length==0){return}a.find(":checkbox").each(function(){$(this).prop("checked",true)});groupsOff.length=0}function fUNQ237(){var a=$("#filtersDiv");if(a.length==0){return}a.find("select option").each(function(){$(this).filter(function(){return $(this).text()==ALL_FILTER}).prop("selected",true)});for(var b=0;b<selectedFilterValues.length;b++){selectedFilterValues[b]=ALL_FILTER}}function fUNQ238(){return(fUNQ241(mObject.address)||fUNQ241(mObject.city)||fUNQ241(mObject.state)||fUNQ241(mObject.zip)||fUNQ241(mObject.country))}function fUNQ239(a,b,c){return((b!=null&&(b<a.length&&b>-1)&&a[b].trim()!="")?a[b].trim():c)}function fUNQ240(a,b,d,c){if(c==false||fUNQ241(b)==false){return d}return((b!=null&&(b<a.length&&b>-1)&&a[b].trim()!="")?a[b].trim():d)}function fUNQ241(b){var a=parseInt(b,10);return(b!=null&&mObject.headerDisplayOrderIdxs.indexOf(a)>-1)}function fUNQ242(){var a=$("#mapWindowData");if(a.length==0||inIframe){return}a.html("");fUNQ245(undefined,0)}function fUNQ243(){var c=[];var b,a;if(selectedMarkers.length>0||selectedMarkerSet){for(b=0;b<selectedMarkers.length;b++){a=gMapMarkers[selectedMarkers[b]].idx;if(gMapMarkers[a].show){c[c.length]=a}}}else{for(b=0;b<gMapMarkers.length;b++){if(gMapMarkers[b].show){c[c.length]=gMapMarkers[b].idx}}}if(showNumberedMarkers){for(b=0;b<c.length;b++){a=c[b];if(c.length<100){fUNQ203(gMapMarkers[a],true,b+1)}else{fUNQ203(gMapMarkers[a],false,b+1)}}}}function fUNQ244(a){var g=$("#mapWindowData");if(g.length==0||inIframe){if(showNumberedMarkers){fUNQ243()}return}var f="";var e=0;var d,b;var h=[];if(a!=undefined){e=(a-1)*DISPLAYABLE_ITEMS_PER_PAGE}var c="";if(selectedMarkers.length>0||selectedMarkerSet){for(d=0;d<selectedMarkers.length&&selectedMarkers[d]<markerDescriptions.length;d++){b=markerDescriptions[selectedMarkers[d]].markerIdx;if(gMapMarkers[b].show){h[h.length]=b}}}else{for(d=0;d<markerDescriptions.length;d++){b=markerDescriptions[d].markerIdx;if(gMapMarkers[b].show){h[h.length]=b}}}if(showMoreOptions&&showDistance){h.sort(function(k,j){return gMapMarkers[markerDescriptions[k].markerIdx].distanceM-gMapMarkers[markerDescriptions[j].markerIdx].distanceM})}for(d=e;d<h.length&&d<e+DISPLAYABLE_ITEMS_PER_PAGE;d++){b=markerDescriptions[h[d]].markerIdx;f+='<div class="printPageDetail"><div class="windowRowRight" onclick="fUNQ246('+b.toString()+')">'+(d+1).toString()+"</div>";c=markerDescriptions[h[d]].message;if(showMoreOptions&&showDistance){c=c.replace("noDistDisplay","distDisplay").replace("##dist##",gMapMarkers[b].displayDistance)}if(c.indexOf("markerLabel")<0){c+='<div class="markerLabelDiv"><span class="markerLabel"></span><br></div>'}f+='<div id="m'+b.toString()+'" class="windowRowLeft" onclick="fUNQ246('+b.toString()+')">'+c+"</div></div>"}if(showNumberedMarkers){for(d=0;d<h.length;d++){b=markerDescriptions[h[d]].markerIdx;if(h.length<100){fUNQ203(gMapMarkers[b],true,d+1)}else{fUNQ203(gMapMarkers[b],false,d+1)}}}fUNQ245(a,h.length);g.html(f)}function fUNQ245(a,b){if(a!=undefined){if(b<DISPLAYABLE_ITEMS_PER_PAGE){$("#compact-pagination").pagination("destroy")}}else{if(b>DISPLAYABLE_ITEMS_PER_PAGE){$("#compact-pagination").pagination({items:b,itemsOnPage:DISPLAYABLE_ITEMS_PER_PAGE,cssStyle:"compact-theme",displayedPages:7,onPageClick:changePage})}else{if(gMapMarkers.length>DISPLAYABLE_ITEMS_PER_PAGE){$("#compact-pagination").pagination("destroy")}}}}function changePage(a){fUNQ244(a)}function fUNQ246(a){window.scrollTo(0,0);if(gMapMarkers[a]==null){return}if(gMapMarkers[a].getMap()==null){gMapMarkers[a].setMap(gMap)}if(gMap.getZoom()<CLUSTER_ZOOM_LEVEL&&mObject.clustering){gMap.setZoom(CLUSTER_ZOOM_LEVEL+1)}google.maps.event.trigger(gMapMarkers[a],"click")}function fUNQ247(d,b,c,a){if(d==c&&b==a){return true}if(Math.abs(d-c)<=0.0001&&Math.abs(b-a)<=0.0001){return(Math.sqrt((Math.pow(d-c,2)+Math.pow(b-a,2)))<0.00011)}return false}function fUNQ248(d,b,c,a){if(d==c&&b==a){return 0}return Math.sqrt((Math.pow(d-c,2)+Math.pow(b-a,2)))}function fUNQ249(e,h,d,g){var f=6371;var m=3959;var j=fUNQ250(d-e);var b=fUNQ250(g-h);var l=Math.sin(j/2)*Math.sin(j/2)+Math.cos(fUNQ250(e))*Math.cos(fUNQ250(d))*Math.sin(b/2)*Math.sin(b/2);var k=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return f*k}function fUNQ250(a){return a*(Math.PI/180)}function fUNQ251(b,a){if($.isNumeric(b)&&$.isNumeric(a)){return(Math.abs(b)<=90&&Math.abs(a)<=180)}return false}function fUNQ252(){searchTermHash={};secondarySearchTermHash={};for(var c=0;c<dataLines.length&&c<gMapMarkers.length;c++){if(dataLines[c]==null||dataLines[c].length==0){continue}if(gMapMarkers[c]!=undefined&&!gMapMarkers[c].show){continue}for(var a=0;a<mObject.headerDisplayOrderIdxs.length&&mObject.headerDisplayOrderIdxs[a]<dataLines[c].length;a++){if(!isIgnoreSearchColumn(a)&&dataLines[c][mObject.headerDisplayOrderIdxs[a]].length>0){var b=dataLines[c][mObject.headerDisplayOrderIdxs[a]]+" ("+mObject.columnHeaderArray[mObject.headerDisplayOrderIdxs[a]]+")";if(searchTermHash.hasOwnProperty(b)){searchTermHash[b].push(c)}else{var e=[];e.push(c);searchTermHash[b]=e}var d=dataLines[c][mObject.headerDisplayOrderIdxs[a]].toLowerCase();if(secondarySearchTermHash.hasOwnProperty(d)){secondarySearchTermHash[d].push(c)}else{var e=[];e.push(c);secondarySearchTermHash[d]=e}}}}}function fUNQ253(){var a=$("#searchBox");if(a.length==0){return}fUNQ252();var b=fUNQ259(searchTermHash);a.autocomplete({source:b,minLength:1,select:function(c,d){fUNQ254(d.item.value)}});if(mobileDevice||tabletDevice){a.blur(function(){runSearch()})}}function runSearch(){fUNQ254($("#searchBox").val())}function handleSearchSubmit(a){if(a.keyCode==13){fUNQ254($("#searchBox").val());return false}}Object.size=function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b};function fUNQ254(a){if(a.trim().length==0){if(zoomInSearching){fUNQ225(true)}else{fUNQ225(false)}return}if(searchTermHash.hasOwnProperty(a)){var b=searchTermHash[a];if(zoomInSearching){fUNQ200(b)}else{fUNQ255(b)}}else{if(secondarySearchTermHash.hasOwnProperty(a.toLowerCase())){var c=secondarySearchTermHash[a.toLowerCase()];if(zoomInSearching){fUNQ200(c)}else{fUNQ255(c)}}else{fUNQ256(a,mObject.regionCode,geoResultCallbackSearchBox)}}}function fUNQ255(a){var c=[],b;for(b=0;b<a.length;b++){c[a[b]]=1}for(b=0;b<gMapMarkers.length;b++){if(gMapMarkers[b]==null){continue}if(c.hasOwnProperty(gMapMarkers[b].idx)){fUNQ231(gMapMarkers[b])}else{fUNQ232(gMapMarkers[b])}}if(a.length==1){fUNQ201(a);fUNQ246(a[0])}else{fUNQ201(a)}}function fUNQ256(a,b,c){if(a.length==0){return}if(mapGeocoder==null){mapGeocoder=new google.maps.Geocoder()}if(b!=undefined&&b.length>0){mapGeocoder.geocode({address:a,region:b},function(e,d){c(e,d)})}else{mapGeocoder.geocode({address:a},function(e,d){c(e,d)})}}function geoResultCallbackSearchBox(b,a){if(a==google.maps.GeocoderStatus.OK){fUNQ258(b[0].geometry.location.lat().toFixed(6),b[0].geometry.location.lng().toFixed(6))}}function fUNQ257(f,b){var e=10000;var d=-1;if(selectedMarkerSet){for(c=0;c<selectedMarkers.length;c++){if(gMapMarkers[selectedMarkers[c]].show){var a=fUNQ248(f,b,gMapMarkers[c].getPosition().lat().toFixed(6),gMapMarkers[selectedMarkers[c]].getPosition().lng().toFixed(6));if(a<e){e=a;d=selectedMarkers[c]}}}}else{for(var c=0;c<gMapMarkers.length;c++){if(gMapMarkers[c]!=null&&gMapMarkers[c].show){var a=fUNQ248(f,b,gMapMarkers[c].getPosition().lat().toFixed(6),gMapMarkers[c].getPosition().lng().toFixed(6));if(a<e){e=a;d=c}}}}return d}function fUNQ258(c,a){var b=fUNQ257(c,a);if(b>=0){gMapMarkers[b].setMap(gMap);var d=gMap.getZoom();if(d<12){d=14}else{if(d<16){d=15}}gMap.panTo(gMapMarkers[b].getPosition());gMap.setZoom(d)}}function fUNQ259(a){var c=[];for(var b in a){c.push(b)}c.sort();return c}function fUNQ260(){var e;var h='<?xml version="1.0" ?>';h+='<kml xmlns="http://www.opengis.net/kml/2.2">';h+="<Document>\n";if(userSettings.title!=null&&userSettings.title.length>0){h+="<name><![CDATA["+userSettings.title+"]]></name>\n"}else{h+="<name><![CDATA[ Auto-generated KML by EasyMapMaker ]]></name>\n"}if(userSettings.description!=null&&userSettings.description.length>0){h+="<description><![CDATA["+userSettings.description+"]]></description>\n"}else{h+="<description><![CDATA[ Auto-generated KML by EasyMapMaker ]]></description>\n"}var c="<BalloonStyle><text><![CDATA[";if(fUNQ241(mObject.title)){c+="<b>$[name]</b><br /> "}if(fUNQ238()){c+="$[address]<br /> "}c+="$[description]<br/>$[geDirections] ";c+="]]></text></BalloonStyle>";var f=false;var m=IMG_LIST[0];var b=[];if(mObject.useCustomImages!=null&&mObject.useCustomImages){if(mObject.singleCustomImage!=null){m=fUNQ262(mObject.singleCustomImage);b[b.length]=m;h+=fUNQ261(c,m,CUSTOM_IMAGE_URL+mObject.singleCustomImage)}else{for(e=0;e<mObject.sortedGroupKeys.length;e++){var l=mObject.sortedGroupKeys[e];if(mObject.groupImageHash.hasOwnProperty(l)){h+=fUNQ261(c,fUNQ262(mObject.groupImageHash[l]),CUSTOM_IMAGE_URL+mObject.groupImageHash[l])}if(mObject.sortedGroupKeys.length>1){f=true}}}}else{if(mObject.markerImageIdx.length>0){for(e=0;e<IMG_LIST.length;e++){h+=fUNQ261(c,IMG_LIST[e],BASE_IMAGE_URL+IMAGE_PATH+IMG_LIST[e]+markerImgEnding)}f=true}else{h+=fUNQ261(c,IMG_LIST[0],BASE_IMAGE_URL+IMAGE_PATH+IMG_LIST[0]+IMG_FILE_ENDING)}}for(e=0;e<dataLines.length&&e<gMapMarkers.length;e++){if(gMapMarkers[e]==null){continue}var j="";if(fUNQ241(mObject.title)&&dataLines[e][mObject.title]!=""){j=dataLines[e][mObject.title]}var k=fUNQ223(dataLines[e]," ",true);var g=fUNQ263(dataLines[e]);h+="<Placemark>";if(j.length>0){h+="<name><![CDATA["+j+"]]></name>\n"}if(k.length>0){h+="<address><![CDATA["+k+"]]></address>\n"}if(g.length>0){h+="<description><![CDATA["+g+"]]></description>\n"}var a=m;if(f){a=gMapMarkers[e].color}if(mObject.useCustomImages!=null&&mObject.useCustomImages){a=m;if(f){a=fUNQ262(gMapMarkers[e].getIcon().url)}}h+="<styleUrl>#"+a+"</styleUrl>\n";var d=gMapMarkers[e].getPosition().lng().toFixed(6).toString()+","+gMapMarkers[e].getPosition().lat().toFixed(6).toString();h+="<Point> <coordinates>"+d+",0</coordinates>\n</Point> \n";h+="</Placemark>\n"}h+="</Document>\n";h+="</kml>";return h}function fUNQ261(a,b,c){return'<Style id="'+b+'"><IconStyle><scale>1</scale> <Icon> <href>'+c+'</href></Icon> <hotSpot x="0.5"  y="0.5"  xunits="fraction" yunits="fraction"/> </IconStyle>'+a+"</Style>\n"}function fUNQ262(c){if(c==null||c.length<1){return"Unknown name"}var a=c.split("/");var b=(a[a.length-1].split("."))[0];return b}function fUNQ263(a){var g="";for(var c=0;c<mObject.headerDisplayOrderIdxs.length;c++){if(!isSelectedColumn(mObject.headerDisplayOrderIdxs[c])){var d=a[mObject.headerDisplayOrderIdxs[c]];var h=mObject.columnHeaderArray[mObject.headerDisplayOrderIdxs[c]];if(d!=null&&d.trim()!=""){if(d.indexOf("\n")>0&&d.charAt(0)=='"'&&d.endsWith('"')){d=d.replace(/\n/g,"<br>");d=d.substr(1,d.length-2)}d=d.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>');if(mObject.showLabels){g=g+"<div>"+h+": "+d+"</div>"}else{g=g+"<div>"+d+"</div>"}}}}var j="";if(fUNQ241(mObject.image)&&a[mObject.image]!=""){j='<img src="'+a[mObject.image]+'"/>'}var e="";if(fUNQ241(mObject.email)&&a[mObject.email]!=""){if(fUNQ44(a[mObject.email])){e='<div>e-mail: <a href="mailto:'+a[mObject.email]+'"  class="markerLabelDiv">'+a[mObject.email]+"</a></div>"}else{e="<div>e-mail:"+a[mObject.email]+"</div>"}}var b="";if(fUNQ241(mObject.web)&&a[mObject.web]!=""){b='<a href="'+urlizeUrl(a[mObject.web])+'" target="_blank">'+a[mObject.web]+"</a>"}var f=g;f=f+j;f=f+e;f=f+b;return f}function myCalculator(f,d){var a=0;var e="";var c=f.length.toString();var b=c;while(b!==0){b=parseInt(b/3,10);a++}a=Math.min(a,d);return{text:c,index:a,title:e}}function fUNQ264(g){var b=(location.search.length>0?location.search.substring(1):""),c=b.length?b.split("&"):[],f=null,d=null,e=0;var a=c.length;for(e=0;e<a;e++){f=c[e].split("=");d=decodeURIComponent(f[0]);if(d==g&&f.length==2){return decodeURIComponent(f[1])}}return""}function fUNQ265(){var b=0,a=0;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;a=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;a=document.body.clientHeight}}}return a}function fUNQ266(){if(mObject.customZoomAndCenter!=null&&mObject.customZoomAndCenter){mObject.center_lat=gMap.getCenter().lat();mObject.center_lng=gMap.getCenter().lng();mObject.zoom=gMap.getZoom()}}function fUNQ268(){var a=fUNQ270();fUNQ269(a)}function fUNQ269(b){var a="";if(b!=null&&b.length>0){a=JSON.stringify(b)}$.ajax({type:"POST",url:"/util/getImage.php",data:({imgData:a}),cache:false,dataType:"json"})}function fUNQ270(){var t=$("#map");var q=t.height();var x=t.width();var C=0;var o=0;var b=640;if(q>x){C=b;o=((x*b)/q).toFixed(0)}else{o=b;C=((q*b)/x).toFixed(0)}var E=2;var D=[];var A=[];var e=2048;var c="http://maps.googleapis.com/maps/api/staticmap?key=AIzaSyArK9pT5ZBrngT8I_rzobA64CW5l_mJLTo";var p={};var r=gMap.getCenter().lat().toFixed(6);var l=gMap.getCenter().lng().toFixed(6);var u=0;var h=gMap.getBounds();var d,f,F;if(mObject.clustering&&markerCluster!=null){var g=markerCluster.getClusters();for(u=0;u<g.length;u++){var v=g[u];if(v.clusterIcon_!=null&&v.clusterIcon_.url_!=null){if(h.contains(v.getCenter())){d=v.clusterIcon_.url_;f=v.getCenter().lat().toFixed(6);F=v.getCenter().lng().toFixed(6);if(d.startsWith("//")){d="http:"+d}if(!d.startsWith("http")){d=CUSTOM_IMAGE_URL+d}if(!p.hasOwnProperty(d)){p[d]=[];A.push(d)}var z={};z.lat=f;z.lng=F;p[d].push(z)}}}}for(u=0;u<gMapMarkers.length;u++){if(gMapMarkers[u]!=null&&gMapMarkers[u].getMap()!=null&&gMapMarkers[u].show&&h.contains(gMapMarkers[u].getPosition())){f=gMapMarkers[u].getPosition().lat().toFixed(6);F=gMapMarkers[u].getPosition().lng().toFixed(6);d=gMapMarkers[u].getIcon().url;if(!d.startsWith("http")){d=CUSTOM_IMAGE_URL+d}if(!p.hasOwnProperty(d)){p[d]=[];A.push(d)}var z={};z.lat=f;z.lng=F;p[d].push(z)}}var w="style=feature:all|visibility:off";var m=true;var n=[];var k="";var y=0;for(u=0;u<A.length;u++){var B=A[u];if(!m&&y<5){k+="&markers=icon:"+B}if(y==5){D.push(k);m=true;y=0}if(p.hasOwnProperty(A[u])){n=p[A[u]];for(var s=0;s<n.length;s++){var a=n[s].lat+","+n[s].lng;if(k.length+30>e){D.push(k);m=true;y=0}if(m){k=c+"&center="+r+","+l+"&size="+o.toString()+"x"+C.toString()+"&scale="+E;if(u!=0||s!=0){k=c+"&"+w+"&center="+r+","+l+"&size="+o.toString()+"x"+C.toString()+"&scale="+E}}if(m){m=false;k+="&markers=icon:"+B+"|"}else{a="|"+a}k+=a}}y++}if(A.length>0){D.push(k)}else{k=c+"&center="+r+","+l+"&size="+o.toString()+"x"+C.toString()+"&scale="+E;D.push(k)}return D}function fUNQ271(a){return encodeURIComponent(a).replace(/'/g,"%27").replace(/"/g,"%22")}if(!window.console){console={debug:function(a){}}}var console=console||{debug:function(){}};var advancedMap=false;var MAX_LINE_MESSAGE="Only first 100 rows shown, but all data processed.";var MAX_ERROR_LINE_MESSAGE="Only the first 100 errors are shown.";var ADDRESS_LIMIT=250;var GEO_CODE_SLOWNESS=7000;var imageData=null;var imageCount=0;var columnHeaderHash={};var dataLines=[];var selectFilterMatch={};var prettyMatchNames=["address","city","state","zip","country","lat","long","title","url","image","email","group","pin_label"];var matchNames=["address_sel","city_sel","state_sel","zip_sel","country_sel","lat_sel","long_sel","title_sel","url_sel","image_sel","email_sel","group_sel","pin_label_sel"];var miscIds=["region_sel","clusterCB","showLabelCB","scrollWheelCB","noDisplay","toDisplay","noFilter","toFilter","mapType","moveAllToDisplay","removeAllFromDisplay","removeAllFromFilter","showMoreOptionsCB","dynamicFiltersCB","filterCountsCB","multiSelectFiltersCB","zoom_in_sel","buttonUpload"];var reservedMatches=["emm_lat","emm_lng","emm_acc"];var savedMapId=null;var selected_columns={};var editMap=true;var clickMessage="<h2>"+clickMessageInner+"</h2>";var dataPresentMessage="<h2>"+dataPresentMessageInner+"</h2>";var textAreaDataLength=0;var textAreaChanged=false;var geoCoder;var defaultGeoCodeTimeout=600;var geoCodeHash={};var geoCodeStats={};geoCodeStats.init=false;geoCodeStats.geoCoding=false;geoCodeStats.limitHit=false;geoCodeStats.slowness=false;var tabletDevice=false,mobileDevice=false;var overTableMessageFocus=false;var google;var mainTextArea=null;var overTableMessageDiv=null;var outerOverTableDiv=null;var displayTableDiv=null;var reProcessData=false;var originalData=null;var disableGroupColorChange=false;var ie=(function(){var c,d=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){d=parseFloat(RegExp.$1)}}return((d>-1)?d:c)}());function init(){if(!window.console){console={debug:function(){}}}if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))||((navigator.userAgent.match(/mobile/i))&&(navigator.userAgent.match(/Android/i)))||(navigator.userAgent.match(/blackberry/i))||(navigator.userAgent.match(/windows phone/i))){mobileDevice=true}if(!mobileDevice&&((navigator.userAgent.match(/Android/i))||(navigator.userAgent.match(/iPad/i)))){tabletDevice=true}advancedMap=fUNQ165();if(advancedMap){$("#easyMaps").toggleClass("active");$("#advancedMaps").toggleClass("active")}mainTextArea=$("#sourceData");overTableMessageDiv=$("#overTableMessage");outerOverTableDiv=$("#outerOverTable");displayTableDiv=$("#displayTable");if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){displayTableDiv.html(initial_table_display)}var d=document.getElementById("sourceData");if(d.addEventListener){d.addEventListener("input",function(){e()},false)}else{if(d.attachEvent){d.attachEvent("onpropertychange",function(){e()})}}function e(){textAreaChanged=true;reProcessData=true;textAreaDataLength=mainTextArea.val().length;if(textAreaDataLength==0){overTableMessageDiv.html(clickMessage);if(!displayTableDiv.hasClass("light-gray")){displayTableDiv.toggleClass("light-gray")}}}$("#errorButton").click(function(){fUNQ97()});if((typeof EditingMap!="undefined"&&EditingMap)||(typeof BulkGeoMap!="undefined"&&BulkGeoMap)){fUNQ0()}$("#useSample1").click(function(){fUNQ93(sample_data1)});$("#optionButton").click(function(){var h=$("#mapOptions");if(h.css("display")=="none"||reProcessData){if(fUNQ153()>1){fUNQ96();reProcessData=false;h.show()}}});$("#makeMapButton").click(function(){if((dataLines.length==0||reProcessData)&&mainTextArea.val().length>0){fUNQ153();fUNQ96();reProcessData=false}var h=fUNQ102();if(!h){alert(locationAlert);return}if(!fUNQ101()){alert(noDataAlert);return}if(!geoCodeStats.geoCoding&&!$(this).hasClass("btn-danger")){fUNQ98();mapPrep()}else{if($(this).hasClass("btn-danger")){fUNQ99();geoCodeStats.geoCoding=false}}});$("#mapModal").modal({backdrop:"static",keyboard:false,show:false});$("#mapModalButton").click(function(){$("#mapModalButton").button("loading");$("#mapModal").modal("show")});$("#mapSaveButton").click(function(){if(fUNQ144()){$("#mapModal").modal("hide")}});$("#closeSaveModal").click(function(){$("#mapModalButton").button("reset")});$("#closeSaveButton").click(function(){$("#mapModalButton").button("reset")});function b(){return(mainTextArea.val().trim().length>0)}overTableMessageDiv.blur(function(){if(mobileDevice||tabletDevice){overTableMessageFocus=false}});outerOverTableDiv.blur(function(){if(mobileDevice||tabletDevice){if($("#overTableMessage").css("display")=="none"){}else{if(b()){overTableMessageDiv.hide()}}}});outerOverTableDiv.mouseenter(function(){if($(this).css("display")=="none"){return}if(geoCodeStats.geoCoding){return}if(mobileDevice||tabletDevice){if(overTableMessageDiv.css("display")=="none"){overTableMessageFocus=true}else{overTableMessageFocus=false;outerOverTableDiv.focus();return}}c()});function c(){if(b()){displayTableDiv=$("#displayTable");if(!displayTableDiv.hasClass("light-gray")){displayTableDiv.toggleClass("light-gray")}overTableMessageDiv.html(dataPresentMessage)}else{overTableMessageDiv.html(clickMessage)}overTableMessageDiv.fadeIn("medium")}mainTextArea.blur(function(){if(b()){if(textAreaChanged){fUNQ106();fUNQ105()}fUNQ92();if(mobileDevice||tabletDevice){a()}}});$("#toggleDiv").mouseleave(function(){a()});function a(){if(b()&&!geoCodeStats.geoCoding){if(displayTableDiv.hasClass("light-gray")){displayTableDiv.removeClass("light-gray")}overTableMessageDiv.fadeOut("medium")}}function g(){textAreaDataLength=mainTextArea.val().length;if(textAreaDataLength>0){fUNQ106();fUNQ92()}else{overTableMessageDiv.html(clickMessage);$("#tableText").hide()}$("#displayTable").addClass("light-gray")}if(ie!=null){$("#prettyTable").click(function(){if(geoCodeStats.geoCoding){return}f()});overTableMessageDiv.click(function(){if(geoCodeStats.geoCoding){return}f()})}outerOverTableDiv.click(function(){if(geoCodeStats.geoCoding){return}f()});function f(){textAreaChanged=false;$("#tableText").show();var h=mainTextArea;h.show();h.select();h.mouseup(function(){h.unbind("mouseup");return false});$("#prettyTable").hide();outerOverTableDiv.hide()}fUNQ78();g();$("[rel=tooltip]").tooltip();fUNQ182()}function fUNQ92(){$("#prettyTable").show();displayTableDiv.removeClass("light-gray");overTableMessageDiv.html(dataPresentMessage);outerOverTableDiv.show();$("#tableText").hide()}function fUNQ93(a){textAreaChanged=true;mainTextArea.val(a);textAreaDataLength=mainTextArea.val().length;fUNQ106();overTableMessageDiv.html(clickMessage);overTableMessageDiv.hide();fUNQ92()}function fUNQ94(b){var c="";if($("#map_lang_sel").length>0){c=$("#map_lang_sel option:selected").val();if(c!=null&&c.trim().length>0){c="&language="+c}}var a=document.createElement("script");a.type="text/javascript";a.src="//maps.googleapis.com/maps/api/js?v=3.23&key=AIzaSyArK9pT5ZBrngT8I_rzobA64CW5l_mJLTo&libraries=geometry&callback="+b+c;document.body.appendChild(a)}function fUNQ95(a){var b=document.createElement("script");b.type="text/javascript";b.src="/js/markerwithlabel.js";document.body.appendChild(b);setTimeout(a,500)}function fUNQ96(){if(dataLines.length==0){return}if((typeof EditingMap!="undefined"&&EditingMap)||(typeof BulkGeoMap!="undefined"&&BulkGeoMap)){return}selectFilterMatch={};fUNQ156(columnHeaderHash);fUNQ115();fUNQ119();fUNQ126();fUNQ163();fUNQ152("selectorData");fUNQ150("selectorData");fUNQ151("selectorData");fUNQ112("selectorData");fUNQ110();fUNQ127("selectorData");fUNQ113("selectorData");fUNQ114("selectorData");$("#markerTitleCB").prop("checked",true);fUNQ120("selectorData");fUNQ121("selectorData");fUNQ124("selectorData");fUNQ125("selectorData");fUNQ123("selectorData");fUNQ122();fUNQ103();fUNQ104();fUNQ41();fUNQ100();var a=$("#headerInst");if(a.length>0){if(fUNQ102()){a.hide()}else{a.show()}}if(advancedMap){$("#outerFilterSelects").show();$("#outerMarkerDisplaySelects").show();$("#outerCustoms").show()}}function fUNQ97(){var b=$("#errorButton");var a=$("#prettyErrorTable");if(b.text()==showErrorsText){b.text(hideErrorsText);a.show()}else{b.text(showErrorsText);a.hide()}}function fUNQ98(){var a=$("#makeMapButton");if(a.hasClass("btn-caution")){a.toggleClass("btn-caution btn-danger");a.text(stopMappingText)}else{if(a.hasClass("btn-success")){a.toggleClass("btn-success btn-danger");a.text(stopMappingText)}}return true}function fUNQ99(){var a=fUNQ102();var b=$("#makeMapButton");if(b.hasClass("btn-danger")){if(a){b.toggleClass("btn-success btn-danger")}else{b.toggleClass("btn-caution btn-danger")}b.text(makeMapText);if(typeof EditingMap!="undefined"&&EditingMap){b.text(reMapText)}}}function fUNQ100(){var a=fUNQ102();var b=$("#makeMapButton");if(a&&b.hasClass("btn-caution")){b.toggleClass("btn-caution btn-success")}else{if(!a&&b.hasClass("btn-success")){b.toggleClass("btn-caution btn-success")}}}function fUNQ101(){return(dataLines!=null&&dataLines.length>0)}function fUNQ102(){return((mObject.lat!=null&&mObject.lat>-1&&mObject.lng!=null&&mObject.lng>-1)||(mObject.address!=null&&mObject.address>-1)||(mObject.city!=null&&mObject.city>-1)||(mObject.state!=null&&mObject.state>-1)||(mObject.zip!=null&&mObject.zip>-1)||(mObject.country!=null&&mObject.country>-1))}function fUNQ103(){var c=[];var a=[];mObject.headerDisplayOrderIdxs.length=0;for(var b=0;b<mObject.columnHeaderArray.length;b++){if(reservedMatches.indexOf(mObject.columnHeaderArray[b])>=0){continue}if(b==mObject.lat||b==mObject.lng){continue}else{c.push(b)}mObject.headerDisplayOrderIdxs[mObject.headerDisplayOrderIdxs.length]=b}if($("#markerDisplaySelects").length==0){return}fUNQ47("noDisplay","toDisplay",c,a,mObject.columnHeaderArray);fUNQ38()}function fUNQ104(){if($("#filterSelects").length==0){return}var a=[];for(var b=0;b<mObject.columnHeaderArray.length;b++){if(reservedMatches.indexOf(mObject.columnHeaderArray[b])>=0){continue}if(b==mObject.lat||b==mObject.lng){continue}a.push(b)}fUNQ47("noFilter","toFilter",[],a,mObject.columnHeaderArray);fUNQ46(MAX_FILTERS)}function fUNQ105(){if(typeof EditingMap!="undefined"&&EditingMap){var c=$.extend(true,{},mObject.groupCustomColorImageHash);fUNQ153();var a=0;if(mObject.emm_acc>-1||clonedHeaders.indexOf("emm_acc")){a++}if(mObject.emm_lat>-1){a++}if(mObject.emm_lng>-1){a++}if(clonedHeaders.length-a>mObject.columnHeaderArray.length){$("#lineCount").html('<div class="alert alert-error">'+changedColumnsText+"</div>")}for(var b=0;b<clonedHeaders.length&&b<mObject.columnHeaderArray.length;b++){if(b==mObject.emm_acc||b==mObject.emm_lat||b==mObject.emm_lng){}if(clonedHeaders[b].toLocaleLowerCase()!=mObject.columnHeaderArray[b].toLocaleLowerCase()){$("#lineCount").html('<div class="alert alert-error">'+changedColumnsText+"</div>")}}fUNQ116();fUNQ2(c)}}function fUNQ106(){if(editMap){mObject.dataType=null}var h=mainTextArea.val();var b=false;var c="";var a="";var k=[];safeLineProcessor(h,k,0);var l=0;var g=0;for(var f=0;f<k.length;f++){var d=k[f].join("	");if(d.trim().indexOf("#")==0||d.trim()==""){continue}if(!b){g=k[f].length}a="";l++;for(var e=0;e<g&&e<k[f].length;e++){if(!b){a+="<th>"+fUNQ109(k[f][e].fulltrim(),25)+"</th>"}else{a+="<td>"+fUNQ107(fUNQ109(k[f][e].fulltrim(),25))+"</td>"}}c+="<tr>"+a+"</tr>";if(l>100&&l>0){c+='<tr><td colspan="'+g+'">'+MAX_LINE_MESSAGE+"</td></tr>";break}b=true}$("#outerDisplayTable").html('<table id="displayTable" class="table table-bordered table-condensed" style="width: 100%">'+c+"</table>")}function redrawTextArea(){var b=fUNQ108(mObject.columnHeaderArray.join("\t"));var a=fUNQ108(fUNQ70());if(b.length>0&&a.length>0){mainTextArea.val(b+"\n"+a)}}function fUNQ107(a){return a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/,"&apos;")}function fUNQ108(a){return a.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&apos;/,"'")}function fUNQ109(b,a){if(b==null){return""}if(typeof b!=="string"){b=b.toString()}if(b.trim().length>a){return b.substring(0,a-5)+"..."}return b}String.prototype.fulltrim=function(){return this.replace(/[\xC2]*/g,"").trim()};function fUNQ110(){if(dataLines.length>=150){$("#clusterCB").prop("checked",true)}}function fUNQ111(h,j,c,f,a,e,k,b){if(!h&&$("#".checkBoxId).length>0){return}var g="";if(e!=null&&e===true){g="checked"}var d='<p><label id="'+c+'_label" for="'+c+'">'+f+" ";if(a!=null&&a.length>0){d+='<a id="'+c+'_ToolTip" data-toggle="tooltip" title="'+a+'"><i class="icon-question-sign"></i></a> '}d+='</label>  <input id="'+c+'" type="checkbox" name="'+b+'" value="'+b+'" '+g+" > </p>";$("#"+j).append(d);$("#"+c+"_ToolTip").tooltip({placement:"right"});if(k!=null&&k.length>0){$("#"+c).change(function(){mObject[k]=this.checked})}}function fUNQ112(a){if($("#clusterCB").length>0){return}var b='<p><label id="clusterCB_label" for="clusterCB">'+enableClusteringText+'<a id="cbToolTip" data-toggle="tooltip" title="'+clusterToolTipText+'"><i class="icon-question-sign"></i></a> </label>  <input id="clusterCB" type="checkbox" name="cluster" value="Cluster"> </p>';$("#"+a).append(b);$("#cbToolTip").tooltip({placement:"right"})}function fUNQ113(a){if($("#scrollWheelCB").length>0){return}var b='<p><label id="scrollWheelCB_label" for="scrollWheelCB">'+mouseScrollText+' <a id="swToolTip" data-toggle="tooltip" title="'+scrollWheelToolTipText+'"><i class="icon-question-sign"></i></a> </label>  <input id="scrollWheelCB" type="checkbox" name="scrollWheel" value="ScrollWheel"> </p>';$("#"+a).append(b);$("#swToolTip").tooltip({placement:"right"})}function fUNQ114(a){if($("#markerTitleCB").length>0){return}var b='<p><label id="markerTitleCB_label" for="markerTitleCB">'+mouseOverMarkerText+' <a id="markerTitleToolTip" data-toggle="tooltip" title="'+mouseOverToolTipText+'"><i class="icon-question-sign"></i></a> </label>  <input id="markerTitleCB" type="checkbox" name="markerTitle" value="markerTitle"> </p>';$("#"+a).append(b);$("#markerTitleToolTip").tooltip({placement:"right"})}function fUNQ115(){var e=BASIC_GROUP_COUNT;var b=basicGroupToolTipText;if(advancedMap){e=MAX_GROUPS;b=advancedGroupToolTipText}var c=' <a id="groupToolTip" data-toggle="tooltip" title="'+b+'"><i class="icon-question-sign"></i></a>';var d=$("#group_sel_label");var a=$("#groupToolTip");if(d.length==0||a.length>0){}else{d.append(c);$("#groupToolTip").tooltip({placement:"right"})}fUNQ116()}function fUNQ116(){var c=$("#group_sel option:selected").attr("value");var a=$("#group_color_div");if(c==-1){if(a.length>0){mObject.groupCustomColorImageHash={};$("#group_color_div").hide()}return}if(a.length==0){var d=$("#group_sel").parent();var b='<div id="group_color_div" >	<a id="toggleGroupColors">'+showGroupMarkersText+'</a><div id="groupMarkersSelected" style="display: none;"> </div></div>';d.after(b);$("#toggleGroupColors").click(function(){if($(this).text()==showGroupMarkersText){$("#groupMarkersSelected").show();$(this).text(hideGroupMarkersText)}else{$("#groupMarkersSelected").hide();$(this).text(showGroupMarkersText)}})}else{a.show()}$("#groupMarkersSelected").html(fUNQ117())}function fUNQ117(){fUNQ60(dataLines);var h=BASIC_GROUP_COUNT;if(mObject.mapType=="advanced"){h=MAX_GROUPS}var g="";for(var d=0;d<mObject.sortedGroupKeys.length;d++){var k=mObject.sortedGroupKeys[d];mObject.groupCustomColorImageHash[k]=d;var l="";var f="";var c="";if(!mObject.groupImageHash.hasOwnProperty(k)||isNaN(mObject.groupImageHash[k])||mObject.groupImageHash[k]>IMG_LIST.length||mObject.groupImageHash[k]<0){f="None";l="/img/blank.gif";c="None"}else{l=IMAGE_PATH+SMALL_IMAGE+IMG_LIST[mObject.groupImageHash[k]]+IMG_FILE_ENDING;f=IMG_LIST[mObject.groupImageHash[k]];c=LANG_COLOR_LIST[mObject.groupImageHash[k]]}g+='<div> <label class="groupColorLabel" id="groupColor'+d+'">'+k+'</label><div class="pull-left">   <div class="pull-right"><div class="btn-group">   <a class="btn  dropdown-toggle" data-toggle="dropdown"><img src="'+l+'" id="pinImage'+d+'" style="padding-right: 5px;"><span id="pinSpan'+d+'" data-color="'+f+'"  >'+c+'</span><span class="caret"></span></a>';g+='<ul class="dropdown-menu" style="text-align: left;"> ';for(var e=0;e<h;e++){var a=IMG_LIST[e];var b=IMAGE_PATH+SMALL_IMAGE+a+IMG_FILE_ENDING;c=LANG_COLOR_LIST[e];g+=' <li  class="markerHover" onclick="fUNQ118(\''+a+"', "+d+",'"+c+'\')"><img src="'+b+'" id="pinImage'+d+'" style="padding-right: 5px; padding-left: 5px;">'+c+"</li>"}g+="</ul>";g+="</div></div></div></div>"}return g}function fUNQ118(b,a,f){if(disableGroupColorChange===true||b==undefined){return}var d=IMAGE_PATH+SMALL_IMAGE+b+IMG_FILE_ENDING;$("#pinImage"+a).attr("src",d);$("#pinSpan"+a).html(f);var e=$("#groupColor"+a).text();var c=IMG_LIST.indexOf(b);mObject.groupCustomColorImageHash[e]=c}function fUNQ119(){var b=' <a id="pinLabelToolTip" data-toggle="tooltip" title="'+pinLabelToolTipText+'"><i class="icon-question-sign"></i></a>';var c=$("#pin_label_sel_label");var a=$("#pinLabelToolTip");if(c.length==0||a.length>0){}else{c.append(b);$("#pinLabelToolTip").tooltip({placement:"right"})}}function fUNQ120(a){if(!advancedMap||$("#showMoreOptionsCB").length>0){return}var b='<p><label id="showMoreOptionsCB_label" for="showMoreOptionsCB">'+moreOptionText+' <a id="showMoreOptionsToolTip" data-toggle="tooltip" title="'+moreOptionToolTipText+'"><i class="icon-question-sign"></i></a> </label>  <input id="showMoreOptionsCB" type="checkbox" name="showMoreOptions" value="directions panel" > </p>';$("#"+a).append(b);$("#showMoreOptionsToolTip").tooltip({placement:"right"});$("#showMoreOptionsCB").change(function(){mObject.showMoreOptions=this.checked})}function fUNQ121(a){if(!advancedMap||$("#exportDataCB").length>0){return}var b='<p><label id="exportDataCB_label" for="exportDataCB">'+exportDataText+' <a id="exportDataToolTip" data-toggle="tooltip" title="'+exportDataToolTip+'"><i class="icon-question-sign"></i></a> </label>  <input id="exportDataCB" type="checkbox" name="exportData" value="directions panel" > </p>';$("#"+a).append(b);$("#exportDataToolTip").tooltip({placement:"right"});$("#exportDataCB").change(function(){mObject.exportData=this.checked})}function fUNQ122(){fUNQ111(advancedMap,"selectorData","ZoomAndCenterCB",zoomAndCenterText,zoomAndCenterToolTip,false,"customZoomAndCenter","customZoomAndCenter")}function fUNQ123(a){if($("#showDescriptionDirectionsCB").length>0){return}var b='<p><label id="showDescriptionDirectionsCB_label" for="showDescriptionDirectionsCB">'+descriptionDirectionsText+' <a id="showDescriptionDirectionsToolTip" data-toggle="tooltip" title="'+descriptionDirectionsToolTip+'"><i class="icon-question-sign"></i></a> </label>  <input id="showDescriptionDirectionsCB" type="checkbox" name="showMarkerNumbers" checked > </p>';$("#"+a).append(b);$("#showDescriptionDirectionsToolTip").tooltip({placement:"right"});$("#showDescriptionDirectionsCB").change(function(){mObject.showDirectionDescription=this.checked})}function fUNQ124(a){if(!advancedMap||$("#zoomInSearchingCB").length>0){if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){mObject.zoomInSearching=true}return}var b='<p><label id="zoomInSearchingCB_label" for="zoomInSearchingCB"> '+zoomInSearchText+' <a id="zoomInSearchingToolTip" data-toggle="tooltip" title="'+zoomInSearchDetail+'"><i class="icon-question-sign"></i></a> </label>  <input id="zoomInSearchingCB" type="checkbox" name="zoomInSearching" value="directions panel" checked> </p>';$("#"+a).append(b);$("#zoomInSearchingToolTip").tooltip({placement:"right"});$("#zoomInSearchingCB").change(function(){mObject.zoomInSearching=this.checked})}function fUNQ125(a){if($("#showMarkerNumbersCB").length>0){return}var b='<p><label id="showMarkerNumbersCB_label" for="showMarkerNumbersCB"> '+numberedPinsText+' <a id="showMarkerNumbersToolTip" data-toggle="tooltip" title="'+numberedPinsToolTipText+'"><i class="icon-question-sign"></i></a> </label>  <input id="showMarkerNumbersCB" type="checkbox" name="showMarkerNumbers" value="directions panel" > </p>';$("#"+a).append(b);$("#showMarkerNumbersToolTip").tooltip({placement:"right"});$("#showMarkerNumbersCB").change(function(){mObject.showMarkerNumbers=this.checked})}function fUNQ126(){if(!advancedMap){return}$("#dynamicFiltersToolTip").tooltip({placement:"right"});$("#dynamicFiltersCB").change(function(){mObject.disAbleDynamicFilters=this.checked});$("#filterCountsToolTip").tooltip({placement:"right"});$("#filterCountsCB").change(function(){mObject.filterCounts=this.checked});$("#multiSelectFiltersToolTip").tooltip({placement:"right"});$("#multiSelectFiltersCB").change(function(){mObject.multiSelectFilters=this.checked;if(this.checked){$("#dynamicFiltersCB").prop("checked",false);$("#dynamicFiltersCB").attr("disabled","disabled")}else{$("#dynamicFiltersCB").removeAttr("disabled")}});$("#customLogoToolTip").tooltip({placement:"right"});$("#customMarkersToolTip").tooltip({placement:"right"})}function fUNQ127(b){var a=$("#showLabelCB");if(!advancedMap||a.length>0){return}var c='<p><label id="showLabelCB_label" for="showLabelCB">'+showLabelsText+' <a id="showLabelsToolTip" data-toggle="tooltip" title="'+showLabelsToolTipText+'"><i class="icon-question-sign"></i></a> </label>  <input id="showLabelCB" type="checkbox" name="showLabels" value="Show Labels" checked> </p>';$("#"+b).append(c);$("#showLabelsToolTip").tooltip({placement:"right"});$("#showLabelCB").change(function(){mObject.showLabels=this.checked;fUNQ41()})}function mapPrep(){if(google==undefined||google.maps==undefined){fUNQ94("mapPrep");return}if(typeof mObject.pinLabel!="undefined"&&mObject.pinLabel!=null&&mObject.pinLabel>-1&&typeof MarkerWithLabel=="undefined"){fUNQ95(mapPrep);return}var a,d;if(mObject.emm_lat>-1&&mObject.emm_lng>-1&&mObject.lat<0&&mObject.lng<0){mObject.lat=mObject.emm_lat;mObject.lng=mObject.emm_lng}if(mObject.lat>-1&&mObject.lng>-1&&mObject.lat<dataLines[0].length&&mObject.lng<dataLines[0].length&&mObject.lat!=mObject.lng){if(dataLines[0][mObject.lat].endsWith("N")||dataLines[0][mObject.lat].endsWith("S")){a=fUNQ169(dataLines[0][mObject.lat]);d=fUNQ169(dataLines[0][mObject.lng]);if(fUNQ251(a,d)){dataLines[0][mObject.lat]=a;dataLines[0][mObject.lng]=d}}if(fUNQ251(dataLines[0][mObject.lat],dataLines[0][mObject.lng])){if((mObject.emm_lat==-1&&mObject.emm_lng==-1)||(mObject.emm_lat!=mObject.lat)||(mObject.emm_lng!=mObject.lng)){mObject.emm_lat=mObject.lat;mObject.emm_lng=mObject.lng}var c=true;for(var b=1;b<dataLines.length;b++){if(dataLines[b][mObject.lat].endsWith("N")||dataLines[b][mObject.lat].endsWith("S")){a=fUNQ169(dataLines[b][mObject.lat]);d=fUNQ169(dataLines[b][mObject.lng]);if(fUNQ251(a,d)){dataLines[b][mObject.lat]=a;dataLines[b][mObject.lng]=d}}if(!fUNQ251(dataLines[b][mObject.lat],dataLines[b][mObject.lng])){c=false;break}}if(c&&dataLines.length>0){mObject.emm_lat=mObject.lat;mObject.emm_lng=mObject.lng;$("#lineCount").html("<strong> Mapping "+dataLines.length.toString()+" items.</strong>");fUNQ99();fUNQ140();return}}}var e=fUNQ148();if(e>0){fUNQ128(e);geoCodeStats.geoCoding=true;geoCodeStats.StartTime=new Date().getTime();fUNQ131()}}function fUNQ128(a){geoCodeStats.linesToGeoCode=a;if(geoCodeStats.init==true){geoCodeStats.linesToGeoCode+=geoCodeStats.linesGeoCoded;if(geoCodeStats.linesToGeoCode>dataLines.length){geoCodeStats.linesToGeoCode=dataLines.length}return}geoCodeStats.init=true;geoCodeStats.allDone=false;geoCodeStats.linesGeoCoded=0;geoCodeStats.totalLinesGeoCoded=0;geoCodeStats.cachedLines=0;geoCodeStats.geoCodingIdx=0;geoCodeStats.defaultGeoCodeTimeout=defaultGeoCodeTimeout;geoCodeStats.errors=[];geoCodeStats.errorAddresses={};geoCodeStats.consecutiveTimeouts=0;geoCodeStats.consecutiveErrors=0;geoCodeStats.totalTime=0;geoCodeStats.lastFiveTimes=[0,0,0,0,0];$("#outerProgressDiv").show();fUNQ164(0);if(geoCodeStats.linesToGeoCode<20){geoCodeStats.defaultGeoCodeTimeout=200}if(geoCodeStats.linesToGeoCode>200){geoCodeStats.defaultGeoCodeTimeout=1000}geoCodeStats.lastProcessingTime=1000;geoCodeStats.regionCode=$("#region_sel option:selected").attr("value");mObject.regionCode=geoCodeStats.regionCode;mObject.regionCountry=$("#region_sel option:selected").text()}function fUNQ129(){var c=0;var a=0;for(var b=0;b<geoCodeStats.lastFiveTimes.length;b++){if(geoCodeStats.lastFiveTimes[b]==0){continue}a++;c+=geoCodeStats.lastFiveTimes[b]}if(a==0){return geoCodeStats.lastProcessingTime}return Math.ceil(c/a)}function fUNQ130(){var c=0;var a=0;for(var b=0;b<geoCodeStats.lastFiveTimes.length;b++){if(geoCodeStats.lastFiveTimes[b]==0){continue}a++;if(geoCodeStats.lastFiveTimes[b]>10000){c+=2000}c+=geoCodeStats.lastFiveTimes[b]}if(a==0){return geoCodeStats.lastProcessingTime}return Math.ceil(c/a)}function fUNQ131(){if(!geoCodeStats.geoCoding){return}var a="";var b=true;for(var c=geoCodeStats.geoCodingIdx;c<dataLines.length;c++){if(!fUNQ251(dataLines[c][mObject.emm_lat],dataLines[c][mObject.emm_lng])){geoCodeStats.geoCodingIdx=c;a=fUNQ222(dataLines[geoCodeStats.geoCodingIdx]);if(a!=null&&a.trim()==""){geoCodeStats.errors[geoCodeStats.errors.length]={message:"Empty Address",address:a,lineNumber:geoCodeStats.geoCodingIdx+1};continue}if(geoCodeStats.errorAddresses.hasOwnProperty(a)){continue}if(!geoCodeHash.hasOwnProperty(a)){b=false;break}else{geoCodeStats.cachedLines++;geoCodeStats.totalLinesGeoCoded++;if(mObject.emm_lat>0&&mObject.emm_lat<=dataLines[c].length){dataLines[c][mObject.emm_lat]=geoCodeHash[a].emm_lat}if(mObject.emm_lng>0&&mObject.emm_lng<=dataLines[c].length){dataLines[c][mObject.emm_lng]=geoCodeHash[a].emm_lng}if(mObject.emm_acc>0&&mObject.emm_acc<=dataLines[c].length){dataLines[c][mObject.emm_acc]=geoCodeHash[a].emm_acc}if(geoCodeStats.geoCodingIdx==100||geoCodeStats.geoCodingIdx+1==dataLines.length){fUNQ154()}}}}if(b){geoCodeStats.geoCodingIdx=dataLines.length;fUNQ138();return}if(fUNQ146(a)){fUNQ76(a)}else{if(geoCoder==null){geoCoder=new google.maps.Geocoder()}if(geoCodeStats.totalLinesGeoCoded+1>geoCodeStats.geoCodingIdx&&geoCodeStats.linesToGeoCode>geoCodeStats.totalLinesGeoCoded){geoCodeStats.totalLinesGeoCoded=geoCodeStats.geoCodingIdx+1}$("#lineVal").html(processingText+" "+a+" ("+(geoCodeStats.totalLinesGeoCoded).toString()+" "+ofText+" "+geoCodeStats.linesToGeoCode.toString()+")");fUNQ147(estimatedTimeText+" ",fUNQ129()*(geoCodeStats.linesToGeoCode-geoCodeStats.totalLinesGeoCoded));if(geoCodeStats.regionCode.length>0){geoCoder.geocode({address:a,region:geoCodeStats.regionCode},function(e,d){fUNQ135(e,d,a)})}else{geoCoder.geocode({address:a},function(e,d){fUNQ135(e,d,a)})}}}function fUNQ132(a,c,b){fUNQ133();if(c=="OK"){fUNQ134(b,a.latitude,a.longitude,"APPROXIMATE")}else{fUNQ145(c,b)}fUNQ138()}function fUNQ133(){geoCodeStats.lastProcessingTime=(new Date().getTime())-geoCodeStats.StartTime;geoCodeStats.lastFiveTimes[geoCodeStats.geoCodingIdx%5]=geoCodeStats.lastProcessingTime;geoCodeStats.totalTime+=geoCodeStats.lastProcessingTime;geoCodeStats.StartTime=new Date().getTime()}function fUNQ134(a,d,b,c){dataLines[geoCodeStats.geoCodingIdx][mObject.emm_lat]=d;dataLines[geoCodeStats.geoCodingIdx][mObject.emm_lng]=b;dataLines[geoCodeStats.geoCodingIdx][mObject.emm_acc]=c;geoCodeHash[a]={};geoCodeHash[a].emm_lat=d;geoCodeHash[a].emm_lng=b;geoCodeHash[a].emm_acc=c;geoCodeStats.geoCodingIdx++;geoCodeStats.linesGeoCoded++;geoCodeStats.totalLinesGeoCoded++;geoCodeStats.consecutiveTimeouts=0;geoCodeStats.consecutiveErrors=0}function fUNQ135(c,b,a){fUNQ133();if(b==google.maps.GeocoderStatus.OK){fUNQ134(a,c[0].geometry.location.lat().toFixed(6),c[0].geometry.location.lng().toFixed(6),c[0].geometry.location_type)}else{if(b==google.maps.GeocoderStatus.ZERO_RESULTS){dataLines[geoCodeStats.geoCodingIdx][mObject.emm_acc]=noResultsText;fUNQ145(noResultsText,a);geoCodeStats.consecutiveErrors=0}else{if(b==google.maps.GeocoderStatus.REQUEST_DENIED){fUNQ145("Request Denied",a)}else{if(b==google.maps.GeocoderStatus.OVER_QUERY_LIMIT){geoCodeStats.consecutiveTimeouts++;if(geoCodeStats.defaultGeoCodeTimeout>=GEO_CODE_SLOWNESS&&geoCodeStats.consecutiveTimeouts>3){geoCodeStats.slowness=true;fUNQ137();return}if((geoCodeStats.defaultGeoCodeTimeout*1.5)<2000){geoCodeStats.defaultGeoCodeTimeout*=1.5}else{if(geoCodeStats.defaultGeoCodeTimeout<4000){geoCodeStats.defaultGeoCodeTimeout+=500}}}else{if(b==google.maps.GeocoderStatus.INVALID_REQUEST){fUNQ145("Invalid Request",a)}else{if(b==google.maps.GeocoderStatus.UNKNOWN_ERROR){fUNQ145("Unknown Error",a)}}}}}}if(fUNQ130()>GEO_CODE_SLOWNESS){geoCodeStats.limitHit=true;fUNQ137();return}if(typeof BulkGeoMap!="undefined"&&BulkGeoMap&&geoCodeStats.linesGeoCoded>=ADDRESS_LIMIT){geoCodeStats.limitHit=true;fUNQ10(location.href);return}if(geoCodeStats.linesGeoCoded>=ADDRESS_LIMIT){geoCodeStats.limitHit=true;fUNQ136();return}fUNQ138()}function fUNQ136(){fUNQ99();fUNQ139();geoCodeStats.geoCoding=false;var a="";if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){a=bulkGeoRemainText}stopGeoCoding(geoSlownessText+" "+a);if(geoCodeStats.linesGeoCoded>0){fUNQ147(finishedProcessingText+" "+(geoCodeStats.geoCodingIdx+1).toString()+" "+itemsInText+" ",geoCodeStats.totalTime)}fUNQ155()}function fUNQ137(){fUNQ99();fUNQ139();geoCodeStats.geoCoding=false;var a="";if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){a=bulkGeoRemainText}if(geoCodeStats.linesGeoCoded>0){stopGeoCoding(stopGeoCodingQuestion+" "+a);fUNQ147(finishedProcessingText+" "+(geoCodeStats.geoCodingIdx+1).toString()+" "+itemsInText+" ",geoCodeStats.totalTime)}else{alert("Stopping geo-coding due to excessive slowness.")}fUNQ155()}function fUNQ138(){if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){fUNQ164((geoCodeStats.totalLinesGeoCoded*100)/(geoCodeStats.linesToGeoCode))}else{fUNQ164((geoCodeStats.linesGeoCoded*100)/(geoCodeStats.linesToGeoCode-geoCodeStats.cachedLines))}if(geoCodeStats.errors.length>=5&&geoCodeStats.linesGeoCoded<10&&geoCodeStats.totalLinesGeoCoded<10){fUNQ99();geoCodeStats.geoCoding=false;alert(stopGeoCodingAlert);fUNQ155();fUNQ139();return}if(dataLines.length==geoCodeStats.geoCodingIdx){geoCodeStats.limitHit=false;fUNQ99();geoCodeStats.geoCoding=false;geoCodeStats.allDone=true;fUNQ139();fUNQ155();if(geoCodeStats.linesGeoCoded>0){fUNQ147(finishedProcessingText+" "+geoCodeStats.linesGeoCoded.toString()+" "+itemsInText+" ",geoCodeStats.totalTime)}if(geoCodeStats.errors.length>0){if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){fUNQ10(location.href.replace("bulkgeo","edit"));return}$("#lineVal").html(thereWereText+" "+geoCodeStats.errors.length.toString()+" "+errorText);stopGeoCoding(geocodeingDataAlert)}else{if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){fUNQ10(location.href.replace("bulkgeo","edit"));return}$("#lineVal").hide();fUNQ140()}return}if(geoCodeStats.geoCoding){setTimeout(function(){fUNQ131()},geoCodeStats.defaultGeoCodeTimeout)}if(geoCodeStats.consecutiveTimeouts==0){fUNQ139()}}function stopGeoCoding(a){var b=confirm(a);if(b){fUNQ140()}}function fUNQ139(){if(geoCodeStats.geoCodingIdx<101){fUNQ154()}redrawTextArea()}function fUNQ140(){if(mObject.emm_lat!=-1&&mObject.lat!=mObject.emm_lat){mObject.lat=mObject.emm_lat}if(mObject.emm_lng!=-1&&mObject.lng!=mObject.emm_lng){mObject.lng=mObject.emm_lng}for(var a=dataLines.length-1;a>=0;a--){if(!fUNQ251(dataLines[a][mObject.lat],dataLines[a][mObject.lng])){dataLines.splice(a,1)}}if(dataLines.length==0){alert(unMappableDataAlert);return}$("#makeMapButton").prop("disabled","disabled");$("#optionButton").prop("disabled","disabled");fUNQ141(false);fUNQ48(mObject.columnHeaderArray,dataLines);if((mObject.useCustomImages!==null&&mObject.useCustomImages===true)&&(typeof EditingMap!="undefined"&&EditingMap)||(typeof BulkGeoMap!="undefined"&&BulkGeoMap)&&imageCount>1){fUNQ59(dataLines,imageCount)}fUNQ176();if(mObject.useCustomImages==null||mObject.useCustomImages==false){fUNQ60(dataLines)}var b=myMapOptions.indexOf(mObject.selectedMapType);mObject.clustering=$("#clusterCB").is(":checked");mObject.scrollWheel=$("#scrollWheelCB").is(":checked");mObject.markerTitle=$("#markerTitleCB").is(":checked");$("#outerMap").show();$("#saveMapDiv").show();if(fUNQ219()){$("#sameLocationMarkers").show();mObject.moveSingleMarker=false;$("#moveAllMarkers").change(function(){if(this.value=="all"){mObject.moveSingleMarker=false}else{mObject.moveSingleMarker=true}})}initMap("map",b);$("html, body").animate({scrollTop:$("#outerMap").offset().top-70},1000)}function fUNQ141(b){var e=[];var c,a;e.push.apply(e,matchNames);e.push.apply(e,miscIds);for(c=0;c<e.length;c++){a=$("#"+e[c]);if(a.length==0){continue}if(b==false){a.attr("disabled","disabled")}else{a.removeAttr("disabled")}}if(imageData!=null){for(c=0;c<imageData.length;c++){a=$("#imgGroupSelect"+c.toString());var d=$("#delButton"+c.toString());if(b==false){a.attr("disabled","disabled");d.attr("disabled","disabled")}else{a.removeAttr("disabled");d.removeAttr("disabled")}}}disableGroupColorChange=true}function fUNQ142(){for(var b=0;b<matchNames.length;b++){var a=$("#"+matchNames[b]);if(a.length==0){continue}a.remove()}}function fUNQ143(){var c=["clusterCB","scrollWheelCB","mapType"];var b,a;for(b=0;b<c.length;b++){a=$("#"+c[b]);if(a.length==0){continue}a.remove()}c=["noDisplay","toDisplay","noFilter","toFilter"];for(b=0;b<c.length;b++){a=$("#"+c[b]);if(a.length==0){continue}a.empty()}}function fUNQ144(){if(!fUNQ83()){alert(invalidEmailAlert);return false}fUNQ82();fUNQ86();return true}function fUNQ145(b,a){geoCodeStats.geoCodingIdx++;geoCodeStats.consecutiveTimeouts=0;geoCodeStats.consecutiveErrors++;geoCodeStats.linesGeoCoded++;geoCodeStats.totalLinesGeoCoded++;geoCodeStats.errors[geoCodeStats.errors.length]={message:b,address:a,lineNumber:geoCodeStats.geoCodingIdx+1};if(!geoCodeStats.errorAddresses.hasOwnProperty(a)){geoCodeStats.errorAddresses[a]={};geoCodeStats.errorAddresses[a].lineNumber=geoCodeStats.geoCodingIdx+1}}function fUNQ146(d){var b=d.split(".");if(b.length==4){for(var a=0;a<b.length;a++){var c=parseInt(b[a],10);if(!(c>=0&&c<=255)){return false}}return true}return false}function fUNQ147(f,d){var e=Math.ceil(d/1000);var g=e%60;var c=Math.floor(e/60)%60;var a=Math.floor(e/(3600));var b="";if(a>0){b=a.toString()+" "+hoursText+" "+c.toString()+" "+minutesText}else{if(c>0){b=c.toString()+" "+minutesText+" "+g.toString()+" "+secondsText}else{if(g>=1){b=g.toString()+" "+secondsText}else{b=lessThanSecondText}}}$("#timeRemaining").html(f+b)}function fUNQ148(){if(dataLines.length==0){return -1}if(dataLines[0].length!=mObject.columnHeaderArray.length){alert(headerMisMatchAlert);return -1}var d=0;var a=mObject.columnHeaderArray.length;var b=false;var e=0;if(mObject.lat!=null&&mObject.lat>-1){mObject.emm_lat=mObject.lat;if(mObject.lat>=dataLines[0].length){mObject.columnHeaderArray.push("emm_lat");d++}}else{if(mObject.columnHeaderArray.indexOf("emm_lat")==-1){mObject.emm_lat=mObject.columnHeaderArray.length;mObject.columnHeaderArray.push("emm_lat");b=true;d++}}if(mObject.lng!=null&&mObject.lng>-1){mObject.emm_lng=mObject.lng;if(mObject.lng>=dataLines[0].length){mObject.columnHeaderArray.push("emm_lng");d++}}else{if(mObject.columnHeaderArray.indexOf("emm_lng")==-1){mObject.emm_lng=mObject.columnHeaderArray.length;mObject.columnHeaderArray.push("emm_lng");b=true;d++}}if(mObject.columnHeaderArray.indexOf("emm_acc")==-1){mObject.emm_acc=mObject.columnHeaderArray.length;mObject.columnHeaderArray.push("emm_acc");d++}else{if(mObject.emm_acc==-1&&mObject.columnHeaderArray.indexOf("emm_acc")>=0){mObject.emm_acc=mObject.columnHeaderArray.indexOf("emm_acc")}}if(d>0){a+=d;fUNQ149(a)}if(b){return dataLines.length}else{for(var c=0;c<dataLines.length;c++){if(!fUNQ251(dataLines[c][mObject.emm_lat],dataLines[c][mObject.emm_lng])){e++}}}if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){return geoCodeStats.linesToGeoCode}return e}function fUNQ149(a){for(var b=0;b<dataLines.length;b++){while(dataLines[b].length<a){dataLines[b][dataLines[b].length]=""}}}function fUNQ150(a){if($("#hideSelector").html().length==0){return}$("#"+a).append($("#hideSelector").html());$("#hideSelector").html("");$("#zoomInToolTip").tooltip({placement:"right"});jQuery("#zoom_in_sel").change(function(){mObject.zoomInLevel=this.value})}function fUNQ151(a){if(!advancedMap){$("#hideLangSelector").hide();return}if($("#hideLangSelector").length==0||$("#hideLangSelector").html().length==0){return}$("#"+a).append($("#hideLangSelector").html());$("#hideLangSelector").html("");$("#mapLangToolTip").tooltip({placement:"right"});jQuery("#map_lang_sel").change(function(){mObject.mapLanguage=this.value})}function fUNQ152(a){if($("#mapType").length>0){return}var b=fUNQ65(myMapOptions,mObject.selectedMapType,"mapType",displayTypeText);b="<p>"+b+"</p>";$("#"+a).append(b);jQuery("#mapType").change(function(){mObject.selectedMapType=this.value})}function fUNQ153(){var h=[];if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){h=mObject.headerDisplayOrderIdxs.slice()}var g=mainTextArea.val().fulltrim();var m=g.split("\n");var b=false;columnHeaderHash={};dataLines.length=0;var l=0,d;var f=0;var k=[];fUNQ71(g,k,0);for(var e=0;e<k.length;e++){var c=k[e].join("	");if(c.trim().indexOf("#")==0||c.trim()==""){continue}if(!b){b=true;var a=0;mObject.headerDisplayOrderIdxs.length=0;mObject.columnHeaderArray.length=0;for(d=0;d<k[e].length;d++){columnHeaderHash[k[e][d]]=a;mObject.columnHeaderArray.push(k[e][d].trim());mObject.headerDisplayOrderIdxs[mObject.headerDisplayOrderIdxs.length]=a;a++}f=mObject.columnHeaderArray.length}else{while(k[e].length<mObject.columnHeaderArray.length){k[e][k[e].length]=""}dataLines.push(k[e])}l++}originalData=g;if(l<2){$("#lineCount").html('<div class="alert alert-error">'+headerWarningText+"</div>")}else{$("#lineCount").html("<strong> "+foundText+" "+l.toString()+" "+lineHeaderText+"</strong>")}if(typeof EditingMap!="undefined"&&EditingMap&&advancedMap){fUNQ41()}if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){mObject.headerDisplayOrderIdxs=h.slice()}return l}function fUNQ154(){var d="";var c;var b="";for(c=0;c<mObject.columnHeaderArray.length;c++){b=b+"<th>"+fUNQ109(mObject.columnHeaderArray[c],25)+"</th>"}b="<tr>"+b+"</tr>";d+=b;for(c=0;c<dataLines.length&&c<100;c++){b="";for(var a=0;a<dataLines[c].length;a++){b+="<td>"+fUNQ107(fUNQ109(dataLines[c][a],25))+"</td>"}d+="<tr>"+b+"</tr>"}if(dataLines.length>100&&dataLines.length>0){d+='<tr><td colspan="'+dataLines[0].length+'">'+MAX_LINE_MESSAGE+"</td></tr>"}$("#outerDisplayTable").html('<table id="displayTable" class="table table-bordered table-condensed" style="width: 100%;">'+d+"</table>")}function fUNQ155(){var c="";if(geoCodeStats.errors.length==0){$("#errorStuff").hide();return}else{$("#errorStuff").show()}var b="";b=b+"<th>"+lineNumberText+"</th><th>"+addressText+"</th><th>"+errorMessageText+"</th>";b="<tr>"+b+"</tr>";c+=b;for(var a=0;a<geoCodeStats.errors.length&&a<100;a++){b="";b+="<td>"+geoCodeStats.errors[a].lineNumber+"</td><td>"+geoCodeStats.errors[a].address+"</td><td>"+geoCodeStats.errors[a].message+"</td>";c+="<tr>"+b+"</tr>"}if(geoCodeStats.errors.length>100&&geoCodeStats.errors.length>0){c+='<tr><td colspan="3"></td>'+MAX_ERROR_LINE_MESSAGE+"</tr>"}$("#prettyErrorTable").html('<table id="errorTable" class="table table-bordered table-condensed" style="width: 100%">'+c+"</table>")}function fUNQ156(b){fUNQ160(b,addressMatch,negAddressMatch,matchNames[0]);fUNQ160(b,cityMatch,[],matchNames[1]);fUNQ160(b,stateMatch,[],matchNames[2]);fUNQ160(b,zipMatch,[],matchNames[3]);fUNQ160(b,countryMatch,[],matchNames[4]);fUNQ160(b,latMatch,[],matchNames[5]);fUNQ160(b,longMatch,[],matchNames[6]);fUNQ160(b,titleMatch,[],matchNames[7]);fUNQ160(b,urlMatch,[],matchNames[8]);fUNQ160(b,imageMatch,[],matchNames[9]);fUNQ160(b,emailMatch,[],matchNames[10]);fUNQ160(b,groupMatch,[],matchNames[11]);for(var a=0;a<matchNames.length&&a<labelNames.length;a++){fUNQ157(matchNames[a],labelNames[a])}}function fUNQ157(f,a){var g=["-1"];var b=[noneText];var e=noneText;var d=selectFilterMatch[f];if(d!=null&&d.length>0&&d[0]<mObject.columnHeaderArray.length){e=mObject.columnHeaderArray[d[0]]}for(var c=0;c<mObject.columnHeaderArray.length;c++){if(reservedMatches.indexOf(mObject.columnHeaderArray)>=0&&reservedMatches.indexOf(e)<0){continue}if(mObject.columnHeaderArray[c].trim()==""){continue}b.push(mObject.columnHeaderArray[c]);g.push(c)}fUNQ158(b,g,e,f,a)}function fUNQ158(d,g,f,b,j){var c='<label id="'+b+'_label" for="'+b+'">'+j+"</label>";var a='<select name="'+b+'" id="'+b+'"> \n';var e="";for(var h=0;h<d.length;h++){if(d[h]==f){e+='<option value="'+g[h]+'" selected>'+d[h]+"</option>\n";selected_columns[b]=g[h]}else{e+='<option value="'+g[h]+'" >'+d[h]+"</option>\n"}}a=a.concat(e+"</select>");var l=$("#"+b);if(l.length>0){l.html(e)}else{var k="<p>"+c+a+"</p>";$("#selectorData").append(k);jQuery("#"+b).change(function(){selected_columns[b]=parseInt(this.value,10);fUNQ159();if(b=="group_sel"){if(imageCount>0){fUNQ172(imageData,imageCount,false)}else{mObject.groupCustomColorImageHash={};fUNQ116()}}})}}function fUNQ159(){fUNQ163();fUNQ41();fUNQ100()}function fUNQ160(e,h,d,g){for(var c in e){if(e.hasOwnProperty(c)){var f=e[c];var a=c.trim().toLocaleLowerCase().split(" ");if(h.indexOf(c.trim().toLocaleLowerCase())>=0||fUNQ88(a,h.join("|").toLocaleLowerCase().split("|"))){if(d==null||d.length==0||!fUNQ88(a,d.join("|").toLocaleLowerCase().split("|"))){var b;if(selectFilterMatch.hasOwnProperty(g)){b=selectFilterMatch[g];b.push(f)}else{b=[];b.push(f);selectFilterMatch[g]=b}}}}}}function fUNQ161(a){return((new Date(a)!=="Invalid Date"&&!isNaN(new Date(a))))}function fUNQ162(b){var a=prettyMatchNames.indexOf(b);if(a!=-1){var c=matchNames[a];if(selected_columns.hasOwnProperty(c)){return selected_columns[c]}}return -1}function fUNQ163(){mObject.address=fUNQ162("address");mObject.city=fUNQ162("city");mObject.state=fUNQ162("state");mObject.zip=fUNQ162("zip");mObject.country=fUNQ162("country");mObject.lat=fUNQ162("lat");mObject.lng=fUNQ162("long");mObject.title=fUNQ162("title");mObject.web=fUNQ162("url");mObject.image=fUNQ162("image");mObject.email=fUNQ162("email");mObject.group=fUNQ162("group");mObject.pinLabel=fUNQ162("pin_label");if(mObject.lat==-1&&mObject.emm_lat>0){mObject.lat=mObject.emm_lat}if(mObject.lng==-1&&mObject.emm_lng>0){mObject.lng=mObject.emm_lng}}function fUNQ164(a){var b=a.toString()+"%";$("#progressDisplayDiv").css("width",b)}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function fUNQ165(){var a=(location.pathname.length>0?location.pathname.substring(1):""),b=a.length?a.split("/"):[];var c="basic";if(b.length>=1){c=b[b.length-1]}if(mObject.mapType==null&&(c=="advanced"||c=="basic")){mObject.mapType=c}return(mObject.mapType=="advanced")}function fUNQ6(c,b){var a=$("#aliasStatusDiv");a.html("<strong>"+c+"</strong>");if(!a.hasClass("alert")){a.addClass("alert")}if(b=="error"){if(!a.hasClass("alert-error")){a.addClass("alert-error")}if(a.hasClass("alert-success")){a.removeClass("alert-success")}}else{if(a.hasClass("alert-error")){a.removeClass("alert-error")}if(!a.hasClass("alert-success")){a.addClass("alert-success")}}}function fUNQ7(b,a){$.ajax({type:"POST",url:"/modifyAlias",data:{id:userSettings.name,alias:b},cache:false,dataType:"json",success:function(e,d,c){if(e.errorMessage){fUNQ6(e.errorMessage,"error")}else{if(e.status=="Saved"){fUNQ6(successUrlSaveText,"success");if(a!=null){a(b)}}else{fUNQ6(failUrlSaveText,"error")}}},error:function(e,d,c){fUNQ6(e.errorMessage,"error")}})}function fUNQ166(){$("#editable_url_btn").hide();$("#edit-slug-buttons").show();var c=$("#aliasStatusDiv");c.html("");c.removeClass();var d=$("#editable-url");var b=d.html();d.hide();var a=$("#mod-url");a.html('<input type="text" value="'+b+'" id="new-post-slug" MAXLENGTH=100 >');a.show();$("#aliasInstDiv").show()}function fUNQ167(){var a=$("#new-post-slug").val();if(a.length>0&&fUNQ45(a)){fUNQ7(a,successUrlChange)}else{fUNQ6(invalidAliasText,"error")}}function successUrlChange(b){$("#mod-url").hide();var c=$("#editable-url");c.html(b);c.show();var a=location.protocol+"//"+location.hostname+"/map/"+b;$("#genMapUrl").attr("href",a);$("#edit-slug-buttons").hide();$("#editable_url_btn").show();$("#aliasInstDiv").hide()}function fUNQ168(){$("#edit-slug-buttons").hide();$("#editable_url_btn").show();$("#mod-url").hide();$("#editable-url").show();$("#aliasInstDiv").hide();var a=$("#aliasStatusDiv");a.html("");a.removeClass()}function fUNQ169(a){var b=a.split(/[^\d\w]+/);return fUNQ170(b[0],b[1],b[2],b[3])}function fUNQ170(e,b,d,c){var a=parseFloat(e)+(parseFloat(b)/60)+(parseFloat(d)/(60*60));if(c=="S"||c=="W"){a=a*-1}return a}function ajaxFileUpload(a){var b=$("#imgKey").val();var e={id:b,type:a};if(typeof EditingMap!="undefined"&&EditingMap){var c=$("#ek").val();e={id:b,type:a,ek:c}}$.ajaxFileUpload({url:"/util/doajaxfileupload.php",secureuri:false,fileElementId:a,dataType:"json",data:e,success:function(f,d){if(a=="fileToUpload"){if(f.errorMessage!=null&&f.errorMessage.length>0){$("#imageTable").html(f.errorMessage)}else{fUNQ172(f.data,f.imgCount,false)}}else{if(a=="logoToUpload"){fUNQ171(f)}}if(b==null||b==""){$("#imgKey").val(f.imgId);userSettings.imgDir=f.imgId}if(typeof(f.error)!="undefined"){if(f.error!=""){alert(f.error)}else{}}},error:function(f,d,g){alert(imageUploadAlert+" : "+g)}});return false}function fUNQ171(b){if(b.errorMessage==null||b.errorMessage.length==0){var a='<img src="'+b.logoUrl+"?"+new Date().getTime()+'">';$("#logoSpan").html(a)}else{$("#logoSpan").html("problem: "+b.errorMessage)}}function fUNQ172(k,f,e){imageData=k;imageCount=f;var l;for(l=0;l<k.length;l++){}var d="";var a="";a=a+"<th>"+imageText+"</th><th>"+nameText+"</th><th>"+sizeText+"</th><th>"+uploadStatusText+"</th><th>"+deleteText+"</th>";var h=false;var n=$("#group_sel option:selected").attr("value");var q=$("#group_sel option:selected").text();if(n!="-1"&&f>1){h=true;fUNQ59(dataLines,f)}if(h){a+="<th>"+q+"</th>"}a="<tr>"+a+"</tr>";d+=a;for(l=0;l<k.length;l++){var r=(k[l]["url"]!=null&&k[l]["url"].length>0)?'<img src="'+k[l]["url"]+'">':"";var p=(k[l]["name"]!=null&&k[l]["name"].length>0)?k[l]["name"]:"";var o=(k[l]["size"]!=null&&$.isNumeric(k[l]["size"]))?k[l]["size"]:"";var j=(k[l]["error"]!=null&&k[l]["error"].length>0)?k[l]["error"]:successfulText;var g="";if(j==successfulText){g='<button id="delButton'+l.toString()+'" class="btn btn-small btn-danger"  type="button"  onclick="fUNQ180('+l.toString()+')">'+deleteText+"</button>"}a="";a+="<td>"+r+"</td><td>"+p+"</td><td>"+o+"</td>";a+="<td>"+j+"</td>";a+="<td>"+g+"</td>";if(h){if(j==successfulText){var c=[];c.push(noneText);c=c.concat(mObject.sortedGroupKeys);var m=fUNQ177(mObject.sortedGroupKeys,p,noneText);if(e){m=fUNQ174(k[l]["url"],noneText)}var b=fUNQ65(c,m,"imgGroupSelect"+l);b=b.replace(/<select name=[^\>]+/,"$&  onchange=fUNQ173("+l+") ");a+="<td>"+b+"</td>";imageData[l]["oldSelection"]=noneText;imageData[l]["error"]=successfulText}else{a+="<td></td>"}}d+="<tr>"+a+"</tr>"}$("#imageTable").html('<table id="mapList" class="table table-bordered table-condensed" style="width: 100%">'+d+"</table>");if(k.length>0){$("#imageTable").show()}if(h&&e){for(l=0;l<k.length;l++){fUNQ173(l)}}}function fUNQ173(a){var d=$("#imgGroupSelect"+a.toString()+" option:selected").attr("value");var b=imageData[a]["oldSelection"];imageData[a]["oldSelection"]=d;for(var c=0;c<imageData.length;c++){if(imageData[c]["error"]!=successfulText){continue}if(d!=noneText){if(c!=a){$("#imgGroupSelect"+c.toString()+' option[value="'+d+'"]').remove()}}if(b!=noneText){if(c!=a){$("#imgGroupSelect"+c.toString()).append('<option value="'+b+'">'+b+"</option>")}}}}function fUNQ174(c,a){for(var b in mObject.groupImageHash){if(mObject.groupImageHash[b]==c){return b}}return a}function fUNQ175(){if(mObject.groupImageHash===undefined||mObject.groupImageHash==null){mObject.groupImageHash={}}if(mObject.ImageDimensions===undefined||mObject.ImageDimensions==null){mObject.ImageDimensions={}}if(mObject.customImageSizes===undefined||mObject.customImageSizes==null){mObject.customImageSizes={}}if(mObject.CustomImages===undefined||mObject.CustomImages==null){mObject.CustomImages=[]}}function fUNQ176(){fUNQ175();var a=0;var d=$("#group_sel option:selected").attr("value");if(d==-1&&imageData!=null&&imageData.length==1){mObject.singleCustomImage=imageData[a]["url"];mObject.singleCustomImageWidth=imageData[a]["width"];mObject.singleCustomImageHeight=imageData[a]["height"];mObject.useCustomImages=true;mObject.showMarkerNumber=false;mObject.sortedGroupKeys=[];return}mObject.groupImageHash={};mObject.useCustomImages=false;if(imageData==null){return}for(a=0;a<imageData.length;a++){if(imageData[a]["error"]!=successfulText){continue}var b=$("#imgGroupSelect"+a.toString()+" option:selected").attr("value");imageData[a]["imgSelection"]=b;if(mObject.groupHash.hasOwnProperty(b)&&!mObject.groupImageHash.hasOwnProperty(b)){mObject.groupImageHash[b]=imageData[a]["url"];mObject.customImageSizes[b]=imageData[a]["url_small"];mObject.useCustomImages=true;mObject.ImageDimensions[b]={height:imageData[a]["height"],width:imageData[a]["width"]}}}var c=Object.keys(mObject.groupHash);for(a=0;a<c.length;a++){if(!mObject.groupImageHash.hasOwnProperty(c[a])){mObject.groupImageHash[c[a]]="/marker_images/image.png";mObject.customImageSizes[c[a]]=IMAGE_PATH+SMALL_IMAGE+IMG_LIST[0]+IMG_FILE_ENDING}}if(mObject.useCustomImages){for(a=0;a<mObject.sortedGroupKeys.length;a++){if(!mObject.groupImageHash.hasOwnProperty(mObject.sortedGroupKeys[a])){mObject.groupImageHash[b]=DEFAULT_IMAGE}}}}function fUNQ177(a,d,b){for(var c=0;c<a.length;c++){if(a[c].toLocaleLowerCase().replace(/ /g,"_")==d.replace(/.\w{2,4}$/,"")){return a[c]}}return b}function fUNQ178(){var a=$("#imgKey").val();$.ajax({type:"POST",url:"/util/existedUploadedFiles.php",data:({id:a}),cache:false,dataType:"json",success:function(d,c,b){fUNQ172(d.data,d.imgCount,true)},error:function(d,c,b){if(d.errorMessage){}else{}}})}function fUNQ179(b){var a=$("#imgKey").val();var c=$("#ek").val();var e={id:a,img:b};if(typeof EditingMap!="undefined"&&EditingMap){e={id:a,img:b,ek:c}}$.ajax({type:"POST",url:"/fileUpload/deleteImage.php",data:e,cache:false,dataType:"json",success:function(g,f,d){if(g.errorMessage){}if(g.status=="removed"){}else{}},error:function(g,f,d){if(g.errorMessage){}else{}}})}function fUNQ180(a){var c=imageData[a]["name"];var b=$("#imgKey").val();var e=$("#ek").val();var f={id:b,img:c};if(typeof EditingMap!="undefined"&&EditingMap){f={id:b,img:c,ek:e}}$.ajax({type:"POST",url:"/fileUpload/deleteImage.php",data:f,cache:false,dataType:"json",success:function(h,g,d){if(h.errorMessage){}if(h.status=="removed"){imageData.splice(a,1);imageCount--;fUNQ172(imageData,imageCount,false)}else{}},error:function(h,g,d){if(h.errorMessage){}else{}}})}function fUNQ181(){if(!((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined"))){return}var f="simpleVideoFrame";var e="Watch a sample video to see how easy mapping is.";var c="Hide (and stop) video";if(advancedMap){e="Watch a demo video to see how easy advanced mapping is.";f="advancedVideoFrame"}(function(){$(".youtube-player").each(function(){var g=$(this).attr("data-id");$(this).html('<div id="'+g+'_div">'+d(g)+"</div>");$("#"+g+"_div").click(function(){var j=$("#"+g+"_div");var h=$("#"+f);if(h.length==0){j.html(a(g))}})})})();function a(h){var g='<iframe src="//www.youtube.com/embed/'+h+'?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0" frameborder="0" id="'+f+'"></iframe>';return g}function d(g){return'<img class="youtube-thumb" src="//i.ytimg.com/vi/'+g+'/maxresdefault.jpg"><div class="play-button"></div>'}function b(){var g=document.createElement("iframe");g.setAttribute("src","//www.youtube.com/embed/"+this.parentNode.dataset.id+"?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0");g.setAttribute("frameborder","0");g.setAttribute("id",f);this.parentNode.replaceChild(g,this)}$("#demoVideoId").click(function(){var j=$("#demoVideoId").text();if(j===e){$("#demoVideoId").html(c);var h=$("#demoVideoDisplayAdvanced");if(advancedMap){var h=$("#demoVideoDisplayAdvanced");if(h.length>0){h.show()}}else{var h=$("#demoVideoDisplaySimple");if(h.length>0){h.show()}}}else{$("#demoVideoId").html(e);if(advancedMap){$("#demoVideoDisplayAdvanced").hide();if($("#advancedVideoFrame").length>0){var g=$("#advancedVideoFrame").attr("src").replace(/autoplay=1&/,"");$("#advancedVideoFrame").attr("src","");$("#advancedVideoFrame").attr("src",g)}}else{$("#demoVideoDisplaySimple").hide();if($("#simpleVideoFrame").length>0){var g=$("#simpleVideoFrame").attr("src").replace(/autoplay=1&/,"");$("#simpleVideoFrame").attr("src","");$("#simpleVideoFrame").attr("src",g)}}}});$("#demoVideoId").show();$("#demoVideoId").html(e)}function fUNQ182(){$("#toggleCustomizations").click(function(){if($(this).text()=="(hide)"){$(this).text("(show)");$("#customizationsDiv").hide()}else{$(this).text("(hide)");$("#customizationsDiv").show()}});$("#markerColor").change(function(){mObject.clusterHexColor=this.value;var a=IMG_HEX_COLORS.indexOf(mObject.clusterHexColor);if(a>=0&&a<IMG_LIST.length){mObject.clusterColor=IMG_LIST[a]}})}jQuery.extend({handleError:function(b,d,a,c){if(b.error){b.error(d,a,c)}else{if(d.responseText){console.log(d.responseText)}}},createUploadIframe:function(d,b){var a="jUploadFrame"+d;var c='<iframe id="'+a+'" name="'+a+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject){if(typeof b=="boolean"){c+=' src="javascript:false"'}else{if(typeof b=="string"){c+=' src="'+b+'"'}}}c+=" />";jQuery(c).appendTo(document.body);return jQuery("#"+a).get(0)},createUploadForm:function(a,j,d){var h="jUploadForm"+a;var c="jUploadFile"+a;var b=jQuery('<form  action="" method="POST" name="'+h+'" id="'+h+'" enctype="multipart/form-data"></form>');if(d){for(var e in d){jQuery('<input type="hidden" name="'+e+'" value="'+d[e]+'" />').appendTo(b)}}var f=jQuery("#"+j);var g=jQuery(f).clone();jQuery(f).attr("id",c);jQuery(f).before(g);jQuery(f).appendTo(b);jQuery(b).css("position","absolute");jQuery(b).css("top","-1200px");jQuery(b).css("left","-1200px");jQuery(b).appendTo("body");return b},ajaxFileUpload:function(l){l=jQuery.extend({},jQuery.ajaxSettings,l);var a=new Date().getTime();var b=jQuery.createUploadForm(a,l.fileElementId,(typeof(l.data)=="undefined"?false:l.data));var j=jQuery.createUploadIframe(a,l.secureuri);var h="jUploadFrame"+a;var k="jUploadForm"+a;if(l.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var c=false;var f={};if(l.global){jQuery.event.trigger("ajaxSend",[f,l])}var d=function(m){var q=document.getElementById(h);try{if(q.contentWindow){f.responseText=q.contentWindow.document.body?q.contentWindow.document.body.innerHTML:null;f.responseXML=q.contentWindow.document.XMLDocument?q.contentWindow.document.XMLDocument:q.contentWindow.document}else{if(q.contentDocument){f.responseText=q.contentDocument.document.body?q.contentDocument.document.body.innerHTML:null;f.responseXML=q.contentDocument.document.XMLDocument?q.contentDocument.document.XMLDocument:q.contentDocument.document}}}catch(p){jQuery.handleError(l,f,null,p)}if(f||m=="timeout"){c=true;var n;try{n=m!="timeout"?"success":"error";if(n!="error"){var o=jQuery.uploadHttpData(f,l.dataType);if(l.success){l.success(o,n)}if(l.global){jQuery.event.trigger("ajaxSuccess",[f,l])}}else{jQuery.handleError(l,f,n)}}catch(p){n="error";jQuery.handleError(l,f,n,p)}if(l.global){jQuery.event.trigger("ajaxComplete",[f,l])}if(l.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(l.complete){l.complete(f,n)}jQuery(q).unbind();setTimeout(function(){try{jQuery(q).remove();jQuery(b).remove()}catch(r){jQuery.handleError(l,f,null,r)}},100);f=null}};if(l.timeout>0){setTimeout(function(){if(!c){d("timeout")}},l.timeout)}try{var b=jQuery("#"+k);jQuery(b).attr("action",l.url);jQuery(b).attr("method","POST");jQuery(b).attr("target",h);if(b.encoding){jQuery(b).attr("encoding","multipart/form-data")}else{jQuery(b).attr("enctype","multipart/form-data")}jQuery(b).submit()}catch(g){jQuery.handleError(l,f,null,g)}jQuery("#"+h).load(d);return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}return data}});