var EuroCountryFormat=["de","gr","cz","dk","fi","fr","it","no","nl","pl","pt","se","es","ro","ch","mx","tr"];var myMapOptions=["Street","Terrain","Satellite","Hybrid"];var GOOGLE_MAPS_VERSION="";var MAX_PINS=50000;var MAX_FREE_GEO=250;var BASIC_GROUP_COUNT=10;var MAX_GROUPS=20;var MAX_FILTERS=12;var BASE_IMAGE_URL="http://images.easymapmaker.com";var CUSTOM_IMAGE_URL="http://www.easymapmaker.com";var CLOUD_FRONT_URL="//cdn.easymapmaker.com";var cdnUrl=CLOUD_FRONT_URL;var IMAGE_PATH="/marker_images/";var IMG_LIST=["red","blue","green","yellow","orange","purple","brown","pink","dark_green","pale_blue","dark_pink","royal_blue","blue_green","lime_green","pink_purple","gold","brown2","crimson","dark_gray","light_gray","mocassin"];var IMG_FILE_ENDING="_Marker.png";var IMG_HEX_COLORS=["FF776B","6B98FF","97EC7D","FFED5C","FD8D08","C89BFF","CB9D7C","FDABFF","01BF00","BCE3FF","E14F9E","4169E1","00FFFF","00FF00","CC0099","CCCC00","A52A2A","DC143C","A9A9A9","D3D3D3","FFE4B5"];var LANG_COLOR_LIST=["Red","Blue","Green","Yellow","Orange","Purple","Brown","Pink","Dark green","Pale blue","Dark pink","Royal Blue","Blue green","Lime green","Pink purple","Gold","Brown 2","Crimson","Dark gray","Light gray","Mocassin"];var DOT_IMAGE_ENDING="_nodot_Marker.png";var SMALL_IMAGE="small_";var DEFAULT_IMAGE="/marker_images/image.png";var DEFAULT_SHADOW="shadow.png";var DEFAULT_SHAPE={coord:[13,0,15,1,16,2,17,3,18,4,18,5,19,6,19,7,19,8,19,9,19,10,19,11,19,12,19,13,18,14,18,15,17,16,16,17,15,18,14,19,14,20,13,21,13,22,12,23,12,24,12,25,12,26,11,27,11,28,11,29,11,30,11,31,11,32,11,33,8,33,8,32,8,31,8,30,8,29,8,28,8,27,8,26,7,25,7,24,7,23,6,22,6,21,5,20,5,19,4,18,3,17,2,16,1,15,1,14,0,13,0,12,0,11,0,10,0,9,0,8,0,7,0,6,1,5,1,4,2,3,3,2,4,1,6,0,13,0],type:"poly"};var ALL_FILTER="All";var STRING_TYPE="string";var NUMBER_TYPE="number";var DOLLAR_TYPE="dollar";var EURO_TYPE="euro";var POUND_TYPE="pound";var selectedFilterValues=[];var multiSelectFilterValues=[];var activeMultiSelectFilter=-1;var userSettings={};userSettings.email=null;userSettings.title=null;userSettings.description=null;userSettings.protectionLevel=null;userSettings.alias=null;userSettings.view_count=null;userSettings.name=null;userSettings.autoDelete=null;userSettings.dataOnPage=null;userSettings.genKML=null;userSettings.imgDir=null;userSettings.mapLanguage="en";var mObject={};mObject.dataType=null;mObject.address=null;mObject.city=null;mObject.state=null;mObject.zip=null;mObject.country=null;mObject.lat=null;mObject.lng=null;mObject.title=null;mObject.web=null;mObject.image=null;mObject.email=null;mObject.group=null;mObject.mapType=null;mObject.pinLabel=null;mObject.addressPrettyName=null;mObject.cityPrettyName=null;mObject.statePrettyName=null;mObject.zipPrettyName=null;mObject.countryPrettyName=null;mObject.latPrettyName=null;mObject.lngPrettyName=null;mObject.titlePrettyName=null;mObject.webPrettyName=null;mObject.imagePrettyName=null;mObject.emailPrettyName=null;mObject.groupPrettyName=null;mObject.hideLatLong=true;mObject.markerTitle=false;mObject.regionCode="";mObject.regionCountry="Auto-Detect";mObject.showLabels=true;mObject.moveSingleMarker=false;mObject.emm_lat=-1;mObject.emm_lng=-1;mObject.emm_acc=-1;mObject.center_lat=-1000;mObject.center_lng=-1000;mObject.zoom=-1;mObject.customZoomAndCenter=null;mObject.selectedMapType="Street";mObject.displayDataOnPage=false;mObject.clustering=true;mObject.showMoreOptions=null;mObject.disAbleDynamicFilters=null;mObject.exportData=null;mObject.scrollWheel=false;mObject.zoomInSearching=null;mObject.zoomInLevel=null;mObject.mapLanguage="en";mObject.showMarkerNumbers=null;mObject.multiSelectFilters=null;mObject.showDirectionDescription=null;mObject.useGoogleMapsDirections=null;mObject.columnHeaderArray=[];mObject.headerDisplayOrderIdxs=[];mObject.noDisplayNames=[];mObject.groupHash={};mObject.sortedGroupKeys=[];mObject.groupImageHash={};mObject.groupCustomColorImageHash={};mObject.ImageDimensions={};mObject.StreetView=false;mObject.columnTypes=[];mObject.CircleWithRadius=false;mObject.CircleRadiusColumn=null;mObject.DefaultCircleRadius=0;mObject.CircleWithRadiusUnits="miles";mObject.filterListNames=[];mObject.filterListArray=[];mObject.filterListSortedKeyHash={};mObject.filterColumnIdxs=[];mObject.filterCounts=null;mObject.markerImageIdx=[];mObject.useCustomImages=null;mObject.CustomImages=[];mObject.customImageSizes={};mObject.singleCustomImage=null;mObject.singleCustomImageHeight=null;mObject.singleCustomImageWidth=null;mObject.customSearchText=null;mObject.clusterColor="red";mObject.clusterHexColor="FF776B";mObject.disableSearching=null;mObject.noSearchColumns=[];mObject.mobileSearchEnabled=null;mObject.centerLocationOnMap=null;var mapObject=$.extend(true,{},mObject);var editPageObject=$.extend(true,{},mObject);function isIgnoreSearchColumn(b,a){if(b==a.lat||b==a.lng||b==a.web||b==a.image){return true}if(a.noSearchColumns!=null&&a.noSearchColumns.indexOf(b)>=0){return true}return false}function isSelectedColumn(b,a){return(b==a.lat||b==a.lng||b==a.emm_acc||b==a.address||b==a.city||b==a.state||b==a.zip||b==a.country||b==a.title||b==a.web||b==a.image||b==a.email)}function urlizeUrl(a){if(a==null){return""}if(a.length>0&&!a.match(/^(https?|ftp):\/\//)){return"http://"+a}return a}
/*! jQuery UI - v1.10.3 - 2013-05-15
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.position.js, jquery.ui.autocomplete.js, jquery.ui.menu.js
* Copyright 2013 jQuery Foundation and other contributors Licensed MIT */
(function(b,f){var a=0,e=/^ui-id-\d+$/;b.ui=b.ui||{};b.extend(b.ui,{version:"1.10.3",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}});b.fn.extend({focus:(function(g){return function(h,j){return typeof h==="number"?this.each(function(){var k=this;setTimeout(function(){b(k).focus();if(j){j.call(k)}},h)}):g.apply(this,arguments)}})(b.fn.focus),scrollParent:function(){var g;if((b.ui.ie&&(/(static|relative)/).test(this.css("position")))||(/absolute/).test(this.css("position"))){g=this.parents().filter(function(){return(/(relative|absolute|fixed)/).test(b.css(this,"position"))&&(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}else{g=this.parents().filter(function(){return(/(auto|scroll)/).test(b.css(this,"overflow")+b.css(this,"overflow-y")+b.css(this,"overflow-x"))}).eq(0)}return(/fixed/).test(this.css("position"))||!g.length?b(document):g},zIndex:function(k){if(k!==f){return this.css("zIndex",k)}if(this.length){var h=b(this[0]),g,j;while(h.length&&h[0]!==document){g=h.css("position");if(g==="absolute"||g==="relative"||g==="fixed"){j=parseInt(h.css("zIndex"),10);if(!isNaN(j)&&j!==0){return j}}h=h.parent()}}return 0},uniqueId:function(){return this.each(function(){if(!this.id){this.id="ui-id-"+(++a)}})},removeUniqueId:function(){return this.each(function(){if(e.test(this.id)){b(this).removeAttr("id")}})}});function d(j,g){var l,k,h,m=j.nodeName.toLowerCase();if("area"===m){l=j.parentNode;k=l.name;if(!j.href||!k||l.nodeName.toLowerCase()!=="map"){return false}h=b("img[usemap=#"+k+"]")[0];return !!h&&c(h)}return(/input|select|textarea|button|object/.test(m)?!j.disabled:"a"===m?j.href||g:g)&&c(j)}function c(g){return b.expr.filters.visible(g)&&!b(g).parents().addBack().filter(function(){return b.css(this,"visibility")==="hidden"}).length}b.extend(b.expr[":"],{data:b.expr.createPseudo?b.expr.createPseudo(function(g){return function(h){return !!b.data(h,g)}}):function(j,h,g){return !!b.data(j,g[3])},focusable:function(g){return d(g,!isNaN(b.attr(g,"tabindex")))},tabbable:function(j){var g=b.attr(j,"tabindex"),h=isNaN(g);return(h||g>=0)&&d(j,!h)}});if(!b("<a>").outerWidth(1).jquery){b.each(["Width","Height"],function(j,g){var h=g==="Width"?["Left","Right"]:["Top","Bottom"],k=g.toLowerCase(),m={innerWidth:b.fn.innerWidth,innerHeight:b.fn.innerHeight,outerWidth:b.fn.outerWidth,outerHeight:b.fn.outerHeight};function l(p,o,n,q){b.each(h,function(){o-=parseFloat(b.css(p,"padding"+this))||0;if(n){o-=parseFloat(b.css(p,"border"+this+"Width"))||0}if(q){o-=parseFloat(b.css(p,"margin"+this))||0}});return o}b.fn["inner"+g]=function(n){if(n===f){return m["inner"+g].call(this)}return this.each(function(){b(this).css(k,l(this,n)+"px")})};b.fn["outer"+g]=function(n,o){if(typeof n!=="number"){return m["outer"+g].call(this,n)}return this.each(function(){b(this).css(k,l(this,n,true,o)+"px")})}})}if(!b.fn.addBack){b.fn.addBack=function(g){return this.add(g==null?this.prevObject:this.prevObject.filter(g))}}if(b("<a>").data("a-b","a").removeData("a-b").data("a-b")){b.fn.removeData=(function(g){return function(h){if(arguments.length){return g.call(this,b.camelCase(h))}else{return g.call(this)}}})(b.fn.removeData)}b.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase());b.support.selectstart="onselectstart" in document.createElement("div");b.fn.extend({disableSelection:function(){return this.bind((b.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(g){g.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}});b.extend(b.ui,{plugin:{add:function(h,j,l){var g,k=b.ui[h].prototype;for(g in l){k.plugins[g]=k.plugins[g]||[];k.plugins[g].push([j,l[g]])}},call:function(g,j,h){var k,l=g.plugins[j];if(!l||!g.element[0].parentNode||g.element[0].parentNode.nodeType===11){return}for(k=0;k<l.length;k++){if(g.options[l[k][0]]){l[k][1].apply(g.element,h)}}}},hasScroll:function(k,h){if(b(k).css("overflow")==="hidden"){return false}var g=(h&&h==="left")?"scrollLeft":"scrollTop",j=false;if(k[g]>0){return true}k[g]=1;j=(k[g]>0);k[g]=0;return j}})})(jQuery);(function(b,e){var a=0,d=Array.prototype.slice,c=b.cleanData;b.cleanData=function(f){for(var g=0,h;(h=f[g])!=null;g++){try{b(h).triggerHandler("remove")}catch(j){}}c(f)};b.widget=function(f,g,o){var l,m,j,n,h={},k=f.split(".")[0];f=f.split(".")[1];l=k+"-"+f;if(!o){o=g;g=b.Widget}b.expr[":"][l.toLowerCase()]=function(p){return !!b.data(p,l)};b[k]=b[k]||{};m=b[k][f];j=b[k][f]=function(p,q){if(!this._createWidget){return new j(p,q)}if(arguments.length){this._createWidget(p,q)}};b.extend(j,m,{version:o.version,_proto:b.extend({},o),_childConstructors:[]});n=new g();n.options=b.widget.extend({},n.options);b.each(o,function(q,p){if(!b.isFunction(p)){h[q]=p;return}h[q]=(function(){var r=function(){return g.prototype[q].apply(this,arguments)},s=function(t){return g.prototype[q].apply(this,t)};return function(){var v=this._super,t=this._superApply,u;this._super=r;this._superApply=s;u=p.apply(this,arguments);this._super=v;this._superApply=t;return u}})()});j.prototype=b.widget.extend(n,{widgetEventPrefix:m?n.widgetEventPrefix:f},h,{constructor:j,namespace:k,widgetName:f,widgetFullName:l});if(m){b.each(m._childConstructors,function(q,r){var p=r.prototype;b.widget(p.namespace+"."+p.widgetName,j,r._proto)});delete m._childConstructors}else{g._childConstructors.push(j)}b.widget.bridge(f,j)};b.widget.extend=function(l){var g=d.call(arguments,1),k=0,f=g.length,h,j;for(;k<f;k++){for(h in g[k]){j=g[k][h];if(g[k].hasOwnProperty(h)&&j!==e){if(b.isPlainObject(j)){l[h]=b.isPlainObject(l[h])?b.widget.extend({},l[h],j):b.widget.extend({},j)}else{l[h]=j}}}}return l};b.widget.bridge=function(g,f){var h=f.prototype.widgetFullName||g;b.fn[g]=function(l){var j=typeof l==="string",k=d.call(arguments,1),m=this;l=!j&&k.length?b.widget.extend.apply(null,[l].concat(k)):l;if(j){this.each(function(){var o,n=b.data(this,h);if(!n){return b.error("cannot call methods on "+g+" prior to initialization; attempted to call method '"+l+"'")}if(!b.isFunction(n[l])||l.charAt(0)==="_"){return b.error("no such method '"+l+"' for "+g+" widget instance")}o=n[l].apply(n,k);if(o!==n&&o!==e){m=o&&o.jquery?m.pushStack(o.get()):o;return false}})}else{this.each(function(){var n=b.data(this,h);if(n){n.option(l||{})._init()}else{b.data(this,h,new f(l,this))}})}return m}};b.Widget=function(){};b.Widget._childConstructors=[];b.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:false,create:null},_createWidget:function(f,g){g=b(g||this.defaultElement||this)[0];this.element=b(g);this.uuid=a++;this.eventNamespace="."+this.widgetName+this.uuid;this.options=b.widget.extend({},this.options,this._getCreateOptions(),f);this.bindings=b();this.hoverable=b();this.focusable=b();if(g!==this){b.data(g,this.widgetFullName,this);this._on(true,this.element,{remove:function(h){if(h.target===g){this.destroy()}}});this.document=b(g.style?g.ownerDocument:g.document||g);this.window=b(this.document[0].defaultView||this.document[0].parentWindow)}this._create();this._trigger("create",null,this._getCreateEventData());this._init()},_getCreateOptions:b.noop,_getCreateEventData:b.noop,_create:b.noop,_init:b.noop,destroy:function(){this._destroy();this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(b.camelCase(this.widgetFullName));this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled");this.bindings.unbind(this.eventNamespace);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")},_destroy:b.noop,widget:function(){return this.element},option:function(j,k){var f=j,l,h,g;if(arguments.length===0){return b.widget.extend({},this.options)}if(typeof j==="string"){f={};l=j.split(".");j=l.shift();if(l.length){h=f[j]=b.widget.extend({},this.options[j]);for(g=0;g<l.length-1;g++){h[l[g]]=h[l[g]]||{};h=h[l[g]]}j=l.pop();if(k===e){return h[j]===e?null:h[j]}h[j]=k}else{if(k===e){return this.options[j]===e?null:this.options[j]}f[j]=k}}this._setOptions(f);return this},_setOptions:function(f){var g;for(g in f){this._setOption(g,f[g])}return this},_setOption:function(f,g){this.options[f]=g;if(f==="disabled"){this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!g).attr("aria-disabled",g);this.hoverable.removeClass("ui-state-hover");this.focusable.removeClass("ui-state-focus")}return this},enable:function(){return this._setOption("disabled",false)},disable:function(){return this._setOption("disabled",true)},_on:function(j,h,g){var k,f=this;if(typeof j!=="boolean"){g=h;h=j;j=false}if(!g){g=h;h=this.element;k=this.widget()}else{h=k=b(h);this.bindings=this.bindings.add(h)}b.each(g,function(q,p){function n(){if(!j&&(f.options.disabled===true||b(this).hasClass("ui-state-disabled"))){return}return(typeof p==="string"?f[p]:p).apply(f,arguments)}if(typeof p!=="string"){n.guid=p.guid=p.guid||n.guid||b.guid++}var o=q.match(/^(\w+)\s*(.*)$/),m=o[1]+f.eventNamespace,l=o[2];if(l){k.delegate(l,m,n)}else{h.bind(m,n)}})},_off:function(g,f){f=(f||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace;g.unbind(f).undelegate(f)},_delay:function(j,h){function g(){return(typeof j==="string"?f[j]:j).apply(f,arguments)}var f=this;return setTimeout(g,h||0)},_hoverable:function(f){this.hoverable=this.hoverable.add(f);this._on(f,{mouseenter:function(g){b(g.currentTarget).addClass("ui-state-hover")},mouseleave:function(g){b(g.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(f){this.focusable=this.focusable.add(f);this._on(f,{focusin:function(g){b(g.currentTarget).addClass("ui-state-focus")},focusout:function(g){b(g.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(f,g,h){var l,k,j=this.options[f];h=h||{};g=b.Event(g);g.type=(f===this.widgetEventPrefix?f:this.widgetEventPrefix+f).toLowerCase();g.target=this.element[0];k=g.originalEvent;if(k){for(l in k){if(!(l in g)){g[l]=k[l]}}}this.element.trigger(g,h);return !(b.isFunction(j)&&j.apply(this.element[0],[g].concat(h))===false||g.isDefaultPrevented())}};b.each({show:"fadeIn",hide:"fadeOut"},function(g,f){b.Widget.prototype["_"+g]=function(k,j,m){if(typeof j==="string"){j={effect:j}}var l,h=!j?g:j===true||typeof j==="number"?f:j.effect||f;j=j||{};if(typeof j==="number"){j={duration:j}}l=!b.isEmptyObject(j);j.complete=m;if(j.delay){k.delay(j.delay)}if(l&&b.effects&&b.effects.effect[h]){k[g](j)}else{if(h!==g&&k[h]){k[h](j.duration,j.easing,m)}else{k.queue(function(n){b(this)[g]();if(m){m.call(k[0])}n()})}}}})})(jQuery);(function(e,c){e.ui=e.ui||{};var k,l=Math.max,p=Math.abs,n=Math.round,d=/left|center|right/,h=/top|center|bottom/,a=/[\+\-]\d+(\.[\d]+)?%?/,m=/^\w+/,b=/%$/,g=e.fn.position;function o(s,r,q){return[parseFloat(s[0])*(b.test(s[0])?r/100:1),parseFloat(s[1])*(b.test(s[1])?q/100:1)]}function j(q,r){return parseInt(e.css(q,r),10)||0}function f(r){var q=r[0];if(q.nodeType===9){return{width:r.width(),height:r.height(),offset:{top:0,left:0}}}if(e.isWindow(q)){return{width:r.width(),height:r.height(),offset:{top:r.scrollTop(),left:r.scrollLeft()}}}if(q.preventDefault){return{width:0,height:0,offset:{top:q.pageY,left:q.pageX}}}return{width:r.outerWidth(),height:r.outerHeight(),offset:r.offset()}}e.position={scrollbarWidth:function(){if(k!==c){return k}var r,q,t=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),s=t.children()[0];e("body").append(t);r=s.offsetWidth;t.css("overflow","scroll");q=s.offsetWidth;if(r===q){q=t[0].clientWidth}t.remove();return(k=r-q)},getScrollInfo:function(u){var t=u.isWindow?"":u.element.css("overflow-x"),s=u.isWindow?"":u.element.css("overflow-y"),r=t==="scroll"||(t==="auto"&&u.width<u.element[0].scrollWidth),q=s==="scroll"||(s==="auto"&&u.height<u.element[0].scrollHeight);return{width:q?e.position.scrollbarWidth():0,height:r?e.position.scrollbarWidth():0}},getWithinInfo:function(r){var s=e(r||window),q=e.isWindow(s[0]);return{element:s,isWindow:q,offset:s.offset()||{left:0,top:0},scrollLeft:s.scrollLeft(),scrollTop:s.scrollTop(),width:q?s.width():s.outerWidth(),height:q?s.height():s.outerHeight()}}};e.fn.position=function(A){if(!A||!A.of){return g.apply(this,arguments)}A=e.extend({},A);var B,x,v,z,u,q,w=e(A.of),t=e.position.getWithinInfo(A.within),r=e.position.getScrollInfo(t),y=(A.collision||"flip").split(" "),s={};q=f(w);if(w[0].preventDefault){A.at="left top"}x=q.width;v=q.height;z=q.offset;u=e.extend({},z);e.each(["my","at"],function(){var E=(A[this]||"").split(" "),D,C;if(E.length===1){E=d.test(E[0])?E.concat(["center"]):h.test(E[0])?["center"].concat(E):["center","center"]}E[0]=d.test(E[0])?E[0]:"center";E[1]=h.test(E[1])?E[1]:"center";D=a.exec(E[0]);C=a.exec(E[1]);s[this]=[D?D[0]:0,C?C[0]:0];A[this]=[m.exec(E[0])[0],m.exec(E[1])[0]]});if(y.length===1){y[1]=y[0]}if(A.at[0]==="right"){u.left+=x}else{if(A.at[0]==="center"){u.left+=x/2}}if(A.at[1]==="bottom"){u.top+=v}else{if(A.at[1]==="center"){u.top+=v/2}}B=o(s.at,x,v);u.left+=B[0];u.top+=B[1];return this.each(function(){var D,M,F=e(this),H=F.outerWidth(),E=F.outerHeight(),G=j(this,"marginLeft"),C=j(this,"marginTop"),L=H+G+j(this,"marginRight")+r.width,K=E+C+j(this,"marginBottom")+r.height,I=e.extend({},u),J=o(s.my,F.outerWidth(),F.outerHeight());if(A.my[0]==="right"){I.left-=H}else{if(A.my[0]==="center"){I.left-=H/2}}if(A.my[1]==="bottom"){I.top-=E}else{if(A.my[1]==="center"){I.top-=E/2}}I.left+=J[0];I.top+=J[1];if(!e.support.offsetFractions){I.left=n(I.left);I.top=n(I.top)}D={marginLeft:G,marginTop:C};e.each(["left","top"],function(O,N){if(e.ui.position[y[O]]){e.ui.position[y[O]][N](I,{targetWidth:x,targetHeight:v,elemWidth:H,elemHeight:E,collisionPosition:D,collisionWidth:L,collisionHeight:K,offset:[B[0]+J[0],B[1]+J[1]],my:A.my,at:A.at,within:t,elem:F})}});if(A.using){M=function(Q){var S=z.left-I.left,P=S+x-H,R=z.top-I.top,O=R+v-E,N={target:{element:w,left:z.left,top:z.top,width:x,height:v},element:{element:F,left:I.left,top:I.top,width:H,height:E},horizontal:P<0?"left":S>0?"right":"center",vertical:O<0?"top":R>0?"bottom":"middle"};if(x<H&&p(S+P)<x){N.horizontal="center"}if(v<E&&p(R+O)<v){N.vertical="middle"}if(l(p(S),p(P))>l(p(R),p(O))){N.important="horizontal"}else{N.important="vertical"}A.using.call(this,Q,N)}}F.offset(e.extend(I,{using:M}))})};e.ui.position={fit:{left:function(u,t){var s=t.within,w=s.isWindow?s.scrollLeft:s.offset.left,y=s.width,v=u.left-t.collisionPosition.marginLeft,x=w-v,r=v+t.collisionWidth-y-w,q;if(t.collisionWidth>y){if(x>0&&r<=0){q=u.left+x+t.collisionWidth-y-w;u.left+=x-q}else{if(r>0&&x<=0){u.left=w}else{if(x>r){u.left=w+y-t.collisionWidth}else{u.left=w}}}}else{if(x>0){u.left+=x}else{if(r>0){u.left-=r}else{u.left=l(u.left-v,u.left)}}}},top:function(t,s){var r=s.within,x=r.isWindow?r.scrollTop:r.offset.top,y=s.within.height,v=t.top-s.collisionPosition.marginTop,w=x-v,u=v+s.collisionHeight-y-x,q;if(s.collisionHeight>y){if(w>0&&u<=0){q=t.top+w+s.collisionHeight-y-x;t.top+=w-q}else{if(u>0&&w<=0){t.top=x}else{if(w>u){t.top=x+y-s.collisionHeight}else{t.top=x}}}}else{if(w>0){t.top+=w}else{if(u>0){t.top-=u}else{t.top=l(t.top-v,t.top)}}}}},flip:{left:function(w,v){var u=v.within,A=u.offset.left+u.scrollLeft,D=u.width,s=u.isWindow?u.scrollLeft:u.offset.left,x=w.left-v.collisionPosition.marginLeft,B=x-s,r=x+v.collisionWidth-D-s,z=v.my[0]==="left"?-v.elemWidth:v.my[0]==="right"?v.elemWidth:0,C=v.at[0]==="left"?v.targetWidth:v.at[0]==="right"?-v.targetWidth:0,t=-2*v.offset[0],q,y;if(B<0){q=w.left+z+C+t+v.collisionWidth-D-A;if(q<0||q<p(B)){w.left+=z+C+t}}else{if(r>0){y=w.left-v.collisionPosition.marginLeft+z+C+t-s;if(y>0||p(y)<r){w.left+=z+C+t}}}},top:function(v,u){var t=u.within,C=t.offset.top+t.scrollTop,D=t.height,q=t.isWindow?t.scrollTop:t.offset.top,x=v.top-u.collisionPosition.marginTop,z=x-q,w=x+u.collisionHeight-D-q,A=u.my[1]==="top",y=A?-u.elemHeight:u.my[1]==="bottom"?u.elemHeight:0,E=u.at[1]==="top"?u.targetHeight:u.at[1]==="bottom"?-u.targetHeight:0,s=-2*u.offset[1],B,r;if(z<0){r=v.top+y+E+s+u.collisionHeight-D-C;if((v.top+y+E+s)>z&&(r<0||r<p(z))){v.top+=y+E+s}}else{if(w>0){B=v.top-u.collisionPosition.marginTop+y+E+s-q;if((v.top+y+E+s)>w&&(B>0||p(B)<w)){v.top+=y+E+s}}}}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments);e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments);e.ui.position.fit.top.apply(this,arguments)}}};(function(){var u,w,r,t,s,q=document.getElementsByTagName("body")[0],v=document.createElement("div");u=document.createElement(q?"div":"body");r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"};if(q){e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"})}for(s in r){u.style[s]=r[s]}u.appendChild(v);w=q||document.documentElement;w.insertBefore(u,w.firstChild);v.style.cssText="position: absolute; left: 10.7432222px;";t=e(v).offset().left;e.support.offsetFractions=t>10&&t<11;u.innerHTML="";w.removeChild(u)})()}(jQuery));(function(a,b){var c=0;a.widget("ui.autocomplete",{version:"1.10.3",defaultElement:"<input>",options:{appendTo:null,autoFocus:false,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var f,d,g,j=this.element[0].nodeName.toLowerCase(),h=j==="textarea",e=j==="input";this.isMultiLine=h?true:e?false:this.element.prop("isContentEditable");this.valueMethod=this.element[h||e?"val":"text"];this.isNewMenu=true;this.element.addClass("ui-autocomplete-input").attr("autocomplete","off");this._on(this.element,{keydown:function(k){if(this.element.prop("readOnly")){f=true;g=true;d=true;return}f=false;g=false;d=false;var l=a.ui.keyCode;switch(k.keyCode){case l.PAGE_UP:f=true;this._move("previousPage",k);break;case l.PAGE_DOWN:f=true;this._move("nextPage",k);break;case l.UP:f=true;this._keyEvent("previous",k);break;case l.DOWN:f=true;this._keyEvent("next",k);break;case l.ENTER:case l.NUMPAD_ENTER:if(this.menu.active){f=true;k.preventDefault();this.menu.select(k)}break;case l.TAB:if(this.menu.active){this.menu.select(k)}break;case l.ESCAPE:if(this.menu.element.is(":visible")){this._value(this.term);this.close(k);k.preventDefault()}break;default:d=true;this._searchTimeout(k);break}},keypress:function(k){if(f){f=false;if(!this.isMultiLine||this.menu.element.is(":visible")){k.preventDefault()}return}if(d){return}var l=a.ui.keyCode;switch(k.keyCode){case l.PAGE_UP:this._move("previousPage",k);break;case l.PAGE_DOWN:this._move("nextPage",k);break;case l.UP:this._keyEvent("previous",k);break;case l.DOWN:this._keyEvent("next",k);break}},input:function(k){if(g){g=false;k.preventDefault();return}this._searchTimeout(k)},focus:function(){this.selectedItem=null;this.previous=this._value()},blur:function(k){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching);this.close(k);this._change(k)}});this._initSource();this.menu=a("<ul>").addClass("ui-autocomplete ui-front").appendTo(this._appendTo()).menu({role:null}).hide().data("ui-menu");this._on(this.menu.element,{mousedown:function(k){k.preventDefault();this.cancelBlur=true;this._delay(function(){delete this.cancelBlur});var l=this.menu.element[0];if(!a(k.target).closest(".ui-menu-item").length){this._delay(function(){var m=this;this.document.one("mousedown",function(n){if(n.target!==m.element[0]&&n.target!==l&&!a.contains(l,n.target)){m.close()}})})}},menufocus:function(l,m){if(this.isNewMenu){this.isNewMenu=false;if(l.originalEvent&&/^mouse/.test(l.originalEvent.type)){this.menu.blur();this.document.one("mousemove",function(){a(l.target).trigger(l.originalEvent)});return}}var k=m.item.data("ui-autocomplete-item");if(false!==this._trigger("focus",l,{item:k})){if(l.originalEvent&&/^key/.test(l.originalEvent.type)){this._value(k.value)}}else{this.liveRegion.text(k.value)}},menuselect:function(m,n){var l=n.item.data("ui-autocomplete-item"),k=this.previous;if(this.element[0]!==this.document[0].activeElement){this.element.focus();this.previous=k;this._delay(function(){this.previous=k;this.selectedItem=l})}if(false!==this._trigger("select",m,{item:l})){this._value(l.value)}this.term=this._value();this.close(m);this.selectedItem=l}});this.liveRegion=a("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertBefore(this.element);this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching);this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete");this.menu.element.remove();this.liveRegion.remove()},_setOption:function(d,e){this._super(d,e);if(d==="source"){this._initSource()}if(d==="appendTo"){this.menu.element.appendTo(this._appendTo())}if(d==="disabled"&&e&&this.xhr){this.xhr.abort()}},_appendTo:function(){var d=this.options.appendTo;if(d){d=d.jquery||d.nodeType?a(d):this.document.find(d).eq(0)}if(!d){d=this.element.closest(".ui-front")}if(!d.length){d=this.document[0].body}return d},_initSource:function(){var f,d,e=this;if(a.isArray(this.options.source)){f=this.options.source;this.source=function(h,g){g(a.ui.autocomplete.filter(f,h.term))}}else{if(typeof this.options.source==="string"){d=this.options.source;this.source=function(h,g){if(e.xhr){e.xhr.abort()}e.xhr=a.ajax({url:d,data:h,dataType:"json",success:function(j){g(j)},error:function(){g([])}})}}else{this.source=this.options.source}}},_searchTimeout:function(d){clearTimeout(this.searching);this.searching=this._delay(function(){if(this.term!==this._value()){this.selectedItem=null;this.search(null,d)}},this.options.delay)},search:function(e,d){e=e!=null?e:this._value();this.term=this._value();if(e.length<this.options.minLength){return this.close(d)}if(this._trigger("search",d)===false){return}return this._search(e)},_search:function(d){this.pending++;this.element.addClass("ui-autocomplete-loading");this.cancelSearch=false;this.source({term:d},this._response())},_response:function(){var e=this,d=++c;return function(f){if(d===c){e.__response(f)}e.pending--;if(!e.pending){e.element.removeClass("ui-autocomplete-loading")}}},__response:function(d){if(d){d=this._normalize(d)}this._trigger("response",null,{content:d});if(!this.options.disabled&&d&&d.length&&!this.cancelSearch){this._suggest(d);this._trigger("open")}else{this._close()}},close:function(d){this.cancelSearch=true;this._close(d)},_close:function(d){if(this.menu.element.is(":visible")){this.menu.element.hide();this.menu.blur();this.isNewMenu=true;this._trigger("close",d)}},_change:function(d){if(this.previous!==this._value()){this._trigger("change",d,{item:this.selectedItem})}},_normalize:function(d){if(d.length&&d[0].label&&d[0].value){return d}return a.map(d,function(e){if(typeof e==="string"){return{label:e,value:e}}return a.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(d){var e=this.menu.element.empty();this._renderMenu(e,d);this.isNewMenu=true;this.menu.refresh();e.show();this._resizeMenu();e.position(a.extend({of:this.element},this.options.position));if(this.options.autoFocus){this.menu.next()}},_resizeMenu:function(){var d=this.menu.element;d.outerWidth(Math.max(d.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,d){var f=this;a.each(d,function(g,h){f._renderItemData(e,h)})},_renderItemData:function(d,e){return this._renderItem(d,e).data("ui-autocomplete-item",e)},_renderItem:function(d,e){return a("<li>").append(a("<a>").text(e.label)).appendTo(d)},_move:function(e,d){if(!this.menu.element.is(":visible")){this.search(null,d);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term);this.menu.blur();return}this.menu[e](d)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,d){if(!this.isMultiLine||this.menu.element.is(":visible")){this._move(e,d);d.preventDefault()}}});a.extend(a.ui.autocomplete,{escapeRegex:function(d){return d.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(f,d){var e=new RegExp(a.ui.autocomplete.escapeRegex(d),"i");return a.grep(f,function(g){return e.test(g.label||g.value||g)})}});a.widget("ui.autocomplete",a.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(d){return d+(d>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var d;this._superApply(arguments);if(this.options.disabled||this.cancelSearch){return}if(e&&e.length){d=this.options.messages.results(e.length)}else{d=this.options.messages.noResults}this.liveRegion.text(d)}})}(jQuery));(function(a,b){a.widget("ui.menu",{version:"1.10.3",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element;this.mouseHandled=false;this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,a.proxy(function(c){if(this.options.disabled){c.preventDefault()}},this));if(this.options.disabled){this.element.addClass("ui-state-disabled").attr("aria-disabled","true")}this._on({"mousedown .ui-menu-item > a":function(c){c.preventDefault()},"click .ui-state-disabled > a":function(c){c.preventDefault()},"click .ui-menu-item:has(a)":function(c){var d=a(c.target).closest(".ui-menu-item");if(!this.mouseHandled&&d.not(".ui-state-disabled").length){this.mouseHandled=true;this.select(c);if(d.has(".ui-menu").length){this.expand(c)}else{if(!this.element.is(":focus")){this.element.trigger("focus",[true]);if(this.active&&this.active.parents(".ui-menu").length===1){clearTimeout(this.timer)}}}}},"mouseenter .ui-menu-item":function(c){var d=a(c.currentTarget);d.siblings().children(".ui-state-active").removeClass("ui-state-active");this.focus(c,d)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,c){var d=this.active||this.element.children(".ui-menu-item").eq(0);if(!c){this.focus(e,d)}},blur:function(c){this._delay(function(){if(!a.contains(this.element[0],this.document[0].activeElement)){this.collapseAll(c)}})},keydown:"_keydown"});this.refresh();this._on(this.document,{click:function(c){if(!a(c.target).closest(".ui-menu").length){this.collapseAll(c)}this.mouseHandled=false}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show();this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var c=a(this);if(c.data("ui-menu-submenu-carat")){c.remove()}});this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(j){var d,h,k,g,f,c=true;function e(l){return l.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}switch(j.keyCode){case a.ui.keyCode.PAGE_UP:this.previousPage(j);break;case a.ui.keyCode.PAGE_DOWN:this.nextPage(j);break;case a.ui.keyCode.HOME:this._move("first","first",j);break;case a.ui.keyCode.END:this._move("last","last",j);break;case a.ui.keyCode.UP:this.previous(j);break;case a.ui.keyCode.DOWN:this.next(j);break;case a.ui.keyCode.LEFT:this.collapse(j);break;case a.ui.keyCode.RIGHT:if(this.active&&!this.active.is(".ui-state-disabled")){this.expand(j)}break;case a.ui.keyCode.ENTER:case a.ui.keyCode.SPACE:this._activate(j);break;case a.ui.keyCode.ESCAPE:this.collapse(j);break;default:c=false;h=this.previousFilter||"";k=String.fromCharCode(j.keyCode);g=false;clearTimeout(this.filterTimer);if(k===h){g=true}else{k=h+k}f=new RegExp("^"+e(k),"i");d=this.activeMenu.children(".ui-menu-item").filter(function(){return f.test(a(this).children("a").text())});d=g&&d.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):d;if(!d.length){k=String.fromCharCode(j.keyCode);f=new RegExp("^"+e(k),"i");d=this.activeMenu.children(".ui-menu-item").filter(function(){return f.test(a(this).children("a").text())})}if(d.length){this.focus(j,d);if(d.length>1){this.previousFilter=k;this.filterTimer=this._delay(function(){delete this.previousFilter},1000)}else{delete this.previousFilter}}else{delete this.previousFilter}}if(c){j.preventDefault()}},_activate:function(c){if(!this.active.is(".ui-state-disabled")){if(this.active.children("a[aria-haspopup='true']").length){this.expand(c)}else{this.select(c)}}},refresh:function(){var e,d=this.options.icons.submenu,c=this.element.find(this.options.menus);c.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var h=a(this),g=h.prev("a"),f=a("<span>").addClass("ui-menu-icon ui-icon "+d).data("ui-menu-submenu-carat",true);g.attr("aria-haspopup","true").prepend(f);h.attr("aria-labelledby",g.attr("id"))});e=c.add(this.element);e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()});e.children(":not(.ui-menu-item)").each(function(){var f=a(this);if(!/[^\-\u2014\u2013\s]/.test(f.text())){f.addClass("ui-widget-content ui-menu-divider")}});e.children(".ui-state-disabled").attr("aria-disabled","true");if(this.active&&!a.contains(this.element[0],this.active[0])){this.blur()}},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(c,d){if(c==="icons"){this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(d.submenu)}this._super(c,d)},focus:function(d,c){var f,e;this.blur(d,d&&d.type==="focus");this._scrollIntoView(c);this.active=c.first();e=this.active.children("a").addClass("ui-state-focus");if(this.options.role){this.element.attr("aria-activedescendant",e.attr("id"))}this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active");if(d&&d.type==="keydown"){this._close()}else{this.timer=this._delay(function(){this._close()},this.delay)}f=c.children(".ui-menu");if(f.length&&(/^mouse/.test(d.type))){this._startOpening(f)}this.activeMenu=c.parent();this._trigger("focus",d,{item:c})},_scrollIntoView:function(f){var j,e,g,c,d,h;if(this._hasScroll()){j=parseFloat(a.css(this.activeMenu[0],"borderTopWidth"))||0;e=parseFloat(a.css(this.activeMenu[0],"paddingTop"))||0;g=f.offset().top-this.activeMenu.offset().top-j-e;c=this.activeMenu.scrollTop();d=this.activeMenu.height();h=f.height();if(g<0){this.activeMenu.scrollTop(c+g)}else{if(g+h>d){this.activeMenu.scrollTop(c+g-d+h)}}}},blur:function(d,c){if(!c){clearTimeout(this.timer)}if(!this.active){return}this.active.children("a").removeClass("ui-state-focus");this.active=null;this._trigger("blur",d,{item:this.active})},_startOpening:function(c){clearTimeout(this.timer);if(c.attr("aria-hidden")!=="true"){return}this.timer=this._delay(function(){this._close();this._open(c)},this.delay)},_open:function(d){var c=a.extend({of:this.active},this.options.position);clearTimeout(this.timer);this.element.find(".ui-menu").not(d.parents(".ui-menu")).hide().attr("aria-hidden","true");d.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(c)},collapseAll:function(d,c){clearTimeout(this.timer);this.timer=this._delay(function(){var e=c?this.element:a(d&&d.target).closest(this.element.find(".ui-menu"));if(!e.length){e=this.element}this._close(e);this.blur(d);this.activeMenu=e},this.delay)},_close:function(c){if(!c){c=this.active?this.active.parent():this.element}c.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(d){var c=this.active&&this.active.parent().closest(".ui-menu-item",this.element);if(c&&c.length){this._close();this.focus(d,c)}},expand:function(d){var c=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();if(c&&c.length){this._open(c.parent());this._delay(function(){this.focus(d,c)})}},next:function(c){this._move("next","first",c)},previous:function(c){this._move("prev","last",c)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(f,d,e){var c;if(this.active){if(f==="first"||f==="last"){c=this.active[f==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1)}else{c=this.active[f+"All"](".ui-menu-item").eq(0)}}if(!c||!c.length||!this.active){c=this.activeMenu.children(".ui-menu-item")[d]()}this.focus(e,c)},nextPage:function(e){var d,f,c;if(!this.active){this.next(e);return}if(this.isLastItem()){return}if(this._hasScroll()){f=this.active.offset().top;c=this.element.height();this.active.nextAll(".ui-menu-item").each(function(){d=a(this);return d.offset().top-f-c<0});this.focus(e,d)}else{this.focus(e,this.activeMenu.children(".ui-menu-item")[!this.active?"first":"last"]())}},previousPage:function(e){var d,f,c;if(!this.active){this.next(e);return}if(this.isFirstItem()){return}if(this._hasScroll()){f=this.active.offset().top;c=this.element.height();this.active.prevAll(".ui-menu-item").each(function(){d=a(this);return d.offset().top-f+c>0});this.focus(e,d)}else{this.focus(e,this.activeMenu.children(".ui-menu-item").first())}},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(c){this.active=this.active||a(c.target).closest(".ui-menu-item");var d={item:this.active};if(!this.active.has(".ui-menu").length){this.collapseAll(c,true)}this._trigger("select",c,d)}})}(jQuery));!function(d){var c='[data-dismiss="alert"]',b=function(e){d(e).on("click",c,this.close)};b.prototype.close=function(k){var j=d(this),g=j.attr("data-target"),h;if(!g){g=j.attr("href");g=g&&g.replace(/.*(?=#[^\s]*$)/,"")}h=d(g);k&&k.preventDefault();h.length||(h=j.hasClass("alert")?j:j.parent());h.trigger(k=d.Event("close"));if(k.isDefaultPrevented()){return}h.removeClass("in");function f(){h.trigger("closed").remove()}d.support.transition&&h.hasClass("fade")?h.on(d.support.transition.end,f):f()};var a=d.fn.alert;d.fn.alert=function(e){return this.each(function(){var g=d(this),f=g.data("alert");if(!f){g.data("alert",(f=new b(this)))}if(typeof e=="string"){f[e].call(g)}})};d.fn.alert.Constructor=b;d.fn.alert.noConflict=function(){d.fn.alert=a;return this};d(document).on("click.alert.data-api",c,b.prototype.close)}(window.jQuery);!function(c){var b=function(e,d){this.options=d;this.$element=c(e).delegate('[data-dismiss="modal"]',"click.dismiss.modal",c.proxy(this.hide,this));this.options.remote&&this.$element.find(".modal-body").load(this.options.remote)};b.prototype={constructor:b,toggle:function(){return this[!this.isShown?"show":"hide"]()},show:function(){var d=this,f=c.Event("show");this.$element.trigger(f);if(this.isShown||f.isDefaultPrevented()){return}this.isShown=true;this.escape();this.backdrop(function(){var e=c.support.transition&&d.$element.hasClass("fade");if(!d.$element.parent().length){d.$element.appendTo(document.body)}d.$element.show();if(e){d.$element[0].offsetWidth}d.$element.addClass("in").attr("aria-hidden",false);d.enforceFocus();e?d.$element.one(c.support.transition.end,function(){d.$element.focus().trigger("shown")}):d.$element.focus().trigger("shown")})},hide:function(f){f&&f.preventDefault();var d=this;f=c.Event("hide");this.$element.trigger(f);if(!this.isShown||f.isDefaultPrevented()){return}this.isShown=false;this.escape();c(document).off("focusin.modal");this.$element.removeClass("in").attr("aria-hidden",true);c.support.transition&&this.$element.hasClass("fade")?this.hideWithTransition():this.hideModal()},enforceFocus:function(){var d=this;c(document).on("focusin.modal",function(f){if(d.$element[0]!==f.target&&!d.$element.has(f.target).length){d.$element.focus()}})},escape:function(){var d=this;if(this.isShown&&this.options.keyboard){this.$element.on("keyup.dismiss.modal",function(f){f.which==27&&d.hide()})}else{if(!this.isShown){this.$element.off("keyup.dismiss.modal")}}},hideWithTransition:function(){var d=this,e=setTimeout(function(){d.$element.off(c.support.transition.end);d.hideModal()},500);this.$element.one(c.support.transition.end,function(){clearTimeout(e);d.hideModal()})},hideModal:function(){var d=this;this.$element.hide();this.backdrop(function(){d.removeBackdrop();d.$element.trigger("hidden")})},removeBackdrop:function(){this.$backdrop&&this.$backdrop.remove();this.$backdrop=null},backdrop:function(g){var f=this,e=this.$element.hasClass("fade")?"fade":"";if(this.isShown&&this.options.backdrop){var d=c.support.transition&&e;this.$backdrop=c('<div class="modal-backdrop '+e+'" />').appendTo(document.body);this.$backdrop.click(this.options.backdrop=="static"?c.proxy(this.$element[0].focus,this.$element[0]):c.proxy(this.hide,this));if(d){this.$backdrop[0].offsetWidth}this.$backdrop.addClass("in");if(!g){return}d?this.$backdrop.one(c.support.transition.end,g):g()}else{if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass("in");c.support.transition&&this.$element.hasClass("fade")?this.$backdrop.one(c.support.transition.end,g):g()}else{if(g){g()}}}}};var a=c.fn.modal;c.fn.modal=function(d){return this.each(function(){var g=c(this),f=g.data("modal"),e=c.extend({},c.fn.modal.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("modal",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}else{if(e.show){f.show()}}})};c.fn.modal.defaults={backdrop:true,keyboard:true,show:true};c.fn.modal.Constructor=b;c.fn.modal.noConflict=function(){c.fn.modal=a;return this};c(document).on("click.modal.data-api",'[data-toggle="modal"]',function(j){var h=c(this),f=h.attr("href"),d=c(h.attr("data-target")||(f&&f.replace(/.*(?=#[^\s]+$)/,""))),g=d.data("modal")?"toggle":c.extend({remote:!/#/.test(f)&&f},d.data(),h.data());j.preventDefault();d.modal(g).one("hide",function(){h.focus()})})}(window.jQuery);!function(c){var b=function(e,d){this.init("tooltip",e,d)};b.prototype={constructor:b,init:function(k,h,f){var l,d,j,e,g;this.type=k;this.$element=c(h);this.options=this.getOptions(f);this.enabled=true;j=this.options.trigger.split(" ");for(g=j.length;g--;){e=j[g];if(e=="click"){this.$element.on("click."+this.type,this.options.selector,c.proxy(this.toggle,this))}else{if(e!="manual"){l=e=="hover"?"mouseenter":"focus";d=e=="hover"?"mouseleave":"blur";this.$element.on(l+"."+this.type,this.options.selector,c.proxy(this.enter,this));this.$element.on(d+"."+this.type,this.options.selector,c.proxy(this.leave,this))}}}this.options.selector?(this._options=c.extend({},this.options,{trigger:"manual",selector:""})):this.fixTitle()},getOptions:function(d){d=c.extend({},c.fn[this.type].defaults,this.$element.data(),d);if(d.delay&&typeof d.delay=="number"){d.delay={show:d.delay,hide:d.delay}}return d},enter:function(h){var g=c.fn[this.type].defaults,f={},d;this._options&&c.each(this._options,function(e,j){if(g[e]!=j){f[e]=j}},this);d=c(h.currentTarget)[this.type](f).data(this.type);if(!d.options.delay||!d.options.delay.show){return d.show()}clearTimeout(this.timeout);d.hoverState="in";this.timeout=setTimeout(function(){if(d.hoverState=="in"){d.show()}},d.options.delay.show)},leave:function(f){var d=c(f.currentTarget)[this.type](this._options).data(this.type);if(this.timeout){clearTimeout(this.timeout)}if(!d.options.delay||!d.options.delay.hide){return d.hide()}d.hoverState="out";this.timeout=setTimeout(function(){if(d.hoverState=="out"){d.hide()}},d.options.delay.hide)},show:function(){var j,l,g,k,d,h,f=c.Event("show");if(this.hasContent()&&this.enabled){this.$element.trigger(f);if(f.isDefaultPrevented()){return}j=this.tip();this.setContent();if(this.options.animation){j.addClass("fade")}d=typeof this.options.placement=="function"?this.options.placement.call(this,j[0],this.$element[0]):this.options.placement;j.detach().css({top:0,left:0,display:"block"});this.options.container?j.appendTo(this.options.container):j.insertAfter(this.$element);l=this.getPosition();g=j[0].offsetWidth;k=j[0].offsetHeight;switch(d){case"bottom":h={top:l.top+l.height,left:l.left+l.width/2-g/2};break;case"top":h={top:l.top-k,left:l.left+l.width/2-g/2};break;case"left":h={top:l.top+l.height/2-k/2,left:l.left-g};break;case"right":h={top:l.top+l.height/2-k/2,left:l.left+l.width};break}this.applyPlacement(h,d);this.$element.trigger("shown")}},applyPlacement:function(g,h){var j=this.tip(),e=j[0].offsetWidth,m=j[0].offsetHeight,d,k,l,f;j.offset(g).addClass(h).addClass("in");d=j[0].offsetWidth;k=j[0].offsetHeight;if(h=="top"&&k!=m){g.top=g.top+m-k;f=true}if(h=="bottom"||h=="top"){l=0;if(g.left<0){l=g.left*-2;g.left=0;j.offset(g);d=j[0].offsetWidth;k=j[0].offsetHeight}this.replaceArrow(l-e+d,d,"left")}else{this.replaceArrow(k-m,k,"top")}if(f){j.offset(g)}},replaceArrow:function(f,e,d){this.arrow().css(d,f?(50*(1-f/e)+"%"):"")},setContent:function(){var e=this.tip(),d=this.getTitle();e.find(".tooltip-inner")[this.options.html?"html":"text"](d);e.removeClass("fade in top bottom left right")},hide:function(){var d=this,g=this.tip(),f=c.Event("hide");this.$element.trigger(f);if(f.isDefaultPrevented()){return}g.removeClass("in");function h(){var e=setTimeout(function(){g.off(c.support.transition.end).detach()},500);g.one(c.support.transition.end,function(){clearTimeout(e);g.detach()})}c.support.transition&&this.$tip.hasClass("fade")?h():g.detach();this.$element.trigger("hidden");return this},fixTitle:function(){var d=this.$element;if(d.attr("title")||typeof(d.attr("data-original-title"))!="string"){d.attr("data-original-title",d.attr("title")||"").attr("title","")}},hasContent:function(){return this.getTitle()},getPosition:function(){var d=this.$element[0];return c.extend({},(typeof d.getBoundingClientRect=="function")?d.getBoundingClientRect():{width:d.offsetWidth,height:d.offsetHeight},this.$element.offset())},getTitle:function(){var f,d=this.$element,e=this.options;f=d.attr("data-original-title")||(typeof e.title=="function"?e.title.call(d[0]):e.title);return f},tip:function(){return this.$tip=this.$tip||c(this.options.template)},arrow:function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},validate:function(){if(!this.$element[0].parentNode){this.hide();this.$element=null;this.options=null}},enable:function(){this.enabled=true},disable:function(){this.enabled=false},toggleEnabled:function(){this.enabled=!this.enabled},toggle:function(f){var d=f?c(f.currentTarget)[this.type](this._options).data(this.type):this;d.tip().hasClass("in")?d.hide():d.show()},destroy:function(){this.hide().$element.off("."+this.type).removeData(this.type)}};var a=c.fn.tooltip;c.fn.tooltip=function(d){return this.each(function(){var g=c(this),f=g.data("tooltip"),e=typeof d=="object"&&d;if(!f){g.data("tooltip",(f=new b(this,e)))}if(typeof d=="string"){f[d]()}})};c.fn.tooltip.Constructor=b;c.fn.tooltip.defaults={animation:true,placement:"top",selector:false,template:'<div class="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:false,container:false};c.fn.tooltip.noConflict=function(){c.fn.tooltip=a;return this}}(window.jQuery);!function(c){var b=function(e,d){this.$element=c(e);this.options=c.extend({},c.fn.button.defaults,d)};b.prototype.setState=function(g){var j="disabled",e=this.$element,f=e.data(),h=e.is("input")?"val":"html";g=g+"Text";f.resetText||e.data("resetText",e[h]());e[h](f[g]||this.options[g]);setTimeout(function(){g=="loadingText"?e.addClass(j).attr(j,j):e.removeClass(j).removeAttr(j)},0)};b.prototype.toggle=function(){var d=this.$element.closest('[data-toggle="buttons-radio"]');d&&d.find(".active").removeClass("active");this.$element.toggleClass("active")};var a=c.fn.button;c.fn.button=function(d){return this.each(function(){var g=c(this),f=g.data("button"),e=typeof d=="object"&&d;if(!f){g.data("button",(f=new b(this,e)))}if(d=="toggle"){f.toggle()}else{if(d){f.setState(d)}}})};c.fn.button.defaults={loadingText:"loading..."};c.fn.button.Constructor=b;c.fn.button.noConflict=function(){c.fn.button=a;return this};c(document).on("click.button.data-api","[data-toggle^=button]",function(f){var d=c(f.target);if(!d.hasClass("btn")){d=d.closest(".btn")}d.button("toggle")})}(window.jQuery);!function(a){a(function(){a.support.transition=(function(){var b=(function(){var e=document.createElement("bootstrap"),d={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},c;for(c in d){if(e.style[c]!==undefined){return d[c]}}}());return b&&{end:b}})()})}(window.jQuery);!function(b){var c=function(e,d){this.$element=b(e);this.options=b.extend({},b.fn.collapse.defaults,d);if(this.options.parent){this.$parent=b(this.options.parent)}this.options.toggle&&this.toggle()};c.prototype={constructor:c,dimension:function(){var d=this.$element.hasClass("width");return d?"width":"height"},show:function(){var g,d,f,e;if(this.transitioning||this.$element.hasClass("in")){return}g=this.dimension();d=b.camelCase(["scroll",g].join("-"));f=this.$parent&&this.$parent.find("> .accordion-group > .in");if(f&&f.length){e=f.data("collapse");if(e&&e.transitioning){return}f.collapse("hide");e||f.data("collapse",null)}this.$element[g](0);this.transition("addClass",b.Event("show"),"shown");b.support.transition&&this.$element[g](this.$element[0][d])},hide:function(){var d;if(this.transitioning||!this.$element.hasClass("in")){return}d=this.dimension();this.reset(this.$element[d]());this.transition("removeClass",b.Event("hide"),"hidden");this.$element[d](0)},reset:function(d){var e=this.dimension();this.$element.removeClass("collapse")[e](d||"auto")[0].offsetWidth;this.$element[d!==null?"addClass":"removeClass"]("collapse");return this},transition:function(h,e,f){var g=this,d=function(){if(e.type=="show"){g.reset()}g.transitioning=0;g.$element.trigger(f)};this.$element.trigger(e);if(e.isDefaultPrevented()){return}this.transitioning=1;this.$element[h]("in");b.support.transition&&this.$element.hasClass("collapse")?this.$element.one(b.support.transition.end,d):d()},toggle:function(){this[this.$element.hasClass("in")?"hide":"show"]()}};var a=b.fn.collapse;b.fn.collapse=function(d){return this.each(function(){var g=b(this),f=g.data("collapse"),e=b.extend({},b.fn.collapse.defaults,g.data(),typeof d=="object"&&d);if(!f){g.data("collapse",(f=new c(this,e)))}if(typeof d=="string"){f[d]()}})};b.fn.collapse.defaults={toggle:true};b.fn.collapse.Constructor=c;b.fn.collapse.noConflict=function(){b.fn.collapse=a;return this};b(document).on("click.collapse.data-api","[data-toggle=collapse]",function(j){var h=b(this),d,g=h.attr("data-target")||j.preventDefault()||(d=h.attr("href"))&&d.replace(/.*(?=#[^\s]+$)/,""),f=b(g).data("collapse")?"toggle":h.data();h[b(g).hasClass("in")?"addClass":"removeClass"]("collapsed");b(g).collapse(f)})}(window.jQuery);!function(f){var b="[data-toggle=dropdown]",a=function(h){var g=f(h).on("click.dropdown.data-api",this.toggle);f("html").on("click.dropdown.data-api",function(){g.parent().removeClass("open")})};a.prototype={constructor:a,toggle:function(k){var j=f(this),h,g;if(j.is(".disabled, :disabled")){return}h=e(j);g=h.hasClass("open");d();if(!g){if("ontouchstart" in document.documentElement){f('<div class="dropdown-backdrop"/>').insertBefore(f(this)).on("click",d)}h.toggleClass("open")}j.focus();return false},keydown:function(m){var l,n,g,k,j,h;if(!/(38|40|27)/.test(m.keyCode)){return}l=f(this);m.preventDefault();m.stopPropagation();if(l.is(".disabled, :disabled")){return}k=e(l);j=k.hasClass("open");if(!j||(j&&m.keyCode==27)){if(m.which==27){k.find(b).focus()}return l.click()}n=f("[role=menu] li:not(.divider):visible a",k);if(!n.length){return}h=n.index(n.filter(":focus"));if(m.keyCode==38&&h>0){h--}if(m.keyCode==40&&h<n.length-1){h++}if(!~h){h=0}n.eq(h).focus()}};function d(){f(".dropdown-backdrop").remove();f(b).each(function(){e(f(this)).removeClass("open")})}function e(j){var g=j.attr("data-target"),h;if(!g){g=j.attr("href");g=g&&/#/.test(g)&&g.replace(/.*(?=#[^\s]*$)/,"")}h=g&&f(g);if(!h||!h.length){h=j.parent()}return h}var c=f.fn.dropdown;f.fn.dropdown=function(g){return this.each(function(){var j=f(this),h=j.data("dropdown");if(!h){j.data("dropdown",(h=new a(this)))}if(typeof g=="string"){h[g].call(j)}})};f.fn.dropdown.Constructor=a;f.fn.dropdown.noConflict=function(){f.fn.dropdown=c;return this};f(document).on("click.dropdown.data-api",d).on("click.dropdown.data-api",".dropdown form",function(g){g.stopPropagation()}).on("click.dropdown.data-api",b,a.prototype.toggle).on("keydown.dropdown.data-api",b+", [role=menu]",a.prototype.keydown)}(window.jQuery);if(typeof JSON!=="object"){JSON={}}(function(){function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else{if(typeof space==="string"){indent=space}}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}}());function ClusterIcon(a,b){a.getMarkerClusterer().extend(ClusterIcon,google.maps.OverlayView);this.cluster_=a;this.className_=a.getMarkerClusterer().getClusterClass();this.styles_=b;this.center_=null;this.div_=null;this.shadowDiv_=null;this.sums_=null;this.visible_=false;this.setMap(a.getMap())}ClusterIcon.prototype.onAdd=function(){var c=this;var a;var b;this.div_=document.createElement("div");this.div_.className=this.className_;if(this.visible_){this.show()}this.getPanes().overlayMouseTarget.appendChild(this.div_);google.maps.event.addListener(this.getMap(),"bounds_changed",function(){b=a});google.maps.event.addDomListener(this.div_,"mousedown",function(){a=true;b=false});google.maps.event.addDomListener(this.div_,"click",function(h){a=false;if(!b){var d;var f;var g=c.cluster_.getMarkerClusterer();google.maps.event.trigger(g,"click",c.cluster_);google.maps.event.trigger(g,"clusterclick",c.cluster_);if(g.getZoomOnClick()){f=g.getMaxZoom();d=c.cluster_.getBounds();g.getMap().fitBounds(d);setTimeout(function(){g.getMap().fitBounds(d);if(f!==null&&(g.getMap().getZoom()>f)){g.getMap().setZoom(f+1)}},100)}h.cancelBubble=true;if(h.stopPropagation){h.stopPropagation()}}});google.maps.event.addDomListener(this.div_,"mouseover",function(){var d=c.cluster_.getMarkerClusterer();google.maps.event.trigger(d,"mouseover",c.cluster_)});google.maps.event.addDomListener(this.div_,"mouseout",function(){var d=c.cluster_.getMarkerClusterer();google.maps.event.trigger(d,"mouseout",c.cluster_)})};ClusterIcon.prototype.onRemove=function(){if(this.div_&&this.div_.parentNode){this.hide();google.maps.event.clearInstanceListeners(this.div_);this.div_.parentNode.removeChild(this.div_);this.div_=null}};ClusterIcon.prototype.draw=function(){if(this.visible_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.top=a.y+"px";this.div_.style.left=a.x+"px"}};ClusterIcon.prototype.hide=function(){if(this.div_){this.div_.style.display="none"}this.visible_=false};ClusterIcon.prototype.show=function(){if(this.div_){var a=this.getPosFromLatLng_(this.center_);this.div_.style.cssText=this.createCss(a);if(this.cluster_.printable_){this.div_.innerHTML="<img src='"+this.url_+"'><div style='position: absolute; top: 0px; left: 0px; width: "+this.width_+"px;'>"+this.sums_.text+"</div>"}else{this.div_.innerHTML=this.sums_.text}if(typeof this.sums_.title==="undefined"||this.sums_.title===""){this.div_.title=this.cluster_.getMarkerClusterer().getTitle()}else{this.div_.title=this.sums_.title}this.div_.style.display=""}this.visible_=true};ClusterIcon.prototype.useStyle=function(b){this.sums_=b;var a=Math.max(0,b.index-1);a=Math.min(this.styles_.length-1,a);var c=this.styles_[a];this.url_=c.url;this.shadow_=c.shadow;this.height_=c.height;this.width_=c.width;this.anchor_=c.anchor;this.anchorIcon_=c.anchorIcon||[parseInt(this.height_/2,10),parseInt(this.width_/2,10)];this.textColor_=c.textColor||"black";this.textSize_=c.textSize||11;this.textDecoration_=c.textDecoration||"none";this.fontWeight_=c.fontWeight||"bold";this.fontStyle_=c.fontStyle||"normal";this.fontFamily_=c.fontFamily||"Arial,sans-serif";this.backgroundPosition_=c.backgroundPosition||"0 0"};ClusterIcon.prototype.updateUrl=function(g){var e={};if(g.length<2){return}var b=0;for(i=0;i<g.length;i++){if(e.hasOwnProperty(g[i].hexColor)){e[g[i].hexColor]=e[g[i].hexColor]+1}else{e[g[i].hexColor]=1;b++}}var d="";var h="";for(var a in e){if(d.length>0){d=d+"|"+a}else{d=a}var c=e[a];if(g.length>100){c=Math.floor((c/g.length)*100)}if(h.length>0){h=h+","+c.toString()}else{h=c.toString()}}if(b==1){this.url_=this.url_.replace("color_",g[0].color)}else{var f=MarkerClusterer.IMAGE_SIZES.indexOf(this.height_);this.height_=MarkerClusterer.CHART_IMAGE_SIZES[f];this.width_=MarkerClusterer.CHART_IMAGE_SIZES[f];this.shadow_=MarkerClusterer.CHART_SHADOW_PATH+"/"+this.width_.toString()+MarkerClusterer.CHART_SHADOW;this.url_="//chart.googleapis.com/chart?cht=p&chs="+this.height_.toString()+"x"+this.width_.toString()+"&chd=t:"+h+"&chco="+d+"&chf=a,s,000000CC|bg,s,67676700"}};ClusterIcon.prototype.setCenter=function(a){this.center_=a};ClusterIcon.prototype.createCss=function(b){var a=[];if(!this.cluster_.printable_){a.push("background-image:url("+this.url_+");");a.push("background-position:"+this.backgroundPosition_+";")}if(typeof this.anchor_==="object"){if(typeof this.anchor_[0]==="number"&&this.anchor_[0]>0&&this.anchor_[0]<this.height_){a.push("height:"+(this.height_-this.anchor_[0])+"px; padding-top:"+this.anchor_[0]+"px;")}else{a.push("height:"+this.height_+"px; line-height:"+this.height_+"px;")}if(typeof this.anchor_[1]==="number"&&this.anchor_[1]>0&&this.anchor_[1]<this.width_){a.push("width:"+(this.width_-this.anchor_[1])+"px; padding-left:"+this.anchor_[1]+"px;")}else{a.push("width:"+this.width_+"px; text-align:center;")}}else{a.push("height:"+this.height_+"px; line-height:"+this.height_+"px; width:"+this.width_+"px; text-align:center;")}a.push("cursor:pointer; top:"+b.y+"px; left:"+b.x+"px; color:"+this.textColor_+"; position:absolute; font-size:"+this.textSize_+"px; font-family:"+this.fontFamily_+"; font-weight:"+this.fontWeight_+"; font-style:"+this.fontStyle_+"; text-decoration:"+this.textDecoration_+";");return a.join("")};ClusterIcon.prototype.createCssShadow=function(b){var a=[];if(!this.cluster_.printable_){a.push("background-image:url("+this.shadow_+");");a.push("background-position: -4px -4px;")}a.push("height:"+this.height_+"px; width:"+(this.width_*1.54).toString()+"px;");a.push("z-index: -1; position: absolute; top:"+b.y+"px; left:"+b.x+"px; ");return a.join("")};ClusterIcon.prototype.getPosFromLatLng_=function(b){var a=this.getProjection().fromLatLngToDivPixel(b);a.x-=this.anchorIcon_[1];a.y-=this.anchorIcon_[0];return a};function Cluster(a){this.markerClusterer_=a;this.map_=a.getMap();this.gridSize_=a.getGridSize();this.minClusterSize_=a.getMinimumClusterSize();this.averageCenter_=a.getAverageCenter();this.printable_=a.getPrintable();this.markers_=[];this.center_=null;this.bounds_=null;this.clusterIcon_=new ClusterIcon(this,a.getStyles())}Cluster.prototype.getSize=function(){return this.markers_.length};Cluster.prototype.getMarkers=function(){return this.markers_};Cluster.prototype.getCenter=function(){return this.center_};Cluster.prototype.getMap=function(){return this.map_};Cluster.prototype.getMarkerClusterer=function(){return this.markerClusterer_};Cluster.prototype.getBounds=function(){var a;var b=new google.maps.LatLngBounds(this.center_,this.center_);var c=this.getMarkers();for(a=0;a<c.length;a++){b.extend(c[a].getPosition())}return b};Cluster.prototype.remove=function(){this.clusterIcon_.setMap(null);this.markers_=[];delete this.markers_};Cluster.prototype.addMarker=function(b){var e;var d;var f;if(this.isMarkerAlreadyAdded_(b)){return false}if(!this.center_){this.center_=b.getPosition();this.calculateBounds_()}else{if(this.averageCenter_){var a=this.markers_.length+1;var g=(this.center_.lat()*(a-1)+b.getPosition().lat())/a;var c=(this.center_.lng()*(a-1)+b.getPosition().lng())/a;this.center_=new google.maps.LatLng(g,c);this.calculateBounds_()}}b.isAdded=true;this.markers_.push(b);d=this.markers_.length;f=this.markerClusterer_.getMaxZoom();if(f!==null&&this.map_.getZoom()>f){if(b.getMap()!==this.map_){b.setMap(this.map_)}}else{if(d<this.minClusterSize_){if(b.getMap()!==this.map_){b.setMap(this.map_)}}else{if(d===this.minClusterSize_){for(e=0;e<d;e++){this.markers_[e].setMap(null)}}else{b.setMap(null)}}}this.updateIcon_();return true};Cluster.prototype.isMarkerInClusterBounds=function(a){return this.bounds_.contains(a.getPosition())};Cluster.prototype.calculateBounds_=function(){var a=new google.maps.LatLngBounds(this.center_,this.center_);this.bounds_=this.markerClusterer_.getExtendedBounds(a)};Cluster.prototype.updateIcon_=function(){var b=this.markers_.length;var d=this.markerClusterer_.getMaxZoom();if(d!==null&&this.map_.getZoom()>d){this.clusterIcon_.hide();return}if(b<this.minClusterSize_){this.clusterIcon_.hide();return}var c=this.markerClusterer_.getStyles().length;var a=this.markerClusterer_.getCalculator()(this.markers_,c);this.clusterIcon_.setCenter(this.center_);this.clusterIcon_.useStyle(a);this.clusterIcon_.updateUrl(this.markers_);this.clusterIcon_.show()};Cluster.prototype.isMarkerAlreadyAdded_=function(a){var b;if(this.markers_.indexOf){return this.markers_.indexOf(a)!==-1}else{for(b=0;b<this.markers_.length;b++){if(a===this.markers_[b]){return true}}}return false};function MarkerClusterer(c,a,b){this.extend(MarkerClusterer,google.maps.OverlayView);a=a||[];b=b||{};this.markers_=[];this.clusters_=[];this.listeners_=[];this.activeMap_=null;this.ready_=false;this.gridSize_=b.gridSize||60;this.minClusterSize_=b.minimumClusterSize||2;this.maxZoom_=b.maxZoom||null;this.styles_=b.styles||[];this.title_=b.title||"";this.zoomOnClick_=true;if(b.zoomOnClick!==undefined){this.zoomOnClick_=b.zoomOnClick}this.averageCenter_=false;if(b.averageCenter!==undefined){this.averageCenter_=b.averageCenter}this.ignoreHidden_=false;if(b.ignoreHidden!==undefined){this.ignoreHidden_=b.ignoreHidden}this.printable_=false;if(b.printable!==undefined){this.printable_=b.printable}this.imagePath_=b.imagePath||MarkerClusterer.IMAGE_PATH;this.imageExtension_=b.imageExtension||MarkerClusterer.IMAGE_EXTENSION;this.imageSizes_=b.imageSizes||MarkerClusterer.IMAGE_SIZES;this.calculator_=b.calculator||MarkerClusterer.CALCULATOR;this.batchSize_=b.batchSize||MarkerClusterer.BATCH_SIZE;this.batchSizeIE_=b.batchSizeIE||MarkerClusterer.BATCH_SIZE_IE;this.clusterClass_=b.clusterClass||"cluster";if(navigator.userAgent.toLowerCase().indexOf("msie")!==-1){this.batchSize_=this.batchSizeIE_}this.setupStyles_();this.addMarkers(a,true);this.setMap(c)}MarkerClusterer.prototype.onAdd=function(){var a=this;this.activeMap_=this.getMap();this.ready_=true;this.repaint();this.listeners_=[google.maps.event.addListener(this.getMap(),"zoom_changed",function(){a.resetViewport_(false);if(this.getZoom()===(this.get("minZoom")||0)||this.getZoom()===this.get("maxZoom")){google.maps.event.trigger(this,"idle")}}),google.maps.event.addListener(this.getMap(),"idle",function(){a.redraw_()})]};MarkerClusterer.prototype.onRemove=function(){var a;for(a=0;a<this.markers_.length;a++){if(this.markers_[a].getMap()!==this.activeMap_){this.markers_[a].setMap(this.activeMap_)}}for(a=0;a<this.clusters_.length;a++){this.clusters_[a].remove()}this.clusters_=[];for(a=0;a<this.listeners_.length;a++){google.maps.event.removeListener(this.listeners_[a])}this.listeners_=[];this.activeMap_=null;this.ready_=false};MarkerClusterer.prototype.draw=function(){};MarkerClusterer.prototype.setupStyles_=function(){var b,a;if(this.styles_.length>0){return}for(b=0;b<this.imageSizes_.length;b++){a=this.imageSizes_[b];this.styles_.push({url:this.imagePath_+"/"+((b*5)+35)+"_color_."+this.imageExtension_,shadow:this.imagePath_+"/"+((b*5)+35)+"_shadow."+this.imageExtension_,height:a,width:a})}};MarkerClusterer.prototype.fitMapToMarkers=function(){var a;var c=this.getMarkers();var b=new google.maps.LatLngBounds();for(a=0;a<c.length;a++){b.extend(c[a].getPosition())}this.getMap().fitBounds(b)};MarkerClusterer.prototype.getGridSize=function(){return this.gridSize_};MarkerClusterer.prototype.setGridSize=function(a){this.gridSize_=a};MarkerClusterer.prototype.getMinimumClusterSize=function(){return this.minClusterSize_};MarkerClusterer.prototype.setMinimumClusterSize=function(a){this.minClusterSize_=a};MarkerClusterer.prototype.getMaxZoom=function(){return this.maxZoom_};MarkerClusterer.prototype.setMaxZoom=function(a){this.maxZoom_=a};MarkerClusterer.prototype.getStyles=function(){return this.styles_};MarkerClusterer.prototype.setStyles=function(a){this.styles_=a};MarkerClusterer.prototype.getTitle=function(){return this.title_};MarkerClusterer.prototype.setTitle=function(a){this.title_=a};MarkerClusterer.prototype.getZoomOnClick=function(){return this.zoomOnClick_};MarkerClusterer.prototype.setZoomOnClick=function(a){this.zoomOnClick_=a};MarkerClusterer.prototype.getAverageCenter=function(){return this.averageCenter_};MarkerClusterer.prototype.setAverageCenter=function(a){this.averageCenter_=a};MarkerClusterer.prototype.getIgnoreHidden=function(){return this.ignoreHidden_};MarkerClusterer.prototype.setIgnoreHidden=function(a){this.ignoreHidden_=a};MarkerClusterer.prototype.getImageExtension=function(){return this.imageExtension_};MarkerClusterer.prototype.setImageExtension=function(a){this.imageExtension_=a};MarkerClusterer.prototype.getImagePath=function(){return this.imagePath_};MarkerClusterer.prototype.setImagePath=function(a){this.imagePath_=a};MarkerClusterer.prototype.getImageSizes=function(){return this.imageSizes_};MarkerClusterer.prototype.setImageSizes=function(a){this.imageSizes_=a};MarkerClusterer.prototype.getCalculator=function(){return this.calculator_};MarkerClusterer.prototype.setCalculator=function(a){this.calculator_=a};MarkerClusterer.prototype.getPrintable=function(){return this.printable_};MarkerClusterer.prototype.setPrintable=function(a){this.printable_=a};MarkerClusterer.prototype.getBatchSizeIE=function(){return this.batchSizeIE_};MarkerClusterer.prototype.setBatchSizeIE=function(a){this.batchSizeIE_=a};MarkerClusterer.prototype.getClusterClass=function(){return this.clusterClass_};MarkerClusterer.prototype.setClusterClass=function(a){this.clusterClass_=a};MarkerClusterer.prototype.getMarkers=function(){return this.markers_};MarkerClusterer.prototype.getTotalMarkers=function(){return this.markers_.length};MarkerClusterer.prototype.getClusters=function(){return this.clusters_};MarkerClusterer.prototype.getTotalClusters=function(){return this.clusters_.length};MarkerClusterer.prototype.addMarker=function(a,b){this.pushMarkerTo_(a);if(!b){this.redraw_()}};MarkerClusterer.prototype.addMarkers=function(c,b){var a;for(a=0;a<c.length;a++){this.pushMarkerTo_(c[a])}if(!b){this.redraw_()}};MarkerClusterer.prototype.pushMarkerTo_=function(a){if(a==null){return}if(a.getDraggable()){var b=this;google.maps.event.addListener(a,"dragend",function(){if(b.ready_){this.isAdded=false;b.repaint()}})}a.isAdded=false;this.markers_.push(a)};MarkerClusterer.prototype.removeMarker=function(a,b){var c=this.removeMarker_(a);if(!b&&c){this.repaint()}return c};MarkerClusterer.prototype.removeMarkers=function(e,b){var a,c;var d=false;for(a=0;a<e.length;a++){c=this.removeMarker_(e[a]);d=d||c}if(!b&&d){this.repaint()}return d};MarkerClusterer.prototype.removeMarker_=function(a){var c;var b=-1;if(this.markers_.indexOf){b=this.markers_.indexOf(a)}else{for(c=0;c<this.markers_.length;c++){if(a===this.markers_[c]){b=c;break}}}if(b===-1){return false}a.setMap(null);this.markers_.splice(b,1);return true};MarkerClusterer.prototype.clearMarkers=function(){this.resetViewport_(true);this.markers_=[]};MarkerClusterer.prototype.repaint=function(){var a=this.clusters_.slice();this.clusters_=[];this.resetViewport_(false);this.redraw_();setTimeout(function(){var b;for(b=0;b<a.length;b++){a[b].remove()}},0)};MarkerClusterer.prototype.getExtendedBounds=function(e){var c=this.getProjection();var f=new google.maps.LatLng(e.getNorthEast().lat(),e.getNorthEast().lng());var h=new google.maps.LatLng(e.getSouthWest().lat(),e.getSouthWest().lng());var d=c.fromLatLngToDivPixel(f);d.x+=this.gridSize_;d.y-=this.gridSize_;var b=c.fromLatLngToDivPixel(h);b.x-=this.gridSize_;b.y+=this.gridSize_;var g=c.fromDivPixelToLatLng(d);var a=c.fromDivPixelToLatLng(b);e.extend(g);e.extend(a);return e};MarkerClusterer.prototype.redraw_=function(){this.createClusters_(0)};MarkerClusterer.prototype.resetViewport_=function(c){var b,a;for(b=0;b<this.clusters_.length;b++){this.clusters_[b].remove()}this.clusters_=[];for(b=0;b<this.markers_.length;b++){a=this.markers_[b];a.isAdded=false;if(c){a.setMap(null)}}};MarkerClusterer.prototype.distanceBetweenPoints_=function(k,h){var g=6371;var e=(h.lat()-k.lat())*Math.PI/180;var f=(h.lng()-k.lng())*Math.PI/180;var b=Math.sin(e/2)*Math.sin(e/2)+Math.cos(k.lat()*Math.PI/180)*Math.cos(h.lat()*Math.PI/180)*Math.sin(f/2)*Math.sin(f/2);var l=2*Math.atan2(Math.sqrt(b),Math.sqrt(1-b));var j=g*l;return j};MarkerClusterer.prototype.isMarkerInBounds_=function(a,b){return b.contains(a.getPosition())};MarkerClusterer.prototype.addToClosestCluster_=function(c){var f,g,b,a;var h=40000;var e=null;for(f=0;f<this.clusters_.length;f++){b=this.clusters_[f];a=b.getCenter();if(a){g=this.distanceBetweenPoints_(a,c.getPosition());if(g<h){h=g;e=b}}}if(e&&e.isMarkerInClusterBounds(c)){e.addMarker(c)}else{b=new Cluster(this);b.addMarker(c);this.clusters_.push(b)}};MarkerClusterer.prototype.createClusters_=function(a){var e,c;var b;var d=this;if(!this.ready_){return}if(a===0){google.maps.event.trigger(this,"clusteringbegin",this);if(typeof this.timerRefStatic!=="undefined"){clearTimeout(this.timerRefStatic);delete this.timerRefStatic}}if(this.getMap().getZoom()>3){b=new google.maps.LatLngBounds(this.getMap().getBounds().getSouthWest(),this.getMap().getBounds().getNorthEast())}else{b=new google.maps.LatLngBounds(new google.maps.LatLng(85.02070771743472,-178.48388434375),new google.maps.LatLng(-85.08136444384544,178.00048865625))}var g=this.getExtendedBounds(b);var f=Math.min(a+this.batchSize_,this.markers_.length);for(e=a;e<f;e++){c=this.markers_[e];if(!c.isAdded&&this.isMarkerInBounds_(c,g)){if(!this.ignoreHidden_||(this.ignoreHidden_&&c.getVisible())){this.addToClosestCluster_(c)}}}if(f<this.markers_.length){this.timerRefStatic=setTimeout(function(){d.createClusters_(f)},0)}else{delete this.timerRefStatic;google.maps.event.trigger(this,"clusteringend",this)}};MarkerClusterer.prototype.extend=function(b,a){return(function(c){var d;for(d in c.prototype){this.prototype[d]=c.prototype[d]}return this}).apply(b,[a])};MarkerClusterer.CALCULATOR=function(f,d){var a=0;var e="";var c=f.length.toString();var b=c;while(b!==0){b=parseInt(b/10,10);a++}a=Math.min(a,d);return{text:c,index:a,title:e}};MarkerClusterer.BATCH_SIZE=2000;MarkerClusterer.BATCH_SIZE_IE=500;MarkerClusterer.IMAGE_EXTENSION="png";MarkerClusterer.IMAGE_PATH=CLOUD_FRONT_URL+"/cluster_images/semi_opaq";MarkerClusterer.IMAGE_SIZES=[35,40,45,50,55,60,65];MarkerClusterer.CHART_IMAGE_SIZES=[50,55,60,65,70,73,75];MarkerClusterer.CHART_SHADOW_PATH="/cluster_images/chart";MarkerClusterer.CHART_SHADOW="_shadow.png";var sample_data1="Street Address	City	State	Zip	Phone number	Url	Type	Playplace	Drive-thru	Arch Card	Free WiFi	Image \n 3611 N Main	Houston	TX	77009	 (713)861-9263	http://www.mctexas.com/4802	Free Standing	Yes	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img1.jpg \n     5505 LOCKWOOD	Houston	TX	77026	(713)635-4242 	http://www.mctexas.com/21571	Gas Station	No	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img2.jpg \n     1415 E ILLINOIS	Dallas	TX	75212	(214)374-4000	http://www.mctexas.com/10414	Free Standing	No	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img2.jpg \n     7401 SAMUELL BLVD	Dallas	TX	7522	(214)319-8751	http://www.mctexas.com/29441	WAL*MART	No	No	Yes	No	https://www.easymapmaker.com/samples/img1.jpg \n     1209 BARTON SPRINGS	Austin	TX	78704	(512)442-0412	http://www.mctexas.com/4941	Free Standing	No	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img2.jpg \n     101 ALAMO PLAZA	San Antonio	TX	78205	210)226-3800	http://www.mctexas.com/5395	STOREFRONT	No	No	Yes	Yes	https://www.easymapmaker.com/samples/img1.jpg \n     12001 MAUMELLE BLVD	Little Rock	AR	72113	(501)803-3385 	http://www.mcarkansas.com/33009	WAL*MART	No	No	Yes	No	https://www.easymapmaker.com/samples/img2.jpg \n     2101 NW 23RD ST	OKLAHOMA CITY 	OK	73107	(405)524-4100 	http://www.mcoklahoma.com/13060	Free Standing	Yes	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img1.jpg \n     4418 SHIELDS BLVD.	OKLAHOMA CITY 	OK	73129	(405)632-1483 	http://www.mcoklahoma.com/28583	SHARED BLDNG	Yes	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img2.jpg \n     4515 DOWLEN RD	BEAUMONT 	TX	77706	(409)898-3552 	http://www.mctexas.com/4237	Free Standing	Yes	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img2.jpg \n     5224 FLORIDA BLVD	BATON ROUGE 	LA	70806	(225)924-9762 	http://www.mclouisiana.com/668	Free Standing	No	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img1.jpg \n     4500 TWIN CITY	GROVES 	TX 	77619	(409)963-2244 	http://www.mctexas.com/7286	Free Standing	Yes	Yes	Yes	Yes	https://www.easymapmaker.com/samples/img2.jpg ";var sample_data2="SALE TYPE	HOME TYPE	ADDRESS	CITY	STATE	ZIP	LIST PRICE	BEDS	BATHS	SQFT	YEAR BUILT	PARKING SPOTS	PARKING TYPE	DAYS ON MARKET	NEXT OPEN HOUSE DATE	NEXT OPEN HOUSE START TIME	NEXT OPEN HOUSE END TIME	RECENT REDUCTION DATE	ORIGINAL LIST PRICE	LAST SALE DATE	LAST SALE PRICE	LISTING ID \n For-Sale-by-Owner Listing	Single Family Residential	2010 Ingersoll St	Dallas	TX	75212	99900	3	2	1455	2008	0		20					99900	5/9/2012	67900	3372257188 \n For-Sale-by-Owner Listing	Single Family Residential	681 Channel Ridge Dr	Rockwall	TX	75087	242500	4	2	2504	2001	2	Garage	32					242500			23944472 \n For-Sale-by-Owner Listing	Single Family Residential	11647 Rogue Way	Dallas	TX	75218	225000	3	2	1464	1959	2	Garage	25					225000			23945505 \n For-Sale-by-Owner Listing	Condo/Coop	3701 Turtle Creek Blvd	Dallas	TX	75219	220000	2	2	1082	1962	0		158					220000			3259575133 \n For-Sale-by-Owner Listing	Condo/Coop	7935 Royal Ln	Dallas	TX	75230	67000	2	2	1037	1964	1	Garage	525					62900			23070337 \n For-Sale-by-Owner Listing	Condo/Coop	2326 Stutz Dr #112	Dallas	TX	75235	239900	3	3		2008	0		28					239900	6/30/2009	262990	3365835840 \n For-Sale-by-Owner Listing	Single Family Residential	2003 Leath St	Dallas	TX	75212	95000	3	2		2007	0		28					95000	11/26/2008	95000	3365793395 \n For-Sale-by-Owner Listing	Single Family Residential	3002 Fairview Ave	Dallas	TX	75223	53000	5	2		1957	0		28					53000			3365806710 \n For-Sale-by-Owner Listing	Single Family Residential	2034 Leath St	Dallas	TX	75212	90000	3	2		2007	0		28					90000	10/1/2008	90000	3365793401 \n For-Sale-by-Owner Listing	Condo/Coop	5055 Addison Cir	Addison	TX	75001	259900	2	2	1740	2001	2	Garage	525					259900			22988867 \n For-Sale-by-Owner Listing	Single Family Residential	5075 Berridge Ln	Dallas	TX	75227	100000	3	2	1786		0		158					100000			3259490372 \n For-Sale-by-Owner Listing	Single Family Residential	810 Clermont St	Dallas	TX	75223	260000	2	2	1401	1948	2	Garage	148					260000	12/21/2009	279000	23932454 \n For-Sale-by-Owner Listing	Condo/Coop	3617 Hawthorne Ave	Dallas	TX	75219	158999	2	2	931	1962	0		247					158999			3172406024 \n For-Sale-by-Owner Listing	Single Family Residential	8963 Undercliff Dr	Dallas	TX	75217	131000	4	2	3000		0		91					131000	2/26/2008	62900	3313251913 \n For-Sale-by-Owner Listing	Single Family Residential	13610 Brookgreen Dr	Dallas	TX	75240	82000	3	2	1334		0		157					82000	11/16/2011	84460	3259599711 \n For-Sale-by-Owner Listing	Single Family Residential	2344 Hasty St	Dallas	TX	75228	95000	3	2	1600		0		91					95000	9/20/2010	35000	3313658332 \n For-Sale-by-Owner Listing	Condo/Coop	4456 Chaha Rd	Garland	TX	75043	51800	2	2	950	1981	0		68					51800			3333286734 \n For-Sale-by-Owner Listing	Single Family Residential	9058 Longmont Dr	Dallas	TX	75238	225000	3	2	1675		0		77					225000			3326388232 \n For-Sale-by-Owner Listing	Single Family Residential	11226 Quail Run St	Dallas	TX	75238	169900	4	2	1620	1970	1		60					169900			3340969430 \n For-Sale-by-Owner Listing	Condo/Coop	4830 Cedar Springs Rd Apt 2	Dallas	TX	75219	272900	2	3	1994	2005	0		91					272900	8/17/2012	249000	3313655337 \n For-Sale-by-Owner Listing	Condo/Coop	11926 Leisure Dr	Dallas	TX	75243	99999	3	3	1600	1974	0		91					99999	7/14/2011	79900	3313592932 ";var initial_table_display="                <tbody>     <tr><th>Street Address</th><th>City</th><th>State</th><th>Zip</th><th>Phone number</th><th>Url</th><th>Type</th><th>Playplace</th><th>Drive-thru</th><th>Arch Card</th><th>Free WiFi</th><th>Image</th></tr>     <tr><td>3611 N Main</td><td>Houston</td><td>TX</td><td>77009</td><td>(713)861-9263</td><td>http://www.mctexas.c...</td><td>Free Standing</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mctexas.c...</td></tr>     <tr><td>5505 LOCKWOOD</td><td>Houston</td><td>TX</td><td>77026</td><td>(713)635-4242</td><td>http://www.mctexas.c...</td><td>Gas Station</td><td>No</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mctexas.c...</td></tr>     <tr><td>1415 E ILLINOIS</td><td>Dallas</td><td>TX</td><td>75212</td><td>(214)374-4000</td><td>http://www.mctexas.c...</td><td>Free Standing</td><td>No</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mctexas.c...</td>     </tr>     <tr><td>7401 SAMUELL BLVD</td><td>Dallas</td><td>TX</td><td>7522</td><td>(214)319-8751</td><td>http://www.mctexas.c...</td><td>WAL*MART</td><td>No</td><td>No</td><td>Yes</td><td>No</td><td>http://www.mctexas.c...</td></tr>     <tr><td>1209 BARTON SPRINGS</td><td>Austin</td><td>TX</td><td>78704</td><td>(512)442-0412</td><td>http://www.mctexas.c...</td><td>Free Standing</td><td>No</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mctexas.c...</td></tr>     <tr><td>101 ALAMO PLAZA</td><td>San Antonio</td><td>TX</td><td>78205</td><td>210)226-3800</td><td>http://www.mctexas.c...</td><td>STOREFRONT</td><td>No</td><td>No</td><td>Yes</td><td>Yes</td><td>http://www.mctexas.c...</td></tr>     <tr><td>12001 MAUMELLE BLVD</td><td>Little Rock</td><td>AR</td><td>72113</td><td>(501)803-3385</td><td>http://www.mcarkansa...</td><td>WAL*MART</td><td>No</td><td>No</td><td>Yes</td><td>No</td><td>http://www.mcarkansa...</td></tr>     <tr><td>2101 NW 23RD ST</td><td>OKLAHOMA CITY</td><td>OK</td><td>73107</td><td>(405)524-4100</td><td>http://www.mcoklahom...</td><td>Free Standing</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mcoklahom...</td></tr>     <tr><td>4418 SHIELDS BLVD.</td><td>OKLAHOMA CITY</td><td>OK</td><td>73129</td><td>(405)632-1483</td><td>http://www.mcoklahom...</td><td>SHARED BLDNG</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mcoklahom...</td></tr>     <tr><td>4515 DOWLEN RD</td><td>BEAUMONT</td><td>TX</td><td>77706</td><td>(409)898-3552</td><td>http://www.mctexas.c...</td><td>Free Standing</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mctexas.c...</td></tr>     <tr><td>5224 FLORIDA BLVD</td><td>BATON ROUGE</td><td>LA</td><td>70806</td><td>(225)924-9762</td><td>http://www.mclouisia...</td><td>Free Standing</td><td>No</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mclouisia...</td></tr>     <tr><td>4500 TWIN CITY</td><td>GROVES</td><td>TX</td><td>77619</td><td>(409)963-2244</td><td>http://www.mctexas.c...</td><td>Free Standing</td><td>Yes</td><td>Yes</td><td>Yes</td><td>Yes</td><td>http://www.mctexas.c...</td></tr> </tbody>";!function(c){if(Array.prototype.forEach===null||Array.prototype.forEach===undefined){Array.prototype.forEach=function(e){var d;for(d=0;d<this.length;++d){e(this[d])}}}if(typeof ko!=="undefined"&&ko.bindingHandlers&&!ko.bindingHandlers.multiselect){ko.bindingHandlers.multiselect={init:function(g,h,j,f,d){var k=j().selectedOptions,e=ko.utils.unwrapObservable(h());c(g).multiselect(e);if(a(k)){k.subscribe(function(n){var l=[],m=[];n.forEach(function(o){switch(o.status){case"added":l.push(o.value);break;case"deleted":m.push(o.value);break}});if(l.length>0){c(g).multiselect("select",l)}if(m.length>0){c(g).multiselect("deselect",m)}},null,"arrayChange")}},update:function(j,k,l,h,d){var g=l().options,f=c(j).data("multiselect"),e=ko.utils.unwrapObservable(k());if(a(g)){g.subscribe(function(m){c(j).multiselect("rebuild")})}if(!f){c(j).multiselect(e)}else{f.updateOriginalOptions()}}}}function a(d){return ko.isObservable(d)&&!(d.destroyAll===undefined)}function b(d,e){this.options=this.mergeOptions(e);this.$select=c(d);this.originalOptions=this.$select.clone()[0].options;this.query="";this.searchTimeout=null;this.options.multiple=this.$select.attr("multiple")==="multiple";this.options.onChange=c.proxy(this.options.onChange,this);this.options.onDropdownShow=c.proxy(this.options.onDropdownShow,this);this.options.onDropdownHide=c.proxy(this.options.onDropdownHide,this);this.buildContainer();this.buildButton();this.buildDropdown();this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll();this.$select.hide().after(this.$container)}b.prototype={defaults:{buttonText:function(e,d){if(e.length===0){return this.nonSelectedText+' <b class="caret"></b>'}else{if(e.length>this.numberDisplayed){return e.length+" "+this.nSelectedText+' <b class="caret"></b>'}else{var f="";e.each(function(){var g=(c(this).attr("label")!==undefined)?c(this).attr("label"):c(this).html();f+=g+", "});return f.substr(0,f.length-2)+' <b class="caret"></b>'}}},buttonTitle:function(e,d){if(e.length===0){return this.nonSelectedText}else{var f="";e.each(function(){f+=c(this).text()+", "});return f.substr(0,f.length-2)}},label:function(d){return c(d).attr("label")||c(d).html()},onChange:function(d,e){},onDropdownShow:function(d){},onDropdownHide:function(d){},buttonClass:"btn btn-default",dropRight:false,selectedClass:"active",buttonWidth:"auto",buttonContainer:'<div class="btn-group" />',maxHeight:false,checkboxName:"multiselect",includeSelectAllOption:false,includeSelectAllIfMoreThan:0,selectAllText:" Select all",selectAllValue:"multiselect-all",enableFiltering:false,enableCaseInsensitiveFiltering:false,filterPlaceholder:"Search",filterBehavior:"text",preventInputChangeEvent:false,nonSelectedText:"None selected",nSelectedText:"selected",numberDisplayed:3,templates:{button:'<button type="button" class="multiselect dropdown-toggle" data-toggle="dropdown"></button>',ul:'<ul class="multiselect-container dropdown-menu"></ul>',filter:'<li class="multiselect-item filter"><div class="input-group"><span class="input-group-addon"><i class="glyphicon glyphicon-search"></i></span><input class="form-control multiselect-search" type="text"></div></li>',li:'<li><a href="javascript:void(0);"><label></label></a></li>',divider:'<li class="multiselect-item divider"></li>',liGroup:'<li class="multiselect-item group"><label class="multiselect-group"></label></li>'}},constructor:b,buildContainer:function(){this.$container=c(this.options.buttonContainer);this.$container.on("show.bs.dropdown",this.options.onDropdownShow);this.$container.on("hide.bs.dropdown",this.options.onDropdownHide)},buildButton:function(){this.$button=c(this.options.templates.button).addClass(this.options.buttonClass);if(this.$select.prop("disabled")){this.disable()}else{this.enable()}if(this.options.buttonWidth&&this.options.buttonWidth!=="auto"){this.$button.css({width:this.options.buttonWidth})}var d=this.$select.attr("tabindex");if(d){this.$button.attr("tabindex",d)}this.$container.prepend(this.$button)},buildDropdown:function(){this.$ul=c(this.options.templates.ul);if(this.options.dropRight){this.$ul.addClass("pull-right")}if(this.options.maxHeight){this.$ul.css({"max-height":this.options.maxHeight+"px","overflow-y":"auto","overflow-x":"hidden"})}this.$container.append(this.$ul)},buildDropdownOptions:function(){this.$select.children().each(c.proxy(function(e,f){var d=c(f).prop("tagName").toLowerCase();if(d==="optgroup"){this.createOptgroup(f)}else{if(d==="option"){if(c(f).data("role")==="divider"){this.createDivider()}else{this.createOptionValue(f)}}}},this));c("li input",this.$ul).on("change",c.proxy(function(h){var d=c(h.target);var g=d.prop("checked")||false;var e=d.val()===this.options.selectAllValue;if(this.options.selectedClass){if(g){d.parents("li").addClass(this.options.selectedClass)}else{d.parents("li").removeClass(this.options.selectedClass)}}var j=d.val();var k=this.getOptionByValue(j);var l=c("option",this.$select).not(k);var f=c("input",this.$container).not(d);if(e){if(g){this.selectall()}else{this.deselectall()}}if(!e){if(g){k.prop("selected",true);if(this.options.multiple){k.prop("selected",true)}else{if(this.options.selectedClass){c(f).parents("li").removeClass(this.options.selectedClass)}c(f).prop("checked",false);l.prop("selected",false);this.$button.click()}if(this.options.selectedClass==="active"){l.parents("a").css("outline","")}}else{k.prop("selected",false)}}this.$select.change();this.updateButtonText();this.updateSelectAll();this.options.onChange(k,g);if(this.options.preventInputChangeEvent){return false}},this));c("li a",this.$ul).on("touchstart click",function(j){j.stopPropagation();var d=c(j.target);if(j.shiftKey){var h=d.prop("checked")||false;if(h){var g=d.parents("li:last").siblings('li[class="active"]:first');var f=d.parents("li").index();var e=g.index();if(f>e){d.parents("li:last").prevUntil(g).each(function(){c(this).find("input:first").prop("checked",true).trigger("change")})}else{d.parents("li:last").nextUntil(g).each(function(){c(this).find("input:first").prop("checked",true).trigger("change")})}}}d.blur()});this.$container.off("keydown.multiselect").on("keydown.multiselect",c.proxy(function(g){if(c('input[type="text"]',this.$container).is(":focus")){return}if((g.keyCode===9||g.keyCode===27)&&this.$container.hasClass("open")){this.$button.click()}else{var h=c(this.$container).find("li:not(.divider):not(.disabled) a").filter(":visible");if(!h.length){return}var d=h.index(h.filter(":focus"));if(g.keyCode===38&&d>0){d--}else{if(g.keyCode===40&&d<h.length-1){d++}else{if(!~d){d=0}}}var f=h.eq(d);f.focus();if(g.keyCode===32||g.keyCode===13){var e=f.find("input");e.prop("checked",!e.prop("checked"));e.change()}g.stopPropagation();g.preventDefault()}},this))},createOptionValue:function(e){if(c(e).is(":selected")){c(e).prop("selected",true)}var d=this.options.label(e);var j=c(e).val();var h=this.options.multiple?"checkbox":"radio";var k=c(this.options.templates.li);c("label",k).addClass(h);c("label",k).append('<input type="'+h+'" name="'+this.options.checkboxName+'" />');var g=c(e).prop("selected")||false;var f=c("input",k);f.val(j);if(j===this.options.selectAllValue){k.addClass("multiselect-item multiselect-all");f.parent().parent().addClass("multiselect-all")}c("label",k).append(" "+d);this.$ul.append(k);if(c(e).is(":disabled")){f.attr("disabled","disabled").prop("disabled",true).parents("a").attr("tabindex","-1").parents("li").addClass("disabled")}f.prop("checked",g);if(g&&this.options.selectedClass){f.parents("li").addClass(this.options.selectedClass)}},createDivider:function(e){var d=c(this.options.templates.divider);this.$ul.append(d)},createOptgroup:function(d){var f=c(d).prop("label");var e=c(this.options.templates.liGroup);c("label",e).text(f);this.$ul.append(e);if(c(d).is(":disabled")){e.addClass("disabled")}c("option",d).each(c.proxy(function(g,h){this.createOptionValue(h)},this))},buildSelectAll:function(){var d=this.hasSelectAll();if(!d&&this.options.includeSelectAllOption&&this.options.multiple&&c("option",this.$select).length>this.options.includeSelectAllIfMoreThan){if(this.options.includeSelectAllDivider){this.$ul.prepend(c(this.options.templates.divider))}var f=c(this.options.templates.li);c("label",f).addClass("checkbox");c("label",f).append('<input type="checkbox" name="'+this.options.checkboxName+'" />');var e=c("input",f);e.val(this.options.selectAllValue);f.addClass("multiselect-item multiselect-all");e.parent().parent().addClass("multiselect-all");c("label",f).append(" "+this.options.selectAllText);this.$ul.prepend(f);e.prop("checked",false)}},buildFilter:function(){if(this.options.enableFiltering||this.options.enableCaseInsensitiveFiltering){var d=Math.max(this.options.enableFiltering,this.options.enableCaseInsensitiveFiltering);if(this.$select.find("option").length>=d){this.$filter=c(this.options.templates.filter);c("input",this.$filter).attr("placeholder",this.options.filterPlaceholder);this.$ul.prepend(this.$filter);this.$filter.val(this.query).on("click",function(e){e.stopPropagation()}).on("input keydown",c.proxy(function(e){clearTimeout(this.searchTimeout);this.searchTimeout=this.asyncFunction(c.proxy(function(){if(this.query!==e.target.value){this.query=e.target.value;c.each(c("li",this.$ul),c.proxy(function(g,h){var k=c("input",h).val();var l=c("label",h).text();var f="";if((this.options.filterBehavior==="text")){f=l}else{if((this.options.filterBehavior==="value")){f=k}else{if(this.options.filterBehavior==="both"){f=l+"\n"+k}}}if(k!==this.options.selectAllValue&&l){var j=false;if(this.options.enableCaseInsensitiveFiltering&&f.toLowerCase().indexOf(this.query.toLowerCase())>-1){j=true}else{if(f.indexOf(this.query)>-1){j=true}}if(j){c(h).show().removeClass("filter-hidden")}else{c(h).hide().addClass("filter-hidden")}}},this))}this.updateSelectAll()},this),300,this)},this))}}},destroy:function(){this.$container.remove();this.$select.show();this.$select.data("multiselect",null)},refresh:function(){c("option",this.$select).each(c.proxy(function(d,e){var f=c("li input",this.$ul).filter(function(){return c(this).val()===c(e).val()});if(c(e).is(":selected")){f.prop("checked",true);if(this.options.selectedClass){f.parents("li").addClass(this.options.selectedClass)}}else{f.prop("checked",false);if(this.options.selectedClass){f.parents("li").removeClass(this.options.selectedClass)}}if(c(e).is(":disabled")){f.attr("disabled","disabled").prop("disabled",true).parents("li").addClass("disabled")}else{f.prop("disabled",false).parents("li").removeClass("disabled")}},this));this.updateButtonText();this.updateSelectAll()},select:function(h){if(!c.isArray(h)){h=[h]}for(var d=0;d<h.length;d++){var f=h[d];var g=this.getOptionByValue(f);var e=this.getInputByValue(f);if(this.options.selectedClass){e.parents("li").addClass(this.options.selectedClass)}e.prop("checked",true);g.prop("selected",true)}this.updateButtonText()},clearSelection:function(){this.deselectall(false);this.updateButtonText();this.updateSelectAll()},deselect:function(d){if(!c.isArray(d)){d=[d]}for(var e=0;e<d.length;e++){var g=d[e];var h=this.getOptionByValue(g);var f=this.getInputByValue(g);if(this.options.selectedClass){f.parents("li").removeClass(this.options.selectedClass)}f.prop("checked",false);h.prop("selected",false)}this.updateButtonText()},selectall:function(){var h=c("li input[type='checkbox']:enabled",this.$ul),f=h.filter(":visible"),g=h.length,d=f.length;f.prop("checked",true);c("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").addClass(this.options.selectedClass);if(g===d){c("option:enabled",this.$select).prop("selected",true)}else{var e=f.map(function(){return c(this).val()}).get();c("option:enabled",this.$select).filter(function(j){return c.inArray(c(this).val(),e)!==-1}).prop("selected",true)}},deselectall:function(d){var g=c("li input[type='checkbox']:enabled",this.$ul),d=typeof d==="undefined"?true:d,f=void (0);if(d){var e=void (0);f=g.filter(":visible");f.prop("checked",false);e=f.map(function(){return c(this).val()}).get();c("option:enabled",this.$select).filter(function(h){return c.inArray(c(this).val(),e)!==-1}).prop("selected",false);c("li:not(.divider):not(.disabled)",this.$ul).filter(":visible").removeClass(this.options.selectedClass)}else{g.prop("checked",false);c("option:enabled",this.$select).prop("selected",false);c("li:not(.divider):not(.disabled)",this.$ul).removeClass(this.options.selectedClass)}},rebuild:function(){this.$ul.html("");this.options.multiple=this.$select.attr("multiple")==="multiple";this.buildSelectAll();this.buildDropdownOptions();this.buildFilter();this.updateButtonText();this.updateSelectAll()},dataprovider:function(d){var e="";d.forEach(function(f){e+='<option value="'+f.value+'">'+f.label+"</option>"});this.$select.html(e);this.rebuild()},enable:function(){this.$select.prop("disabled",false);this.$button.prop("disabled",false).removeClass("disabled")},disable:function(){this.$select.prop("disabled",true);this.$button.prop("disabled",true).addClass("disabled")},setOptions:function(d){this.options=this.mergeOptions(d)},mergeOptions:function(d){return c.extend(true,{},this.defaults,d)},hasSelectAll:function(){return c("li."+this.options.selectAllValue,this.$ul).length>0},updateSelectAll:function(){if(this.hasSelectAll()){var h=c("li:not(.multiselect-item):not(.filter-hidden) input:enabled",this.$ul),g=h.length,e=h.filter(":checked").length,d=c("li."+this.options.selectAllValue,this.$ul),f=d.find("input");if(e>0&&e===g){f.prop("checked",true);d.addClass(this.options.selectedClass)}else{f.prop("checked",false);d.removeClass(this.options.selectedClass)}}},updateButtonText:function(){var d=this.getSelected();c("button",this.$container).html(this.options.buttonText(d,this.$select));c("button",this.$container).attr("title",this.options.buttonTitle(d,this.$select))},getSelected:function(){return c("option",this.$select).filter(":selected")},getOptionByValue:function(g){var d=c("option",this.$select);var h=g.toString();for(var e=0;e<d.length;e=e+1){var f=d[e];if(f.value===h){return c(f)}}},getInputByValue:function(g){var f=c("li input",this.$ul);var h=g.toString();for(var d=0;d<f.length;d=d+1){var e=f[d];if(e.value===h){return c(e)}}},updateOriginalOptions:function(){this.originalOptions=this.$select.clone()[0].options},asyncFunction:function(g,f,d){var e=Array.prototype.slice.call(arguments,3);return setTimeout(function(){g.apply(d||window,e)},f)}};c.fn.multiselect=function(d,e){return this.each(function(){var g=c(this).data("multiselect");var f=typeof d==="object"&&d;if(!g){g=new b(this,f);c(this).data("multiselect",g)}if(typeof d==="string"){g[d](e);if(d==="destroy"){c(this).data("multiselect",false)}}})};c.fn.multiselect.Constructor=b;c(function(){c("select[data-role=multiselect]").multiselect()})}(window.jQuery);if(!window.console){console={debug:function(a){}}}var console=console||{debug:function(){}};var errorHash={};if(typeof window.onerror==="undefined"){}else{window.onerror=function(e,b,a,d,c){if(d==undefined){d="unknown column"}if(c==undefined){c="unknown error object"}fUNQ38(b+":"+a+":"+d+" stack trace: "+c+"\n\n"+e);return true}}function fUNQ38(a){if(errorHash.hasOwnProperty(a)){return}else{errorHash[a]=1}$.ajax({type:"POST",url:"/errors/errorHandler.php",data:JSON.stringify({context:navigator.userAgent,details:a}),contentType:"application/json; charset=utf-8"})}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}String.prototype.endsWith=function(a){return this.length>=a.length&&this.substr(this.length-a.length)==a};if(!String.prototype.startsWith){String.prototype.startsWith=function(b,a){a=a||0;return this.lastIndexOf(b,a)===a}}if(!Array.prototype.indexOf){Array.prototype.indexOf=function(c,d){for(var b=(d||0),a=this.length;b<a;b++){if(this[b]===c){return b}}return -1}}function fUNQ39(){var a=document.getElementById("noDisplay");var b=document.getElementById("toDisplay");jQuery("#moveToDisplay").click(function(){$("#noDisplay option:selected").each(function(){$("#toDisplay").append($(this).clone(true));$(this).remove()});fUNQ40(b);fUNQ41()});jQuery("#removeFromDisplay").click(function(){$("#toDisplay option:selected").each(function(){$("#noDisplay").append($(this).clone(true));$(this).remove()});fUNQ40(a);fUNQ41()});jQuery("#moveAllToDisplay").click(function(){$("#noDisplay option").each(function(){$("#toDisplay").append($(this).clone(true));$(this).remove()});fUNQ40(b);fUNQ41()});jQuery("#removeAllFromDisplay").click(function(){$("#toDisplay option").each(function(){$("#noDisplay").append($(this).clone(true));$(this).remove()});fUNQ40(a);fUNQ41()})}function fUNQ40(c){var b=[],a;for(a=0;a<c.options.length;a++){b[a]=[];b[a][0]=c.options[a].text;b[a][1]=c.options[a].value}b.sort(function(e,d){return e[1]-d[1]});while(c.options.length>0){c.options[0]=null}for(a=0;a<b.length;a++){c.options[a]=new Option(b[a][0],b[a][1])}}function fUNQ41(){editPageObject.headerDisplayOrderIdxs.length=0;editPageObject.noDisplayNames=[];editPageObject.noDisplayNames.length=0;var c;var b=dataLines[0];var a=0;$("#noDisplay option").each(function(){var d=$(this).text();editPageObject.noDisplayNames.push(d)});$("#toDisplay option").each(function(){var d=$(this).attr("value");var e=$(this).text();editPageObject.headerDisplayOrderIdxs[editPageObject.headerDisplayOrderIdxs.length]=parseFloat(d);a+=30});c='<div id="innerMarkerDescDiv" >'+fUNQ42(b,editPageObject)+"</div>";$("#markerDescriptionDiv").html(c)}function fUNQ42(a,d){var g="";if(fUNQ299(d.title,d)&&a[d.title]!=""){if(fUNQ299(d.web,d)&&a[d.web]!=""){g='<div><a href="'+urlizeUrl(a[d.web])+'" target="_blank">'+a[d.title]+"</a></div>"}else{g=a[d.title]}}var j;j=fUNQ279(a,"<br>",true,editPageObject);if(j!=""){j="<div>"+j+"</div>"}var f="";for(var b=0;b<d.headerDisplayOrderIdxs.length;b++){if(!isSelectedColumn(d.headerDisplayOrderIdxs[b],d)){var c=a[d.headerDisplayOrderIdxs[b]];var h=d.columnHeaderArray[d.headerDisplayOrderIdxs[b]];if(c!=null&&c.trim()!=""){if(c.indexOf("\n")>0&&c.charAt(0)=='"'&&c.endsWith('"')){c=c.replace(/\n/g,"<br>");c=c.substr(1,c.length-2)}c=c.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>');if(d.showLabels){f=f+'<div class="markerLabelDiv"><span class="markerLabel">'+h+": </span>"+c+"</div>"}else{f=f+'<div class="markerLabelDiv">'+c+"</div>"}}}}var e=g+j+f;e+=fUNQ43(a,g,d,true,true);return e}function fUNQ43(a,g,e,c,d){var h="";var j="";if(fUNQ299(e.image,e)&&a[e.image]!=""){j='<div><img src="'+a[e.image]+'"/></div>'}else{if(c&&e.StreetView&&((e.emm_acc>0&&a[emm_acc]=="ROOFTOP")||d)){j='<div><img src="//maps.googleapis.com/maps/api/streetview?size=200x200&location='+fUNQ329(fUNQ278(a))+'"/></div>'}}var f="";if(fUNQ299(e.email,e)&&a[e.email]!=""){if(fUNQ44(a[e.email])){f='<div>e-mail: <a href="mailto:'+a[e.email]+'"  class="markerLabelDiv">'+a[e.email]+"</a></div>"}else{f="<div>e-mail:"+a[e.email]+"</div>"}}var b="";if(g==""&&fUNQ299(e.web,e)&&a[e.web]!=""){b='<div ><a href="'+urlizeUrl(a[e.web])+'" target="_blank"  class="markerLabelDiv">'+a[e.web]+"</a></div>"}h+=j;h+=f;h+=b;return h}function fUNQ44(b){return/^[a-zA-Z0-9._-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,20}$/.test(b)}function fUNQ45(b){return/^[a-zA-Z0-9_-]+$/.test(b)}function fUNQ47(a){jQuery("#moveToFilter").click(function(){var b=$("#toFilter");$("#noFilter option:selected").each(function(){if(a>b.children().length){$("#toFilter").append($(this).clone(true));$(this).remove()}});if(a<=b.children().length){jQuery("#moveToFilter").attr("disabled","disabled")}});jQuery("#removeFromFilter").click(function(){$("#toFilter option:selected").each(function(){$("#noFilter").append($(this).clone(true));$(this).remove()});jQuery("#moveToFilter").removeAttr("disabled")});jQuery("#removeAllFromFilter").click(function(){$("#toFilter option").each(function(){$("#noFilter").append($(this).clone(true));$(this).remove()});jQuery("#moveToFilter").removeAttr("disabled")})}function fUNQ48(){jQuery("#moveToSearch").click(function(){var a=$("#noSearch");$("#noSearch option:selected").each(function(){$("#toSearch").append($(this).clone(true));$(this).remove()})});jQuery("#removeFromSearch").click(function(){$("#toSearch option:selected").each(function(){$("#noSearch").append($(this).clone(true));$(this).remove()})});jQuery("#moveAllToSearch").click(function(){$("#noSearch option").each(function(){$("#toSearch").append($(this).clone(true));$(this).remove()})})}function fUNQ49(e,a,b,h,d){var c=jQuery("#"+e),k=jQuery("#"+a);c.empty();k.empty();var f="",g;for(g=0;g<h.length;g++){f+='<option value="'+h[g]+'">'+d[h[g]]+"</option>"}var j="";for(g=0;g<b.length;g++){j+='<option value="'+b[g]+'">'+d[b[g]]+"</option>"}if(f!=""){c.append(f)}if(j!=""){k.append(j)}}function fUNQ50(){editPageObject.filterListNames.length=0;editPageObject.filterListArray.length=0;editPageObject.filterListSortedKeyHash={}}function fUNQ51(){editPageObject.noSearchColumns=[];$("#noSearch option").each(function(){var a=$(this).attr("value");editPageObject.noSearchColumns.push(parseInt(a))})}function fUNQ52(a,c){var b=[];$("#toFilter option").each(function(){var d=$(this).attr("value");b.push(d)});if(b.length>0){editPageObject.filterColumnIdxs=b;fUNQ53(b,a,c)}else{if(editPageObject.filterListNames.length>0){editPageObject.filterListNames.length=0;editPageObject.filterListArray.length=0;editPageObject.filterListSortedKeyHash={}}}}function fUNQ53(b,a,c){editPageObject.filterListNames.length=0;editPageObject.filterListArray.length=0;editPageObject.filterListSortedKeyHash={};for(var d=0;d<b.length;d++){var e=b[d];if(e>=a.length){}else{var f=a[e];fUNQ54(c,f,e)}}}function fUNQ54(c,h,k){var m={};var j=true;var b=true;var f=0;var e=[];for(var g=0;g<c.length;g++){var a=c[g];var l=a[k];if(l==null||l.trim().length==0||l==ALL_FILTER){continue}l=l.trim();if(j){if(!$.isNumeric(fUNQ55(l))){j=false}}if(b){if(!fUNQ196(l)){b=false}}var d;if(m.hasOwnProperty(l)){d=m[l];d.push(g)}else{d=[];d.push(g);m[l]=d;e.push(l);f++}}if(j){e.sort(function(o,n){return fUNQ55(o)-fUNQ55(n)})}else{if(b){fUNQ79(e,editPageObject)}else{e.sort()}}editPageObject.filterListNames.push(h);editPageObject.filterListArray.push(m);editPageObject.filterListSortedKeyHash[h]=e}function fUNQ55(a){return parseFloat(a.toString().replace(/\$|\,|\s+|\%/g,""))}function fUNQ56(a){return a.toString().indexOf("%")!=-1?"%":""}function fUNQ57(a){return a.toString().indexOf("$")!=-1?"$":""}function fUNQ58(a){if(/^[$?.]/.test(a)){return fUNQ61(a.replace(new RegExp(/[$,]/g),""))}}function fUNQ59(a){if(/^[$?.]/.test(a)){return fUNQ61(a.replace(new RegExp(/[€,]/g),""))}return false}function fUNQ60(a){if(/^[£?.]/.test(a)){return fUNQ61(a.replace(new RegExp(/[£,]/g),""))}return false}function fUNQ61(a){return/^[-+]?\d*$/.test($.trim(a.replace(/[,.']/g,"")))}function fUNQ62(a){if(/^[£$€?.]/.test(a)){return fUNQ61(a.replace(new RegExp(/[£$€,]/g),""))}return false}function fUNQ63(b,e){var d=true;var h=true;var j=true;var c=true;var g=true;var k=true;for(var f=0;b!=null&&f<b.length;f++){if(b[f]!=null&&b[f].length>e){var a=b[f][e];if(b[f][e]!=null&&b[f][e].trim().length>1){k=false;if(d){if(fUNQ62(a.trim())){h=false;if(j&&fUNQ58(a.trim())){c=false;g=false}else{j=false}if(c&&fUNQ59(a.trim())){g=false}else{c=false}if(g&&fUNQ60(a.trim())){}else{g=false}}else{d=false;j=false;c=false;g=false}}if(h&&fUNQ61(a.trim())){}else{h=false}}}}if(k){return STRING_TYPE}if(h){return NUMBER_TYPE}if(c){return EURO_TYPE}if(j){return DOLLAR_TYPE}if(g){return POUND_TYPE}return STRING_TYPE}function fUNQ64(){var b="",c;if(mapObject.filterListNames.length==0){if(userSettings.title!=null&&userSettings.title.length>0){c=$("#filtersDiv");if(c!=null&&c.length>0){c.html('<div id="mapTitle" style="overflow: hidden;">'+userSettings.title+"</div>");c.show()}}else{c=$("#filtersDiv");if(c!=null&&c.length>0){c.hide()}}return}selectedFilterValues=new Array(mapObject.filterListNames.length);var o="",j;var p="";for(j=0;j<mapObject.filterListNames.length;j++){var l=[];var n=[];if(mapObject.multiSelectFilters==null||!mapObject.multiSelectFilters){n.push(ALL_FILTER)}n=n.concat(mapObject.filterListSortedKeyHash[mapObject.filterListNames[j]]);if(mapObject.filterCounts!=null&&mapObject.filterCounts){var f=mapObject.filterListSortedKeyHash[mapObject.filterListNames[j]];if(mapObject.multiSelectFilters==null||!mapObject.multiSelectFilters){l.push(mapDataLines.length)}for(var d=0;d<f.length;d++){l.push(fUNQ68(mapObject.filterListNames[j],f[d]).length)}}var a=fUNQ75(n,ALL_FILTER,j.toString()+"_rfilter",null,null,l,mapObject.multiSelectFilters);if(mapObject.filterListNames.length>4){if(j==0){o='<tr><td rowspan="2"><button id="filterOptionsBlank" class="btn-mod btn-mod-default btn-mod-xs" style="display: none;"  onclick="fUNQ240();" ><i class="icon-mod-minus"></i></button><button id="moreFilterOptions" class="btn-mod btn-mod-default btn-mod-xs" onclick="fUNQ239();" title="Show all filters"><i class="icon-mod-plus"></i></button></td>';b="<tr>"}else{if(j%3==0){o='<tr class="hide_tr"><td></td>';b='<tr class="hide_tr"><td></td>'}}o=o+"<td>"+mapObject.filterListNames[j]+"</td>";b=b+"<td>"+a+"</td>";if(j%3==2){o+="</tr>";b+="</tr>";p+=o;p+=b}else{if(mapObject.filterListNames.length==j+1){if(mapObject.filterListNames.length%3==1){o+="<td></td>";b+="<td></td>"}else{if(mapObject.filterListNames.length%3==0){o+="<td></td><td></td>";b+="<td></td><td></td>"}}o+="</tr>";b+="</tr>";p+=o;p+=b}}}else{o=o+"<td>"+mapObject.filterListNames[j]+"</td>";b=b+"<td>"+a+"</td>";selectedFilterValues[j]=ALL_FILTER}}if(mapObject.filterListNames.length<=4){p="<tr>"+o+"</tr><tr>"+b+"</tr>"}var h="";if(mapObject.filterListNames.length>4||mapObject.multiSelectFilters!=null||mapObject.multiSelectFilters){h=' style="overflow: visible;" '}var e="<div"+h+'><table id="filtersTable"><tbody>'+p+"</tbody></table></div>";c=$("#filtersDiv");if(!editMap&&(mapObject.multiSelectFilters==null||!mapObject.multiSelectFilters)){if(c!=null&&c.length>0){c.css("max-height",45)}}if(c!=null&&c.length>0){c.html(e);c.show()}for(j=0;j<mapObject.filterListNames.length;j++){var k=j;var g=j.toString()+"_rfilter";if(mapObject.multiSelectFilters!=null&&mapObject.multiSelectFilters){fUNQ65(g,k)}else{fUNQ67(g,k)}}}function fUNQ65(a,b){$("#"+a).multiselect({includeSelectAllOption:true,maxHeight:200,numberDisplayed:1,onChange:function(c,d){fUNQ66(a,b)},onDropdownShow:function(c){alert("drop down show event invoked!")}})}function fUNQ66(c,a){var d=$("select#"+c).val();multiSelectFilterValues[a]=d;for(var b=0;d!=null&&b<d.length;b++){}activeMultiSelectFilter=a;fUNQ281(mapObject);activeMultiSelectFilter=-1}function fUNQ67(b,a){jQuery("#"+b).change(function(){selectedFilterValues[a]=this.value;fUNQ281(mapObject)})}function fUNQ68(b,d){var a=mapObject.filterListNames.indexOf(b);if(a==-1){return[]}var c=mapObject.filterListArray[a];if(c.hasOwnProperty(d)){return c[d]}return[]}function fUNQ69(c,b,a){var d=$("#group_sel option:selected").attr("value");if(d=="none"||d==-1){a.sortedGroupKeys.length=0;a.groupHash={};a.markerImageIdx=[];a.groupCustomColorImageHash={};return}var e=BASIC_GROUP_COUNT;if(a.mapType=="advanced"){e=MAX_GROUPS}b=typeof b!=="undefined"?b:e;fUNQ76(c,d,b,a)}function fUNQ70(c,b,a){fUNQ69(c,b,a);if(a.sortedGroupKeys.length>0){fUNQ71(c.length,a)}}function fUNQ71(k,f){if(f.useCustomImages!=null&&f.useCustomImages){return}var a=new Array(k);f.groupImageHash={};var g=0;for(var c=0;c<f.sortedGroupKeys.length;c++){var h=f.sortedGroupKeys[c];if(f.groupHash.hasOwnProperty(h)){var b=f.groupHash[h];var e=g;if(f.groupCustomColorImageHash!=undefined&&f.groupCustomColorImageHash.hasOwnProperty(h)){e=f.groupCustomColorImageHash[h]}for(var d=0;d<b.length;d++){a[b[d]]=e}f.groupImageHash[h]=e;g++}}if(f.sortedGroupKeys.length>0){f.markerImageIdx=a}}function fUNQ72(a){if(mapObject.groupHash.hasOwnProperty(a)){return mapObject.groupHash[a]}return[]}function fUNQ73(e,g,c,d){var f=$("#"+c);var a="";$("option",$(f)).remove();for(var b=0;b<e.length;b++){if(d.length==e.length){a=" ("+d[b]+")"}if(fUNQ105(e[b],g)){f.append('<option value="'+e[b]+'" selected>'+e[b]+a+"</option>\n")}else{f.append('<option value="'+e[b]+'" >'+e[b]+a+"</option>\n")}}f.multiselect("rebuild")}function fUNQ74(e,g,c,d){var f=$("#"+c);var h="";var a="";for(var b=0;b<e.length;b++){if(d.length==e.length){a=" ("+d[b]+")"}if(e[b]==g){h=h.concat('<option value="'+e[b]+'" selected>'+e[b]+a+"</option>\n")}else{h=h.concat('<option value="'+e[b]+'" >'+e[b]+a+"</option>\n")}}f.html(h)}function fUNQ75(d,e,b,k,f,l,j){var n=false;var m="";var o="";var p="250";if(f!=undefined){p=f;m=' style="width: '+p+'px;" '}if(j!=undefined&&j!=null&&j){o=' class="multiselect" multiple="multiple" '}if(l!=undefined&&d.length==l.length){n=true}var c="";if(k){c='<label id="'+b+'_label" for="'+b+'" >'+k+"</label>"}var g="";var a='<select name="'+b+'" id="'+b+'"'+m+" "+o+">\n";for(var h=0;h<d.length;h++){if(n){g=" ("+l[h]+")"}if(d[h]==e){a=a.concat('<option class="selectFont" value="'+d[h]+'" selected>'+d[h]+g+"</option>\n")}else{a=a.concat('<option class="selectFont" value="'+d[h]+'" >'+d[h]+g+"</option>\n")}}a=a.concat("</select>");return c+a}function fUNQ76(c,o,k,j){if((typeof o=="undefined")||o<0){return}var n={};var l=true;var b=true;var g=0;var f=[];var e=[];var h;j.sortedGroupKeys.length=0;j.groupHash={};for(h=0;h<c.length;h++){var a=c[h];if(a==null||a.length==0){continue}var m=a[o];if(m==null||m.trim()==""){e.push(h);continue}if(l){if(!$.isNumeric(fUNQ55(m))){l=false}}m=m.trim();if(b){if(!fUNQ196(m)){b=false}}var d;if(n.hasOwnProperty(m)){d=n[m];d.push(h)}else{d=[];d.push(h);n[m]=d;f.push(m);g++}}if(e.length>0){k=k-1}if(k>=g){if(b){fUNQ79(f,j)}else{if(l){f.sort(function(q,p){return fUNQ55(q)-fUNQ55(p)})}else{f.sort()}}for(h=0;h<f.length;h++){j.sortedGroupKeys.push(f[h]);j.groupHash[f[h]]=n[f[h]]}}if(g>k){if(b){fUNQ79(f,j)}else{if(l){f.sort(function(q,p){return fUNQ55(q)-fUNQ55(p)})}else{f.sort(function(q,p){return q.toLowerCase().localeCompare(p.toLowerCase())})}}fUNQ77(n,f,g,k,j)}if(e.length>0){j.groupHash.Empty=e;j.sortedGroupKeys.push("Empty")}}function fUNQ77(o,b,e,l,k){var f;var a=Math.ceil(e/l);var p=e%l;if(p==0){p=l}var h,g,m,d,c;d=[];var n=0;for(f=0;f<l;f++){d=[];if(f<p){h=b[n];g=b[n+a-1];for(c=0;c<a;c++){d=d.concat(o[b[n]]);n++}}else{h=b[n];g=b[n+a-2];for(c=0;c<a-1;c++){d=d.concat(o[b[n]]);n++}}m=h+"-"+g;if(h==g){m=h}k.groupHash[m]=d;if(k.sortedGroupKeys.indexOf(m)==-1){k.sortedGroupKeys.push(m)}}}function fUNQ78(a,c,b){if(b.groupHash.hasOwnProperty(c)){return c}for(var d in b.groupHash){if(fUNQ105(a,b.groupHash[d])){return d}}return -1}function fUNQ79(c,a){var b;if(a.regionCode!=null&&a.regionCode.length>0&&a.regionCode!="us"){for(b=0;b<c.length;b++){c[b]=c[b].replace(/(\d+)\/(\d+)\//,"$2/$1/")}}c.sort(function(e,d){e=new Date(e);d=new Date(d);return e<d?-1:e>d?1:0});if(a.regionCode!=null&&a.regionCode.length>0&&a.regionCode!="us"){for(b=0;b<c.length;b++){c[b]=c[b].replace(/(\d+)\/(\d+)\//,"$2/$1/")}}}function fUNQ80(b,a){var d="",c;for(c=0;c<b.length;c++){if(b[c]==null||b[c].length==0){continue}d=d+fUNQ86(b[c],a)+"\n"}return d}function fUNQ81(b,a){var d="",c;for(c=0;c<b.length;c++){if(b[c]==null||b[c].length==0){continue}d=d+fUNQ87(b[c],a)+"\n"}return d}function safeLineProcessor(c,a,b){fUNQ82(c,a,b)}function fUNQ82(k,h,f){fUNQ84(k,h,f);return;var c=false;var j=0;var e=k.split("	");var n=k.split("\n");if(f==0){for(var g=0;g<n.length;g++){if(n[g].trim().indexOf("#")==0||n[g].trim()==""){continue}var d=n[g].split("	");j=d.length;break}}else{j=f}if(e.length<=1){fUNQ84(k,h,0);return}n=[];var b=0;var m=[];for(var g=0;g<e.length;g++){var a="";if(b==0&&e[g].indexOf("\n")>=0){if(e[g].length>1){e[g]=e[g].substring(1)}else{e[g]=""}}if((b+1)===j){if(e[g].startsWith('"')){var l=e[g].indexOf('"\n');m.push(fUNQ83(e[g].substring(0,l+1)));a=fUNQ83(e[g].substring(l+2))}else{var l=e[g].indexOf("\n");m.push(e[g].substring(0,l));a=e[g].substring(l+1)}}else{m.push(fUNQ83(e[g]))}b++;if(b==j){n.push(m);b=1;m=[];m.push(a)}}for(var g=0;g<n.length;g++){h.push(n[g])}}function fUNQ83(a){if(a.length>1&&a.indexOf("\n")>0&&a.indexOf('"')==0&&a.indexOf('"',a.length-1)>-1){return a.substring(1,a.length-1)}return a}function fUNQ84(g,e,c){var a=false;var f=0;var j=g.split("\n");for(var d=0;d<j.length;d++){if(j[d].trim().indexOf("#")==0||j[d].trim()==""){continue}var b=j[d].split("	");if(!a){if(c&&c>0){f=c}else{f=b.length}a=true}var h=1;while(b[b.length-1].length>0&&b[b.length-1].indexOf('"')==0&&d+h<j.length){b[b.length-1]+="\n"+j[d+h];if(j[d+h].length>0&&(j[d+h].endsWith('"')||j[d+h].indexOf('"	')>=0)){b[b.length-1]=fUNQ85(b[b.length-1]);if(b.join("	").split("	").length==f&&b.join("	").match(/\"/g||[]).length%2==0){b=b.join("	").split("	");d+=h;break}else{if(b.join("	").split("	").length>f){break}}}h++}e.push(b)}}function fUNQ85(c){var a=c.indexOf('"	');if(a<1){return c}var b=c.substr(0,a).replace(/\t/g,"")+c.substr(a,c.length-a);return b}function fUNQ86(f,c){var e="";for(var d=0;d<f.length;d++){if((c.hideLatLong==null||c.hideLatLong==true)&&d==c.emm_lat||d==c.emm_lng){continue}var b=(f[d]==null?"":f[d].toString());var a=b;if(a.indexOf("\n")>=0){if(a.startsWith('"')&&a.endsWith('"')){}else{a='"'+a+'"'}}if(d>0){e+="	"}e+=a}return e}function fUNQ87(e,b){var d="";for(var c=0;c<e.length;c++){var a=(e[c]==null?"":e[c].toString());result=a;if(result.search(/(	|\n)/g)>=0){if(result.startsWith('"')&&result.endsWith('"')){}else{result='"'+result+'"'}}if(c>0){d+="	"}d+=result}return d}function fUNQ88(e){var d="";for(var c=0;c<e.length;c++){if((mObject.hideLatLong==null||mObject.hideLatLong==true)&&c==mObject.emm_lat||c==mObject.emm_lng){continue}var b=(e[c]==null?"":e[c].toString());var a=b.replace(/"/g,'""');if(a.search(/("|	|\n)/g)>=0){a='"'+a+'"'}if(c>0){d+="	"}d+=a}return d}function fUNQ89(a){if(a&&a.length>0){var b=$('#region_sel option[value="'+a.toLowerCase()+'"]');if(b.length>0){b.prop("selected",true)}}}function fUNQ90(b){if(b.country_code){var a=$('#region_sel option[value="'+b.country_code.toLowerCase()+'"]');if(a.length>0){a.prop("selected",true)}}}function fUNQ91(a){$.ajax({type:"GET",url:"/location",data:{ip_addr:a},dataType:"json",success:function(d,c,b){var e="OK";if(d.errorMessage){e=d.errorMessage}if(d.reservedIp!=0){e="Reserved IP"}fUNQ163(d,e,a)},error:function(d,c,b){var e="Other Error";if(d.errorMessage){e=d.errorMessage}fUNQ163(d,e,a)}})}function fUNQ92(){return;if(!((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined"))){return}var c=location.pathname;var d=$("#map_lang_sel");var a=c.split("/");if(a.length>0){for(var b=0;b<a.length;b++){if(a[b].length==2||a[b].length==5){if(d.find('option[value="'+a[b]+'"]').length()>0){$('#map_lang_sel option[value="'+a[b]+'"]').prop("selected",true);return}}}}}function fUNQ93(){$("#region_sel").change(function(){editPageObject.regionCode=this.value;fUNQ41()});if(!((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined"))){return}$.ajax({type:"GET",url:"/location",dataType:"json",success:function(c,b,a){if(c.errorMessage){}if(c.reservedIp==0){fUNQ90(c)}},error:function(c,b,a){if(c.errorMessage){}}})}function fUNQ94(b,c){var a=fUNQ318(mapObject);$.ajax({type:"POST",url:"/savekml",data:{kml:a,Id:b},cache:false,dataType:"json",success:function(f,e,d){if(f.errorMessage){alert(f.errorMessage)}fUNQ95(true,b,c)},error:function(f,e,d){if(f.errorMessage){alert(f.errorMessage)}fUNQ95(false)}})}function fUNQ95(l,j,c,f){var o=$("#mapSaveStatus");var m=$("#mapUrl");o.show();if(l){var k="";if(savedMapId==null){savedMapId=j;if(typeof EditingMap=="undefined"){fUNQ110(j)}saveMapEditId=c}else{k="re-"}var b="";if(saveCount>1){b=" ( saved "+saveCount+" times )"}fUNQ96(o,"<h5>Your map was successfully "+k+"saved."+b+"</h5>","success");saveCount++;if(j!=null&&m.length>0){userSettings.name=j.toString();var d=location.protocol+"//"+location.hostname+"/map/";var n=location.protocol+"//"+location.hostname+"/map/"+j.toString();m.html('<pre><p style="margin-bottom: 0px;">The map url is </p><a href="'+n+'" target="_blank">'+n+"</a></pre>");var h=' <pre><p style="margin-bottom: 0px;">The map url is </p>  <a id="genMapUrl" href="'+n+'" target="_blank">'+d+'<span  id="editable-url">'+j.toString()+'</span></a><span  id="mod-url" style="display: none;"></span> <a onclick="fUNQ204(); return false;"  id="editable_url_btn" class="btn btn-mini btn-primary" href="#">Edit</a><span id="edit-slug-buttons" style="display: none;"><a onclick="fUNQ205(); return false;"  class="btn btn-mini btn-primary" href="#">Save</a> <a onclick="fUNQ206(); return false;" style=" white-space: nowrap; font-size: 11px; margin-right: 10px;" href="#">Cancel</a></span><span id="aliasStatusDiv" style="margin-left: 5px; margin-bottom: 0; padding: 4px; white-space: nowrap;"></span><span id="aliasInstDiv" style="display: none;"><p>Valid characters are numbers, letters, underscores (_) and dashes (-).</p></span></pre>';m.html(h);if(c!=null&&c.length>0&&geoCodeStats!=null&&geoCodeStats.limitHit){var e=$("#bulkGeoUrl");var g=location.protocol+"//"+location.hostname+"/bulkgeo/"+j.toString()+"/"+c.toString();e.html('<pre><p style="margin-bottom: 0px;">Automatically geo-code the remaining items by clicking </p><a href="'+g+'" target="_blank">'+g+"</a></pre>");e.show()}if(userSettings.email!=null&&userSettings.email){var a=$("#emailDisplay");a.show()}}if(typeof EditingMap=="undefined"){if(!m.is(":visible")){m.show()}$("#mapModalButton").button("reset");$("#mapModalButton").text("Save Map Again")}}else{$("#mapModalButton").button("reset");if(f==null){f="Try using https://www.easymapmaker.com"}fUNQ96(o,"<h5>There was a problem saving the map : "+f+" .</h5>","error")}}function fUNQ96(c,b,a){c.html(b);if(!c.hasClass("alert")){c.addClass("alert")}if(a=="error"){if(!c.hasClass("alert-error")){c.addClass("alert-error")}if(c.hasClass("alert-success")){c.removeClass("alert-success")}}else{if(c.hasClass("alert-error")){c.removeClass("alert-error")}if(!c.hasClass("alert-success")){c.addClass("alert-success")}}}function fUNQ97(){editPageObject.customSearchText=$("#searchText").val();mapObject.customSearchText=editPageObject.customSearchText}function fUNQ98(b){userSettings.email=$("#emailInput").val();userSettings.title=$("#titleInput").val();userSettings.description=$("#descriptionInput").val();userSettings.protectionLevel=$("input[name=protectionLevel]:checked").val();userSettings.mapLanguage=$("#map_lang_sel option:selected").val();if(typeof siteLanguage!=="undefined"){userSettings.userLanguage=siteLanguage}if(window.location.protocol=="https:"||httpOverRide){userSettings.mapPw=$("#pwInput").val();if($("#pwInputOld").length>0){userSettings.oldPw=$("#pwInputOld").val()}}var a=$("#genKmlCB");if(a.length>0){userSettings.genKML=a.is(":checked")}userSettings.autoDelete=true;userSettings.dataOnPage=true;if(b!=null&&b){userSettings.autoDelete=($("input[name=mapDelete]:checked").val()=="true");if($("input[name=mapLayout]:checked").val()=="mapOnly"){userSettings.dataOnPage=false}}return !(userSettings.email.length>0&&!fUNQ44(userSettings.email))}function fUNQ99(){if(removedMarkers.length>0){fUNQ100();var a=BASIC_GROUP_COUNT;if(mapObject.mapType=="advanced"){a=MAX_GROUPS}fUNQ76(mapDataLines,mapObject.group,a,mapObject);if(mapObject.sortedGroupKeys.length>1){fUNQ71(mapDataLines.length,mapObject)}fUNQ53(mapObject.filterColumnIdxs,mapObject.columnHeaderArray,mapDataLines)}}function fUNQ100(){var a;removedMarkers.sort(function(d,c){return d-c});for(a=removedMarkers.length-1;a>=0;a--){mapDataLines.splice(removedMarkers[a],1);gMapMarkers.splice(removedMarkers[a],1)}for(a=0;a<gMapMarkers.length;a++){gMapMarkers[a].idx=a}}function fUNQ101(){fUNQ99();fUNQ324(mapObject);var f=fUNQ81(mapDataLines,mapObject);var c=JSON.stringify(mapObject);userSettings.name=savedMapId;var d=JSON.stringify(userSettings);var e="";var b="";var a="";if(savedMapId!=null){a=savedMapId}if(originalData!=null&&geoCodeStats.limitHit){e=originalData}if(geoCodeStats!=null&&geoCodeStats.limitHit){b=JSON.stringify(geoCodeStats)}$.ajax({type:"POST",url:"/savedata",data:({usercontent:f,configContent:c,mapDetails:d,tempData:e,tempStats:b}),cache:false,dataType:"json",success:function(j,h,g){if(j.errorMessage){}if(userSettings.genKML!=null&&userSettings.genKML==true){fUNQ94(savedMapId,saveMapEditId)}else{fUNQ95(true,savedMapId,saveMapEditId)}},error:function(j,h,g){if(j.errorMessage){}fUNQ95(false)}})}function fUNQ102(){fUNQ99();fUNQ324(mapObject);var g=fUNQ81(mapDataLines,mapObject);var c=JSON.stringify(mapObject);var d=JSON.stringify(userSettings);var f="";var b="";var a="";var e="/savedata";if(savedMapId!=null){a=savedMapId;e="/util/reSaveMap.php"}if(originalData!=null&&geoCodeStats.limitHit){f=originalData}if(geoCodeStats!=null&&geoCodeStats.limitHit){b=JSON.stringify(geoCodeStats)}$.ajax({type:"POST",url:e,data:({usercontent:g,configContent:c,mapDetails:d,mapType:mapObject.mapType,existingId:a,existingEditId:saveMapEditId,tempData:f,tempStats:b}),cache:false,dataType:"json",success:function(k,j,h){if(k.errorMessage){}if(userSettings.genKML!=null&&userSettings.genKML==true){fUNQ94(k.uid,k.editId)}else{fUNQ95(true,k.uid,k.editId)}},error:function(k,j,h){if(k.errorMessage){}fUNQ95(false)}})}function fUNQ103(a){return(typeof(a)==typeof(Function))}function fUNQ104(b,a){for(var c in b){if(fUNQ105(b[c],a)){return true}}return false}function fUNQ105(b,a){return(a.indexOf(b)>=0)}function fUNQ106(c,b){var a=[];for(var d=0;d<c.length;d++){if(b.indexOf(c[d])!==-1){a.push(c[d])}}return a}function fUNQ107(b,a){var d=0;for(var c=0;c<b.length;c++){if(a.indexOf(b[c])!==-1){d++}}return d}function fUNQ108(b,a,e){var d=0;for(var c=0;c<b.length;c++){if(a.indexOf(b[c])!==-1){d++;if(e!=null&&e.indexOf(b[c])){d--}}}return d}function fUNQ109(){if(typeof localStorage=="object"){return localStorage}else{if(typeof globalStorage=="object"){return globalStorage[location.host]}}return null}function fUNQ110(a){var d=fUNQ109();if(d!=null){var b=[];var c=d.getItem("emmMaps");if(c!=null&&c.length>0){b=JSON.parse(c)}b.push(a);d.setItem("emmMaps",JSON.stringify(b))}}function fUNQ111(b){var e=fUNQ109();if(e!=null){var c=[];var d=e.getItem("emmMaps");if(d!=null&&d.length>0){c=JSON.parse(d)}var a=c.indexOf(b);if(a>=0){c.splice(a,1)}e.setItem("emmMaps",JSON.stringify(c))}}var removedMarkers=[];var gMapMarkers=[];var infoWindows=[];var gMap=null;var openMarker=null;var openWindow=null;var ignorePagingEvent=false;var samePosMarkers=[];var groupsOff=[];var selectedMarkers=[];var selectedMarkerSet=false;var markerCluster=null;var showFilterCounts=false;var googleMapOptions=[];var DISPLAYABLE_ITEMS_PER_PAGE=50;var CLUSTER_ZOOM_LEVEL=11;var ITEMS_PER_PAGE=5;var currentPageMarkerNum=1;var lastPageMarkerNum=1;var nextPageMarkerNum=1+ITEMS_PER_PAGE;var previousPageMarkerNum=1;var searchTermHash={};var secondarySearchTermHash={};var mobileDevice=false;var tabletDevice=false;var iosDevice=false;var inIframe=false;var showDirections=true;var useGoogleMapsDirections=false;var mobileSearchBox=false;var directionsService=null;var directionsDisplay=null;var sizeMapOnLoad=true;var markerDescriptions=[];var markerImgEnding=IMG_FILE_ENDING;var showMoreOptions=false;var moreOptionsInit=false;var exportData=false;var zoomInSearching=false;var mapGeocoder=null;var validNav=true;var navMarker=null;var showNumberedMarkers=false;var circle=null;var circleFilter=false;var showDistance=false;var circleRadius=0;var activeDirTextBox=0;var nearAddressTextBox=false;function initMap(p,d){if(typeof mapDataLines==="undefined"){$("#map").html("The map could not be loaded.  Try refreshing the page.");return}if(mapObject.showLabels==null){mapObject.showLabels=true}if(mapObject.showMoreOptions!=null&&mapObject.showMoreOptions){showMoreOptions=true}if(mapObject.filterCounts!=null&&mapObject.filterCounts){showFilterCounts=true}if(mapObject.sortedGroupKeys!=null&&mapObject.sortedGroupKeys.length>11){markerImgEnding=DOT_IMAGE_ENDING}if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))||((navigator.userAgent.match(/mobile/i))&&(navigator.userAgent.match(/Android/i)))||(navigator.userAgent.match(/blackberry/i))||(navigator.userAgent.match(/windows phone/i))){mobileDevice=true}if(!mobileDevice&&((navigator.userAgent.match(/Android/i))||(navigator.userAgent.match(/iPad/i)))){tabletDevice=true}if((navigator.userAgent.match(/iPad/i))||(navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))){iosDevice=true}if(window.location!=window.parent.location){inIframe=true;if(fUNQ322("showData")=="1"){inIframe=false}else{$("body").html(fUNQ247())}}else{}if(!inIframe&&!mobileDevice&&!tabletDevice&&!editMap){$("#map").css("height",fUNQ323()-150);if(mapObject.exportData!=null&&mapObject.exportData){exportData=true}}if(mapObject.zoomInSearching!=null&&mapObject.zoomInSearching){zoomInSearching=true}if(mapObject.showMarkerNumbers!=null&&mapObject.showMarkerNumbers){if(!(mapObject.useCustomImages!=null&&mapObject.useCustomImages)){showNumberedMarkers=true}}if(mapObject.showDirectionDescription!=null&&mapObject.showDirectionDescription==false){showDirections=false}if(mapObject.useGoogleMapsDirections!=null&&mapObject.useGoogleMapsDirections===true){useGoogleMapsDirections=true;showDirections=false}if(!inIframe&&tabletDevice&&showMoreOptions){$("#left").html(fUNQ246())}googleMapOptions=[google.maps.MapTypeId.ROADMAP,google.maps.MapTypeId.TERRAIN,google.maps.MapTypeId.SATELLITE,google.maps.MapTypeId.HYBRID];var f=googleMapOptions[d];if(gMap!=null){return}var l=false;if(mapObject.scrollWheel!=null&&mapObject.scrollWheel==true){l=true}var a=new google.maps.LatLng(39.8282,-98.5795);var n=4;if(fUNQ309(mapObject.center_lat,mapObject.center_lng)){a=new google.maps.LatLng(mapObject.center_lat,mapObject.center_lng);if(mapObject.customZoomAndCenter!=null&&mapObject.customZoomAndCenter){if(mapObject.zoom!=null&&mapObject.zoom>0&&mapObject.zoom<25){n=mapObject.zoom;sizeMapOnLoad=false}}}var m=null;if(mapObject.zoomInLevel!=null&&mapObject.zoomInLevel){m=mapObject.zoomInLevel;if(m<=CLUSTER_ZOOM_LEVEL){CLUSTER_ZOOM_LEVEL=m-1}}var g={zoom:n,center:a,mapTypeControl:false,scaleControl:true,scrollwheel:l,minZoom:1,maxZoom:m,panControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},scaleControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}};gMap=new google.maps.Map(document.getElementById("map"),g);gMap.setMapTypeId(f);if(!mobileDevice&&showMoreOptions){var h=document.createElement("div");h.innerHTML='<img id="moreOptionsBlank" src="'+cdnUrl+'/img/more_options_blank.png" style="display: none;"><img id="moreOptions" src="'+cdnUrl+'/img/more_options.png" onclick="fUNQ238();" style="cursor: pointer; opacity: .85;" title="Show more options" alt="Click to see direction and nearby (distance filtering)">';h.index=1;gMap.controls[google.maps.ControlPosition.TOP_LEFT].push(h)}else{if(editMap){var h=document.createElement("div");h.innerHTML='<img id="moreOptionsBlank" src="'+cdnUrl+'/img/more_options_blank.png" ><img id="moreOptions" src="'+cdnUrl+'/img/more_options.png" onclick="fUNQ238();" style="display: none; cursor: pointer; opacity: .85;" alt="Click to see direction and nearby (distance filtering)" title="Show more options">';h.index=1;gMap.controls[google.maps.ControlPosition.TOP_LEFT].push(h)}}if((mobileDevice||tabletDevice)&&!inIframe){var c=document.createElement("div");c.innerHTML='<img id="navHide" src="'+cdnUrl+'/img/location_nav2_small.png" style="display: none;" onclick="fUNQ236();"><img id="navShow" src="'+cdnUrl+'/img/location_nav1_small.png" onclick="fUNQ237();">';c.index=1;gMap.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(c)}var e=document.createElement("div");fUNQ251(e,gMap,myMapOptions,f,googleMapOptions);e.index=1;gMap.controls[google.maps.ControlPosition.TOP_RIGHT].push(e);google.maps.event.addListener(gMap,"click",function(){if(openWindow!=null){openWindow.close()}});if(mapObject.emm_lat>-1&&mapObject.lat==-1){mapObject.lat=mapObject.emm_lat}if(mapObject.emm_lng>-1&&mapObject.lng==-1){mapObject.lng=mapObject.emm_lng}addMarkers(mapObject.lat,mapObject.lng,mapDataLines,mapObject);if(editMap){mapObject.center_lat=gMap.getCenter().lat();mapObject.center_lng=gMap.getCenter().lng()}fUNQ280(mapObject);if(mobileDevice&&mapObject.mobileSearchEnabled!=null&&mapObject.mobileSearchEnabled==true){fUNQ311();if(mapObject.customSearchText!=null&&mapObject.customSearchText.length>0){$("#searchBox").attr("placeholder",mapObject.customSearchText)}}if(mobileDevice&&inIframe){var b=$("#mapHeader");var o=$("#map");o.css("top",b.outerHeight())}else{}if(!mobileDevice){fUNQ64();fUNQ311();if(mapObject.customSearchText!=null&&mapObject.customSearchText.length>0){$("#searchBox").attr("placeholder",mapObject.customSearchText)}if(!inIframe&&mapObject.displayDataOnPage&&!tabletDevice){fUNQ302()}if(inIframe){var b=$("#mapHeader");var o=$("#map");o.css("top",b.outerHeight());setTimeout(function(){var s=$("#mapHeader");var r=$("#map");r.css("top",s.outerHeight());if(showMoreOptions){$("#left").css("top",s.outerHeight())}var u=$("#descriptionDiv");var t=0;if(u.length>0){t+=u.outerHeight(true)}var q=$("#groupChecksDiv");if(q.length>0&&q.is(":visible")){r.css("bottom",q.outerHeight()+t);if(showMoreOptions){$("#left").css("bottom",q.outerHeight()+t+6)}if(t>0){q.css("bottom",t)}}else{if(t>0){r.css("bottom",t);if(showMoreOptions){$("#left").css("bottom",t)}}}if(showMoreOptions&&inIframe){$("#dirTextDiv").css("height",$("#map").outerHeight()-137)}google.maps.event.trigger(gMap,"resize")},2000)}if(showMoreOptions&&!inIframe&&tabletDevice){var j=0;if($("#mapHeader").length>0){j=$("#mapHeader").outerHeight()}$("#dirTextDiv").css("height",250-j);$("#left").css("height",400-j);$("#left").css("top",j)}}if(mapDataLines.length>=1000&&!mapObject.clustering){google.maps.event.addListener(gMap,"idle",showMarkers)}if(showMoreOptions){moreOptionsInit=true;fUNQ230()}if(exportData){fUNQ226()}setTimeout(function(){$("div").removeClass("gm-style")},3000);if(!editMap&&!inIframe&&!mobileDevice&&!tabletDevice){var k;setTimeout(reSizePcMap,1000);$(window).resize(function(){if(k){clearTimeout(k)}k=setTimeout(reSizePcMap,200)})}}function fUNQ225(b){groupsOff=[];activeDirTextBox=0;nearAddressTextBox=false;showDirections=true;useGoogleMapsDirections=false;showNumberedMarkers=false;showFilterCounts=false;if(mapObject.filterCounts!=null&&mapObject.filterCounts){showFilterCounts=true}if(mapObject.zoomInSearching!=null&&mapObject.zoomInSearching){zoomInSearching=true}if(mapObject.showMarkerNumbers!=null&&mapObject.showMarkerNumbers){if(!(mapObject.useCustomImages!=null&&mapObject.useCustomImages)){showNumberedMarkers=true}}if(mapObject.showDirectionDescription!=null&&mapObject.showDirectionDescription==false){showDirections=false}if(mapObject.useGoogleMapsDirections!=null&&mapObject.useGoogleMapsDirections===true){useGoogleMapsDirections=true;showDirections=false}var g=false;if(mapObject.scrollWheel!=null&&mapObject.scrollWheel==true){g=true}var h=null;if(mapObject.zoomInLevel!=null&&mapObject.zoomInLevel){h=mapObject.zoomInLevel}var d={zoom:gMap.getZoom(),center:gMap.getCenter(),mapTypeControl:false,scaleControl:true,scrollwheel:g,minZoom:1,maxZoom:h,panControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},zoomControlOptions:{position:google.maps.ControlPosition.LEFT_TOP},scaleControlOptions:{position:google.maps.ControlPosition.LEFT_BOTTOM}};gMap.setOptions(d);if(openWindow!=null){openWindow.close()}fUNQ280(mapObject);fUNQ64();sizeMapOnLoad=false;for(var e=0;e<gMapMarkers.length;e++){if(gMapMarkers[e]!=null){google.maps.event.clearInstanceListeners(gMapMarkers[e])}}for(var e=0;e<infoWindows.length;e++){if(infoWindows[e]!=null){google.maps.event.clearInstanceListeners(infoWindows[e])}}if(markerCluster!=null){markerCluster.clearMarkers()}for(var e=0;e<gMapMarkers.length;e++){if(gMapMarkers[e]!=null){google.maps.event.clearInstanceListeners(gMapMarkers[e]);gMapMarkers[e].setMap(null)}}gMapMarkers=[];addMarkers(mapObject.lat,mapObject.lng,mapDataLines,mapObject);var c=myMapOptions[b];var j=$("#MapStyle option:selected").attr("value");if(c!=j){$("#MapStyle").val(c);var f=googleMapOptions[b];gMap.setMapTypeId(f)}if(mapObject.showMoreOptions!=null&&mapObject.showMoreOptions){showMoreOptions=true;if(moreOptionsInit==false){moreOptionsInit=true;fUNQ230()}if(!$("#left").is(":visible")){$("#moreOptions").show();$("#moreOptionsBlank").hide();var a=$("#mapContainer");if(a.hasClass("padLeft")){a.removeClass("padLeft")}google.maps.event.trigger(gMap,"resize")}}else{showMoreOptions=false;if(moreOptionsInit==true){$("#moreOptionsBlank").show();$("#moreOptions").hide();var a=$("#mapContainer");if(a.hasClass("padLeft")){a.removeClass("padLeft")}if($("#left").is(":visible")){$("#left").hide();google.maps.event.trigger(gMap,"resize")}}}fUNQ311()}function reSizePcMap(){var e=0;var c=$("#map");var a=$("#mapHeader");if(a.length>0&&a.outerHeight()>0&&a.is(":visible")){e+=a.outerHeight()}var b=$("#groupChecksDiv");if(b.length>0&&b.is(":visible")){if(b.outerHeight()>c.outerHeight()){e+=(b.outerHeight()-c.outerHeight())}else{e+=(b.outerHeight())}}var f=$("#descriptionDiv");if(f.length>0&&f.outerHeight()>0){if(f.outerHeight()>c.outerHeight()){e+=(f.outerHeight()-c.outerHeight())}else{e+=f.outerHeight()}}$("#map").css("height",fUNQ323()-e-10);$("#mapContainer").css("min-height",fUNQ323()-e-10);if(showMoreOptions){$("#left").css("height",fUNQ323()-e-10);$("#dirTextDiv").css("height",fUNQ323()-e-140)}google.maps.event.trigger(gMap,"resize");var d=$("#ui-id-1");if(d.length>0){d.css("max-height",fUNQ323()-e-10)}}function fUNQ226(){$("#exportData").show();$("#exportDataDisplay").click(function(){var a=$("#exportDataDisplay").text();if(a=="Show Export Data"){var b=$("#sourceData");$("#tableText").show();b.select();$("#exportDataDisplay").text("Hide Data");b.val(fUNQ228());$("#exportDataRefresh").show()}else{$("#tableText").hide();$("#exportDataDisplay").text("Show Export Data");$("#exportDataRefresh").hide()}});$("#exportDataRefresh").click(function(){$("#sourceData").val(fUNQ228())});$("#exportToExcel").click(function(){fUNQ227()})}function fUNQ227(){var e=[];var b=[];b.push(mapObject.columnHeaderArray);var a=0;var c=gMap.getBounds();for(a=0;a<gMapMarkers.length;a++){if(gMapMarkers[a].show&&c.contains(gMapMarkers[a].getPosition())){b.push(mapDataLines[a])}}e.push(mapObject.emm_acc);e.push(mapObject.emm_lat);e.push(mapObject.emm_lng);var d={};d.dataList=b;d.ignoreItems=e;fUNQ330("/util/ExportExcel.php",d)}function fUNQ228(){var c=gMap.getBounds();var b=0;var a="";a+=fUNQ229(mapObject.columnHeaderArray);for(b=0;b<gMapMarkers.length;b++){if(gMapMarkers[b].show&&c.contains(gMapMarkers[b].getPosition())){a+=fUNQ229(mapDataLines[b])}}return a}function fUNQ229(d){var c="";var b=0;for(var a=0;a<d.length;a++){if(a!=mapObject.emm_acc&&a!=mapObject.emm_lat&&a!=mapObject.emm_lng){if(b!=0){c+="\t"}else{b=1}c+=d[a]}}return c+"\n"}function fUNQ230(){if($("#mapWindowData").length==0){var a=$("#displayDistance");if(a.length>0){a.hide()}}$("#dirTabDisplay").click(function(){fUNQ241()});$("#clearDirSubmit").click(function(){$("#dirAddress1").val("");$("#dirAddress2").val("");$("#dirError").hide();activeDirTextBox=0;if(directionsDisplay!=null){directionsDisplay.setPanel(null);directionsDisplay.setMap(null)}});$("#directionSubmit").click(function(){var d=$("#dirError");var c=$("#dirAddress1").val();var b=$("#dirAddress2").val();d.hide();if(c.trim().length==0){d.show();d.html("invalid start address");return}else{if(b.trim().length==0){d.show();d.html("invalid end address");return}}fUNQ245(c,b)});$("#hideOptions").click(function(){var b=$("#moreOptionsBlank");$("#left").hide();$("#moreOptions").show();b.hide();if(inIframe||tabletDevice){$("#map").css("left",0)}else{var c=$("#mapContainer");if(c.hasClass("padLeft")){c.removeClass("padLeft")}}google.maps.event.trigger(gMap,"resize");activeDirTextBox=0;nearAddressTextBox=false});$("#nearbyTabDisplay").click(function(){$("#leftDirDisplay").hide();$("#leftNearbyDisplay").show();activeDirTextBox=0;var b=$("#nearbyTabDisplay");if(!b.hasClass("activeDirHeader")){b.addClass("activeDirHeader")}$("#dirTabDisplay").removeClass("activeDirHeader")});$("#clearNearbySubmit").click(function(){$("#nearAddress").val("");$("#nearRadius").val("");$("#nearbyError").hide();if(circle!=null){circle.setMap(null)}if(circleFilter){showDistance=false;circleFilter=false;fUNQ281(mapObject)}nearAddressTextBox=false});$("#nearbySubmit").click(function(){var g="";var b=$("#nearRadius").val();var e=$("input[name=distType]:checked").val();var f=$("#showCircle").is(":checked");showDistance=$("#showDistance").is(":checked");var d=$("#nearAddress").val();var j="KM";var h=$("#nearbyError");if(!$.isNumeric(b)||b<=0){g="Invalid radius: "+b;h.html(g);h.show();return}if(d.trim().length==0){g="Error: Blank location.";h.html(g);h.show();return}if(e=="mi"){b*=1.6093;j="miles"}b*=1000;if(mapGeocoder==null){mapGeocoder=new google.maps.Geocoder()}var c=true;mapGeocoder.geocode({address:d},function(n,k){if(k==google.maps.GeocoderStatus.OK){var l=n[0].geometry.location;gMap.setCenter(n[0].geometry.location);if(circle!=null){circle.setMap(null)}circle=new google.maps.Circle({clickable:false,draggable:false,editable:false,fillColor:"blue",fillOpacity:0.2,strokeColor:"blue",strokeOpacity:0.4,radius:b,map:gMap,center:l,visible:f});gMap.fitBounds(circle.getBounds());circleFilter=true;circleRadius=b;for(var m=0;m<gMapMarkers.length;m++){if(gMapMarkers[m]!=null){if(circle.getBounds().contains(gMapMarkers[m].getPosition())){gMapMarkers[m].distanceM=google.maps.geometry.spherical.computeDistanceBetween(l,gMapMarkers[m].getPosition());if(showDistance){if(e=="mi"){gMapMarkers[m].displayDistance=gMapMarkers[m].distanceM*0.00062137}else{gMapMarkers[m].displayDistance=gMapMarkers[m].distanceM*0.001}if(gMapMarkers[m].displayDistance<1){gMapMarkers[m].displayDistance=gMapMarkers[m].displayDistance.toFixed(3)}else{if(gMapMarkers[m].displayDistance<100){gMapMarkers[m].displayDistance=gMapMarkers[m].displayDistance.toFixed(2)}else{gMapMarkers[m].displayDistance=gMapMarkers[m].displayDistance.toFixed()}}gMapMarkers[m].displayDistance+=" "+j}}}}fUNQ281(mapObject)}else{c=false}});if(c){h.hide()}else{h.html("Problem find the location: "+d);h.show()}});$("#dirAddress1").click(function(){activeDirTextBox=1});$("#dirAddress2").click(function(){activeDirTextBox=2});$("#nearAddress").click(function(){nearAddressTextBox=true})}function fUNQ231(){$("#navButtonId").show();$("#hideNavButtonId").hide();if(navMarker!=null){navMarker.setMap(null)}if(navWatchId!=null){navigator.geolocation.clearWatch(navWatchId)}}function fUNQ232(){if(validNav&&navigator&&navigator.geolocation){navigator.geolocation.getCurrentPosition(showNewPosition,newErrorCallback)}else{validNav=false;$("#navShow").hide();$("#navHide").hide()}}function fUNQ233(b){var a=new google.maps.LatLng(position.coords.latitude,position.coords.longitude);if(navMarker!=null){navMarker.setPosition(a)}}function fUNQ234(a){$("#navButtonId").hide();$("#hideNavButtonId").show();if(mobileDevice||tabletDevice){navWatchId=navigator.geolocation.watchPosition(function(f){fUNQ233(f)})}var c=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);if(navMarker==null){var b=cdnUrl+"/img/nav1_small.png";var d={url:b,size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,16)};navMarker=new google.maps.Marker({position:c,map:gMap,icon:d,zIndex:15})}else{navMarker.setPosition(c);navMarker.setMap(gMap)}var e=gMap.getZoom();if(e<12){e=14}else{if(e<16){e=15}}gMap.panTo(navMarker.getPosition());gMap.setZoom(e)}function fUNQ235(a){alert("Make sure location services are enabled appropriately and you are using https.")}function fUNQ236(){$("#navShow").show();$("#navHide").hide();if(navMarker!=null){navMarker.setMap(null)}}function fUNQ237(){if(validNav&&navigator.geolocation){navigator.geolocation.getCurrentPosition(showPosition,errorCallback)}else{validNav=false;$("#navShow").hide();$("#navHide").hide()}}function errorCallback(a){alert("Make sure location services are enabled appropriately.");validNav=false;$("#navShow").hide();$("#navHide").hide()}function getCurrentNavPostion(a){$("#navShow").hide();$("#navHide").show();var c=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);if(navMarker==null){var b=cdnUrl+"/img/nav1_small.png";var d={url:b,size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,16)};navMarker=new google.maps.Marker({position:c,map:gMap,icon:d,zIndex:15})}else{navMarker.setPosition(c);navMarker.setMap(gMap)}}function showPosition(a){$("#navShow").hide();$("#navHide").show();var d=new google.maps.LatLng(a.coords.latitude,a.coords.longitude);if(navMarker==null){var c=cdnUrl+"/img/nav1_small.png";var f={url:c,size:new google.maps.Size(32,32),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(16,16)};navMarker=new google.maps.Marker({position:d,map:gMap,icon:f,zIndex:15})}else{navMarker.setPosition(d);navMarker.setMap(gMap)}var g=gMap.getZoom();if(g<12){g=14}else{if(g<16){g=15}}gMap.panTo(navMarker.getPosition());gMap.setZoom(g);var b=fUNQ315(a.coords.latitude,a.coords.longitude);if(b>=0){var e=new google.maps.LatLngBounds(navMarker.getPosition(),navMarker.getPosition());e.extend(gMapMarkers[b].getPosition());gMap.fitBounds(e)}}function fUNQ238(){$("#left").show();$("#moreOptionsBlank").show();$("#moreOptions").hide();if(inIframe||tabletDevice){$("#map").css("left",300)}else{var a=$("#mapContainer");if(!a.hasClass("padLeft")){a.addClass("padLeft")}}google.maps.event.trigger(gMap,"resize")}function fUNQ239(){$("#filterOptionsBlank").show();$("#moreFilterOptions").hide();var a=$("#filtersTable");if(!a.hasClass("activeFullFilterTable")){a.addClass("activeFullFilterTable")}$(".hide_tr").addClass("show_tr").removeClass("hide_tr")}function fUNQ240(){$("#filterOptionsBlank").hide();$("#moreFilterOptions").show();var a=$("#filtersTable");if(a.hasClass("activeFullFilterTable")){a.removeClass("activeFullFilterTable")}$(".show_tr").addClass("hide_tr").removeClass("show_tr")}function fUNQ241(){$("#leftDirDisplay").show();$("#leftNearbyDisplay").hide();var a=$("#dirTabDisplay");if(!a.hasClass("activeDirHeader")){a.addClass("activeDirHeader")}$("#nearbyTabDisplay").removeClass("activeDirHeader");nearAddressTextBox=false}function fUNQ242(a){if($("#leftNearbyDisplay").is(":visible")){var b=fUNQ244(a);$("#nearAddress").val(b)}else{fUNQ238();fUNQ241();activeDirTextBox=2;fUNQ243(a);activeDirTextBox=0;$("#dirAddress1").val("")}}function fUNQ243(a){var b;if(showMoreOptions&&activeDirTextBox>0&&$("#dirTabDisplay").is(":visible")){b=fUNQ244(a);$("#dirAddress"+activeDirTextBox).val(b)}else{if(showMoreOptions&&nearAddressTextBox&&$("#nearbyTabDisplay").is(":visible")){b=fUNQ244(a);$("#nearAddress").val(b)}}}function fUNQ244(a){var c="Marker "+a.idx+1;var b=fUNQ279(mapDataLines[a.dataLineIdx]," ",true,mapObject);if(b.length>0){c=b}else{if(fUNQ299(mapObject.title,mapObject)&&mapDataLines[a.dataLineIdx][mapObject.title]!=""){c=mapDataLines[a.dataLineIdx][mapObject.title]}}return c}function fUNQ245(c,a){if(directionsService==null){directionsService=new google.maps.DirectionsService()}if(directionsDisplay==null){directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:true,suppressInfoWindows:true});directionsDisplay.setMap(gMap)}if(c&&a){var b={origin:c,destination:a,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(b,function(d,e){if(e==google.maps.DirectionsStatus.OK){directionsDisplay.setMap(gMap);directionsDisplay.setPanel(document.getElementById("dirTextDiv"));directionsDisplay.setDirections(d)}else{var f=$("#dirError");f.html("Could not get directions: "+e);f.show()}})}}function fUNQ246(){return'   <div id="left_header" class="dirHeader">        <a id="dirTabDisplay" style="margin-left: 5px;" class="activeDirHeader">Directions</a>        <a id="nearbyTabDisplay">Nearby</a>        <img id="hideOptions" src="'+cdnUrl+'/img/hide_options.png" style="float: right; margin-right: 10px;  cursor: pointer;" title="hide options">    </div>    <div id="leftDirDisplay" class="leftDiv" style="background-color: white;">        <p> <label id="dirAddress1_label" for="dirAddress1" class="optionLabel">Start: </label><input id="dirAddress1"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="dirAddress2_label" for="dirAddress2" class="optionLabel">End: </label> <input id="dirAddress2"  type="text"  SIZE=20 MAXLENGTH=200 ></p>      <!--  <p><a href="#">add location</a></p> -->        <p style="text-align: right; margin-right: 50px;"><INPUT id="directionSubmit" value="Get Directions" TYPE="SUBMIT" />        <INPUT id="clearDirSubmit" value="Clear" TYPE="SUBMIT" /> </p>         <div id="dirError" style="display: none; "></div>         <div id="dirTextDiv" style="padding: 10px; height: 445px; overflow: auto;"></div>     </div>     <div id="leftNearbyDisplay" class="leftDiv" style="display: none;">         <p><label id="nearAddress_label" for="nearAddress" class="optionLabel">Location: </label><input id="nearAddress"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="nearRadius_label" for="nearRadius" class="optionLabel">Radius: </label><input id="nearRadius"  type="text"  SIZE=3 MAXLENGTH=3 style="text-align: right;" autocomplete="off">            <label class="radio" style=" text-align: left;"><input type="radio" name="distType" value="mi" id="distMi" checked  autocomplete="off">miles  </label>            <label class="radio" style="width: 400px;  text-align: left;"><input type="radio" name="distType" value="km"  id="distKM" > km </label></p>        <p><label class="checkboxText"><input type="checkbox" name="showCircle" value="false"  id="showCircle"   class="checkLabel" >show circle</label></p>        <p style="text-align: right; margin-right: 50px;"><INPUT id="nearbySubmit" value="Find Nearby" TYPE="SUBMIT" />           <INPUT id="clearNearbySubmit" value="Clear" TYPE="SUBMIT" /> </p>       <div id="nearbyError" style="display: none; "></div>   </div> '}function fUNQ247(){var a="";if(userSettings.description!=null&&userSettings.description.length>0){a+='<div id="descriptionDiv" class="mapDescriptionFont"  style="position:fixed;left:0;right:0; bottom:0px; font-size: .8em;"> '+userSettings.description+"</div>"}var b="";if(showMoreOptions){b='<div id="left" class="column mapDefaultFont" style="background-color: white; width: 300px; display: none; margin-left: 0; ">    <div id="left_header" class="dirHeader">        <a id="dirTabDisplay" style="margin-left: 5px;" class="activeDirHeader">Directions</a>        <a id="nearbyTabDisplay">Nearby</a>        <img id="hideOptions" src="'+cdnUrl+'/img/hide_options.png" style="float: right; margin-right: 10px;  cursor: pointer;" title="hide options">    </div>    <div id="leftDirDisplay" class="leftDiv" style="background-color: white;">        <p> <label id="dirAddress1_label" for="dirAddress1" class="optionLabel">Start: </label><input id="dirAddress1"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="dirAddress2_label" for="dirAddress2" class="optionLabel">End: </label> <input id="dirAddress2"  type="text"  SIZE=20 MAXLENGTH=200 ></p>      <!--  <p><a href="#">add location</a></p> -->        <p style="text-align: right; margin-right: 50px;"><INPUT id="directionSubmit" value="Get Directions" TYPE="SUBMIT" />        <INPUT id="clearDirSubmit" value="Clear" TYPE="SUBMIT" /> </p>         <div id="dirError" style="display: none; "></div>         <div id="dirTextDiv" style="padding: 10px; height: 445px; overflow: auto;"></div>     </div>     <div id="leftNearbyDisplay" class="leftDiv" style="display: none;">         <p><label id="nearAddress_label" for="nearAddress" class="optionLabel">Location: </label><input id="nearAddress"  type="text"  SIZE=20 MAXLENGTH=200 ></p>        <p> <label id="nearRadius_label" for="nearRadius" class="optionLabel">Radius: </label><input id="nearRadius"  type="text"  SIZE=3 MAXLENGTH=3 style="text-align: right;" autocomplete="off">            <label class="radio" style=" text-align: left;"><input type="radio" name="distType" value="mi" id="distMi" checked  autocomplete="off">miles  </label>            <label class="radio" style="width: 400px;  text-align: left;"><input type="radio" name="distType" value="km"  id="distKM" > km </label></p>        <p><label class="checkboxText"><input type="checkbox" name="showCircle" value="false"  id="showCircle"   class="checkLabel" >show circle</label></p>        <p style="text-align: right; margin-right: 50px;"><INPUT id="nearbySubmit" value="Find Nearby" TYPE="SUBMIT" />           <INPUT id="clearNearbySubmit" value="Clear" TYPE="SUBMIT" /> </p>       <div id="nearbyError" style="display: none; "></div>   </div>  </div> '}var c=customLogUrl;if(fUNQ322("logo").length>1){c=fUNQ322("logo")}return'<div id="mapHeader"  class="mapDefaultFont" style="left:0;right:0; z-index:100; top:0px; position: fixed; min-height: 45px;">  <div id="searchDiv" class="search-query">       <input id="searchBox" class="search-query span2" type="text" placeholder="Search"  onkeypress="return handleSearchSubmit(event)" value=""><img class="search-query" src="'+cdnUrl+'/img/search.png" onclick="runSearch();" Title="Search, Filter, or Find nearest location">      <a href="http://www.easymapmaker.com" target="_blank"><img id="searchImgLogo" class="search-query" src="'+c+'" Title="Map made with EasyMapMaker.com" ></a>  </div>  <div id="filtersDiv"  class="mapFilterFont" ></div> </div> <div id="mapContainer" style="position:absolute;left:0;right:0; top:0px;bottom:0px;">     <div id="map"         style="position:absolute;left:0;right:0; top:0px;bottom:0px;"></div> '+b+'   <div id="groupsOverDiv"  class="mapGroupsFont" style="  text-align: center;     width: 100%; -webkit-text-size-adjust: none;">        <div id="groupChecksDiv" class="groupsDivPC" style="left:0;right:0; z-index:100; bottom:0px; position: fixed; display: inline-block;">         </div>    </div> '+a+"</div> "}function showMarkers(){if(gMapMarkers.length<1000){return}var b=gMap.getBounds();var a;if(selectedMarkers.length>0||selectedMarkerSet){for(a=0;a<selectedMarkers.length;a++){if(selectedMarkers[a]<gMapMarkers.length){if(gMapMarkers[selectedMarkers[a]]==null){continue}if(b.contains(gMapMarkers[selectedMarkers[a]].getPosition())&&gMapMarkers[selectedMarkers[a]].getMap()==null){gMapMarkers[selectedMarkers[a]].setMap(gMap)}else{if(!b.contains(gMapMarkers[selectedMarkers[a]].getPosition())&&gMapMarkers[selectedMarkers[a]].getMap()!=null){gMapMarkers[selectedMarkers[a]].setMap(null)}}}}}else{for(a=0;a<gMapMarkers.length;a++){if(gMapMarkers[a]==null){continue}if(b.contains(gMapMarkers[a].getPosition())&&gMapMarkers[a].getMap()==null){gMapMarkers[a].setMap(gMap)}else{if(!b.contains(gMapMarkers[a].getPosition())&&gMapMarkers[a].getMap()!=null){if(openWindow!=null&&openMarker.idx==a){continue}gMapMarkers[a].setMap(null)}}}}}function fUNQ248(b){var d=[];if(openWindow!=null){openWindow.close();openWindow=null;openMarker=null}if(mapObject.clustering&&markerCluster!=null){markerCluster.clearMarkers()}for(var c=0;c<b.length;c++){var a=b[c];if(a<gMapMarkers.length){if(gMapMarkers[a]==null){continue}fUNQ287(gMapMarkers[a]);if(mapObject.clustering){d.push(gMapMarkers[a])}}}if(mapObject.clustering&&markerCluster!=null){markerCluster.addMarkers(d)}fUNQ302()}function fUNQ249(b){var f=gMap.getZoom();var e=null;var d=0;if(openWindow!=null){openWindow.close();openWindow=null;openMarker=null}for(var c=0;c<b.length;c++){var a=b[c];if(a<gMapMarkers.length){if(gMapMarkers[a]==null){continue}if(e==null){e=new google.maps.LatLngBounds(gMapMarkers[a].getPosition(),gMapMarkers[a].getPosition())}else{e.extend(gMapMarkers[a].getPosition());d++}}}if(!circleFilter){gMap.fitBounds(e);gMap.setCenter(e.getCenter())}if(d==0&&!circleFilter){if(f<17){gMap.setZoom(17)}else{gMap.setZoom(f)}}fUNQ302()}function fUNQ250(b){var g=gMap.getZoom();var f=null;var d=0;var e=[];if(openWindow!=null){openWindow.close();openWindow=null;openMarker=null}if(mapObject.clustering&&markerCluster!=null){markerCluster.clearMarkers()}if(b.length==0){fUNQ300();return}for(var c=0;c<b.length;c++){var a=b[c];if(a<gMapMarkers.length){if(gMapMarkers[a]==null){continue}if(f==null){f=new google.maps.LatLngBounds(gMapMarkers[a].getPosition(),gMapMarkers[a].getPosition())}else{f.extend(gMapMarkers[a].getPosition());d++}if(mapObject.clustering){e.push(gMapMarkers[a])}}}if(!circleFilter){gMap.fitBounds(f);gMap.setCenter(f.getCenter())}if(d==0&&!circleFilter){if(g<17){gMap.setZoom(17)}else{gMap.setZoom(g)}}if(mapObject.clustering&&markerCluster!=null){markerCluster.addMarkers(e)}fUNQ302()}function fUNQ251(b,a,e,c,j){b.style.padding="5px";var h=document.createElement("div");h.align="center";b.appendChild(h);var g=document.createElement("select");g.name="MapStyle";g.id="MapStyle";h.appendChild(g);for(var d=0;d<e.length;d++){var f=document.createElement("option");f.value=e[d];f.innerHTML=e[d];if(c.toLowerCase()==e[d].toLowerCase()){f.selected="selected"}g.appendChild(f)}google.maps.event.addDomListener(g,"change",function(){for(var k=0;k<e.length;k++){if(this.value==e[k]){a.setMapTypeId(j[k])}}})}function addMarkers(f,h,k,c){if(k==null||k.length==0){return}if(!fUNQ309(k[0][f],k[0][h])){return}var m=new google.maps.LatLng(k[0][f],k[0][h]);var s=new google.maps.LatLngBounds(m,m);var e=false;for(var q=0;q<k.length;q++){if(f>=k[q].length||h>=k[q].length||!fUNQ309(k[q][f],k[q][h])){gMapMarkers.push(null);continue}m=new google.maps.LatLng(k[q][f],k[q][h]);var o=IMG_LIST[0];var b=IMG_HEX_COLORS[0];var g="/marker_images/image.png";var t=new google.maps.Size(20,34);var r=new google.maps.Point(0,0);var d=new google.maps.Point(10,34);var l;if(c.useCustomImages!=null&&c.useCustomImages){if(c.clusterColor!=null){o=c.clusterColor;b=c.clusterHexColor}if(c.singleCustomImage!=null){g=c.singleCustomImage;t=new google.maps.Size(c.singleCustomImageWidth,c.singleCustomImageHeight);d=new google.maps.Point(Math.ceil(c.singleCustomImageWidth/2),c.singleCustomImageHeight);e=true}else{var w=fUNQ78(q,k[q][c.group],c);if(w!=-1&&c.groupImageHash.hasOwnProperty(w)&&c.ImageDimensions.hasOwnProperty(w)){g=c.groupImageHash[w];e=true;t=new google.maps.Size(c.ImageDimensions[w].width,c.ImageDimensions[w].height);d=new google.maps.Point(Math.ceil(c.ImageDimensions[w].width/2),c.ImageDimensions[w].height)}}l={url:g,size:t,origin:r,anchor:d}}else{if(c.markerImageIdx!=undefined&&c.markerImageIdx.length>=q&&c.markerImageIdx[q]>=0&&c.markerImageIdx[q]!=null){if(c.markerImageIdx.length>0&&c.markerImageIdx[q]<IMG_LIST.length){g=CLOUD_FRONT_URL+IMAGE_PATH+IMG_LIST[c.markerImageIdx[q]]+markerImgEnding;o=IMG_LIST[c.markerImageIdx[q]];b=IMG_HEX_COLORS[c.markerImageIdx[q]]}}if(showNumberedMarkers&&k.length<100){g=CLOUD_FRONT_URL+IMAGE_PATH+(q+1)+"_"+o+".png"}l={url:g,size:new google.maps.Size(20,34),origin:new google.maps.Point(0,0),anchor:new google.maps.Point(10,34)}}var j;var a=null;if(!c.clustering){a=gMap}var n=(c.pinLabel!=null&&c.pinLabel>=0&&c.pinLabel<k[q].length&&k[q][c.pinLabel]);var u=(c.CircleWithRadius!=null&&c.CircleWithRadius==true);var p=0;if(u){p=fUNQ252(c,k[q])}if(n&&u&&typeof MarkerWithLabelCircle!=="undefined"){var v=o+"MarkerLabel";j=new MarkerWithLabelCircle({position:m,draggable:editMap,raiseOnDrag:editMap,map:a,labelContent:k[q][c.pinLabel],labelAnchor:new google.maps.Point(22,0),labelClass:v+" defaultMarkerLabel",labelStyle:{opacity:0.95},fillColor:"#"+b,strokeColor:"#"+b,fillOpacity:0.35,strokeOpacity:0.55,radius:p,icon:g})}else{if(u&&u>0&&typeof MarkerWithCircle!=="undefined"){var v=o+"MarkerLabel";j=new MarkerWithCircle({position:m,draggable:editMap,raiseOnDrag:editMap,map:a,fillColor:"#"+b,strokeColor:"#"+b,fillOpacity:0.35,strokeOpacity:0.55,radius:p,icon:g})}else{if(typeof MarkerWithLabel!=="undefined"){var v=o+"MarkerLabel";j=new MarkerWithLabel({position:m,draggable:editMap,raiseOnDrag:editMap,map:a,labelContent:k[q][c.pinLabel],labelAnchor:new google.maps.Point(22,0),labelClass:v+" defaultMarkerLabel",labelStyle:{opacity:0.95},icon:g})}else{if(e){j=new google.maps.Marker({position:m,map:a,icon:l,zIndex:k.length-q+4})}else{j=new google.maps.Marker({position:m,map:a,icon:l,shape:DEFAULT_SHAPE,zIndex:k.length-q+4})}if(editMap){j.setDraggable(true)}}}}if(fUNQ299(c.title,c)&&c.markerTitle!=null&&c.markerTitle==true){j.setTitle(k[q][c.title])}if(sizeMapOnLoad){s.extend(m)}j.idx=gMapMarkers.length;j.color=o;j.hexColor=b;j.show=true;j.dataLineIdx=q;fUNQ254(j,gMapMarkers.length,k[q],c);gMapMarkers.push(j);if(editMap){google.maps.event.addListener(j,"dragend",function(){fUNQ276(this,f,h)})}}if(c.clustering){markerCluster=new MarkerClusterer(gMap,gMapMarkers,{maxZoom:CLUSTER_ZOOM_LEVEL,averageCenter:true,gridSize:65})}if(sizeMapOnLoad){gMap.fitBounds(s);gMap.setCenter(s.getCenter())}}function fUNQ252(c,b){var a=0;var e=1.6093;if(c.CircleRadiusColumn!=null&&c.CircleRadiusColumn!=-1&&b!=null&&b.length>c.CircleRadiusColumn){var d=parseFloat(b[c.CircleRadiusColumn]);if(!isNaN(d)&&d>0){a=d}}else{if(c.DefaultCircleRadius>0){a=c.DefaultCircleRadius}}if(c.CircleWithRadiusUnits=="km"){e=1}return a*1000*e}function fUNQ253(b,a,c){if(a==true){b.setIcon(CLOUD_FRONT_URL+IMAGE_PATH+c+"_"+b.color+".png")}else{b.setIcon(CLOUD_FRONT_URL+IMAGE_PATH+b.color+markerImgEnding)}}function fUNQ254(e,d,c,b){var f=fUNQ273(c,mapObject);if(b.displayDataOnPage&&!mobileDevice&&!inIframe&&!tabletDevice){var a=fUNQ271(c);markerDescriptions[markerDescriptions.length]={message:a,markerIdx:d}}f='<div id="markerDiv" class="infoW">'+f;if(mobileDevice){f='<div id="markerDiv" style="overflow-y:scroll; font-size:10pt; top: 26px; font-family:arial; font-weight:bold;">'+f}if(mobileDevice||tabletDevice){f=f+'<div id="buttonPaging" style="display: none;"></div> '}if(editMap){f=f+'<a id="removeMarker">Remove Pin</a> '}f=f+"</div>";var g=new google.maps.InfoWindow({content:f,maxWidth:400});if(editMap){infoWindows.push(g)}if(mobileDevice){}else{}google.maps.event.addListener(e,"click",function(){if(openWindow!=null&&openWindow!=g){openWindow.close()}if(b.clustering&&e.getMap()!==gMap&&markerCluster!=null){gMap.setZoom(15);markerCluster.repaint()}samePosMarkers.length=0;for(var h=0;h<mapDataLines.length&&h<gMapMarkers.length;h++){if(gMapMarkers[h]==null){continue}if(h!=e.idx&&gMapMarkers[h].idx>=0&&gMapMarkers[h].getMap()!=null&&gMapMarkers[h].show&&mapDataLines[e.dataLineIdx]!=null&&mapDataLines[h]!=null&&fUNQ305(mapDataLines[e.dataLineIdx][b.lat],mapDataLines[e.dataLineIdx][b.lng],mapDataLines[h][b.lat],mapDataLines[h][b.lng],gMap.getZoom())){samePosMarkers[samePosMarkers.length]=gMapMarkers[h].idx}}if(samePosMarkers.length>0){samePosMarkers.unshift(e.idx);currentPageMarkerNum=1;lastPageMarkerNum=1;nextPageMarkerNum=1+ITEMS_PER_PAGE;previousPageMarkerNum=1}if(showDirections||samePosMarkers.length>0){g.setContent(f)}ignorePagingEvent=false;openMarker=e;g.open(gMap,e);openWindow=g;fUNQ243(e);if(editMap||samePosMarkers.length>0||showDirections){google.maps.event.addListenerOnce(g,"domready",function(){if(!ignorePagingEvent){if(mobileDevice||tabletDevice){fUNQ260()}else{fUNQ261()}}if(showDirections){fUNQ268(e,openWindow)}if(editMap){fUNQ255(e,openWindow)}var j=$("#markerDiv");var k=j.parent().parent();if(j.outerHeight()<k.parent().height()&&($("#map").outerHeight()-100>j.outerHeight())){k.css({width:"",overflow:""});setTimeout(function(){k.css({width:"",overflow:""})},500)}})}});google.maps.event.addListener(g,"closeclick",function(){if(openWindow==g){openWindow=null}})}function fUNQ255(a,b){$("#removeMarker").click(function(){var c=confirm("Remove the marker?");if(c==false){return}if(samePosMarkers.length>0){a=gMapMarkers[samePosMarkers[currentPageMarkerNum-1]]}if(mapObject.clustering){markerCluster.removeMarker(a,false)}b.close();a.setVisible(false);a.setMap(null);removedMarkers.push(a.idx);mapDataLines[a.dataLineIdx].length=0;gMapMarkers[a.idx]=null})}function fUNQ256(){var b=4;for(var a=0;a<samePosMarkers.length;a++){if(gMapMarkers[samePosMarkers[a]]!=null){if(gMapMarkers[samePosMarkers[a]].getZIndex()>b){b=gMapMarkers[samePosMarkers[a]].getZIndex()}}}return b}function fUNQ257(){var b=gMapMarkers[samePosMarkers[currentPageMarkerNum-1]];if(b==null){return}openMarker=gMapMarkers[samePosMarkers[currentPageMarkerNum-1]];if(currentPageMarkerNum!=lastPageMarkerNum){if(gMapMarkers[samePosMarkers[lastPageMarkerNum-1]]!=null&&gMapMarkers[samePosMarkers[currentPageMarkerNum-1]]!=null){var c=fUNQ256()+1;gMapMarkers[samePosMarkers[currentPageMarkerNum-1]].setZIndex(c)}lastPageMarkerNum=currentPageMarkerNum}var a=fUNQ273(mapDataLines[b.dataLineIdx],mapObject);a='<div id="markerDiv" class="infoW">'+a;if(mobileDevice||tabletDevice){a=a+'<div id="buttonPaging" style="display: none;"></div> '}if(editMap){a=a+'<a id="removeMarker">Remove Pin</a> '}a+="</div>";ignorePagingEvent=true;if(openWindow!=null){openWindow.setContent(a);fUNQ268(openMarker,openWindow)}}function fUNQ258(){var a=$("#buttonPaging");if(a.length>0){a.html("");a.hide()}}function fUNQ259(){var a=$("#markerPaging");if(a.length>0){a.remove()}}function fUNQ260(){var a=$("#buttonPaging");if(samePosMarkers.length==0){if(a.is(":visible")){$("#buttonPaging button").unbind("click");a.hide()}return}var b=fUNQ266();a.html(b);a.show();fUNQ262()}function fUNQ261(){var c=$("#markerDiv");var a=$("#markerPaging");if(samePosMarkers.length==0){if(a!=null&&a.length>0){$("#markerPaging li").unbind("click");a.remove()}return}var d=fUNQ267();var b='<div id="markerPaging" class="pagination marker-pagination-centered">'+d+"</div>";if(a.length>0){a.html(d)}else{c.prepend(b)}fUNQ263()}function fUNQ262(){$("#buttonPaging button").click(function(){var a=$(this).attr("id");$("#buttonPaging button").unbind("click");fUNQ264(a)})}function fUNQ263(){$("#markerPaging li").click(function(){var a=$(this).attr("id");if($(this).text()!=currentPageMarkerNum){$("#markerPaging li").unbind("click");fUNQ265(a,$(this).text())}})}function fUNQ264(b){if(b=="prevBtn"){currentPageMarkerNum-=1}else{if(b=="nextBtn"){currentPageMarkerNum+=1}else{currentPageMarkerNum=1}}fUNQ257();var a=$("#buttonPaging");var c=fUNQ266();a.html(c);a.show();fUNQ262()}function fUNQ265(d,c){if(d=="pgPrevLI"){currentPageMarkerNum=previousPageMarkerNum;nextPageMarkerNum=currentPageMarkerNum+1;if(previousPageMarkerNum-ITEMS_PER_PAGE>1){previousPageMarkerNum-=5}}else{if(d=="pgNextLI"){currentPageMarkerNum=nextPageMarkerNum;previousPageMarkerNum=currentPageMarkerNum-1;if(samePosMarkers.length>=ITEMS_PER_PAGE+nextPageMarkerNum){nextPageMarkerNum+=5}}else{currentPageMarkerNum=c}}fUNQ257();var b=$("#markerDiv");var e=fUNQ267();var a='<div id="markerPaging" class="pagination marker-pagination-centered">'+e+"</div>";b.prepend(a);fUNQ263()}function fUNQ266(){var a="";var b="";if(samePosMarkers.length>1&&currentPageMarkerNum>1){a='<button id="prevBtn" class="bs-btn btn-mini btn-primary" type="button">Previous</button>'}if(samePosMarkers.length>currentPageMarkerNum){b='<button  id="nextBtn" class="bs-btn btn-mini btn-primary" type="button" style="margin-left: 60px;">Next</button>'}return a+b}function fUNQ267(){var b="";var e="";if(samePosMarkers.length>ITEMS_PER_PAGE&&currentPageMarkerNum>ITEMS_PER_PAGE){b='<li id="pgPrevLI">&lt;</li>'}if(samePosMarkers.length>ITEMS_PER_PAGE&&nextPageMarkerNum>currentPageMarkerNum){e='<li id="pgNextLI">&gt;</li>'}var d=ITEMS_PER_PAGE*Math.floor((currentPageMarkerNum-1)/ITEMS_PER_PAGE);for(var c=d;c<d+ITEMS_PER_PAGE&&c<samePosMarkers.length;c++){var a=c+1;if(a==currentPageMarkerNum){b=b+'<li id="pgli'+a+'" class="active">'+a+"</li>"}else{b=b+'<li id="pgli'+a+'">'+a+"</li>"}}b=b+e;return"<ul>"+b+"</ul>"}function fUNQ268(a,b){$("#toDir").click(function(){if(!mobileDevice&&showMoreOptions){fUNQ242(openMarker);return}var c=fUNQ269();ignorePagingEvent=true;fUNQ259();fUNQ258();b.setContent(c);fUNQ270(openMarker,b)})}function fUNQ269(){var a=openMarker;var e="Here";var b=fUNQ279(mapDataLines[a.dataLineIdx]," ",true,mapObject);if(b.length>0){e=b}else{if(fUNQ299(mapObject.title,mapObject)&&mapDataLines[a.dataLineIdx][mapObject.title]!=""){e=mapDataLines[a.dataLineIdx][mapObject.title]}}var g="";var d="";var f=a.idx;if(navMarker!=null&&navMarker.getMap()!=null){g=e;e="Current Location";d=f;f=""}var c='<div id="directions"><table><tr><td><label>Start</label></td>   <td><input type="text" SIZE=30 MAXLENGTH=200 name="startAddr" id="startAddr" value="'+e+'" readonly />   <INPUT type="hidden" id="markerStart" value="'+f+'" /></td> <td rowspan="2"><img src="'+cdnUrl+'/img/reverse_img.png" Title="Get Reverse Directions" onclick="fUNQ274();"></td> </tr> <tr><td align="right"><label>End</label></td><td><input type="text" SIZE=30 MAXLENGTH=200 name="endAddr" id="endAddr" value="'+g+'" />   <INPUT type="hidden" id="markerEnd" value="'+d+'" /></td></tr> <tr>     <td colspan="2" align="right"> <INPUT id="directionSubmit" value="Get Directions" TYPE="SUBMIT" /></td><td></td> </tr></table><div id="dirError"></div></div>';return c}function fUNQ270(a,b){$("#directionSubmit").click(function(){if(directionsService==null){directionsService=new google.maps.DirectionsService()}if(directionsDisplay==null){directionsDisplay=new google.maps.DirectionsRenderer({suppressMarkers:true});directionsDisplay.setMap(gMap)}var g="";var c="";var d=$("#markerStart");var e=$("#markerEnd");if(d.length>0&&d.val()&&parseInt(d.val(),10)==a.idx){g=a.getPosition();c=$("#endAddr").val();if(c=="Current Location"&&navMarker!=null){c=navMarker.getPosition()}}else{if(e.length>0&&e.val()&&parseInt(e.val(),10)==a.idx){g=$("#startAddr").val();c=a.getPosition();if(g=="Current Location"&&navMarker!=null){g=navMarker.getPosition()}}}if(g&&c){var f={origin:g,destination:c,travelMode:google.maps.TravelMode.DRIVING};directionsService.route(f,function(h,j){if(j==google.maps.DirectionsStatus.OK){b.close();openWindow=null;directionsDisplay.setDirections(h);directionsDisplay.setMap(gMap)}else{ignorePagingEvent=true;$("#directions").html("Could not get directions: "+j)}})}})}function fUNQ271(a){var j="";if(showMoreOptions){j=' <span class="noDistDisplay">&nbsp; (##dist##)</span>'}var f="";if(fUNQ299(mapObject.title,mapObject)&&a[mapObject.title]!=""){f="<div><b>"+a[mapObject.title]+j+"</b></div>"}if(f.length>0){j=""}var h=fUNQ279(a,j+"<br>",true,mapObject);if(showMoreOptions&&h.indexOf("<br>")<0){h+=j}if(h!=""){if(f.length==0){h="<b>"+h+"</b>"}h="<div>"+h+"</div>"}var e="";for(var b=0;b<mapObject.headerDisplayOrderIdxs.length;b++){if(!isSelectedColumn(mapObject.headerDisplayOrderIdxs[b],mapObject)){var c=a[mapObject.headerDisplayOrderIdxs[b]];var g=mapObject.columnHeaderArray[mapObject.headerDisplayOrderIdxs[b]];if(g=="emm_acc"){continue}if(c!=null&&c.trim()!=""){if(c.indexOf("\n")>0&&c.charAt(0)=='"'&&c.endsWith('"')){c=c.replace(/\n/g,"<br>");c=c.substr(1,c.length-2)}if(fUNQ322("messageUrl")=="self"){c=c.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" >$1</a>')}else{c=c.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>')}if(mapObject.showLabels){e=e+'<div class="markerLabelDiv"><span class="markerLabel">'+g+": </span>"+c+"</div>"}else{e=e+'<div class="markerLabelDiv">'+c+"</div>"}}}}var d=f+h+e;d+=fUNQ43(a,f,mapObject,false,false);return d}function fUNQ272(b){var a=/^\(?([0-9]{3})\)?[-. ]?([0-9]{3})[-. ]?([0-9]{4})$/;if(a.test(b)){return true}return false}function fUNQ273(a,e){var j="";if(fUNQ299(e.title,e)&&a[e.title]!=""){if(fUNQ299(e.web,e)&&a[e.web]!=""){j='<div><a href="'+urlizeUrl(a[e.web])+'" target="_blank">'+a[e.title]+"</a></div>";if(fUNQ322("messageUrl")=="self"){j='<div><a href="'+urlizeUrl(a[e.web])+'" >'+a[e.title]+"</a></div>"}}else{j="<div>"+a[e.title]+"<div>"}}var k=fUNQ279(a,"<br>",true,mapObject);if(k!=""){if(useGoogleMapsDirections){var b="https://maps.google.com/maps?saddr=Current+Location&daddr="+fUNQ329(fUNQ279(a," ",true,mapObject));k='<div><a href="'+b+'" target="_blank">'+k+"</a></div>"}else{if(showDirections){k='<div><a id="toDir" >'+k+"</a></div>"}else{k="<div>"+k+"</div>"}}}else{if(showDirections){k='<div><a id="toDir" >Directions</a></div>'}}var g="";for(var c=0;c<e.headerDisplayOrderIdxs.length;c++){if(!isSelectedColumn(e.headerDisplayOrderIdxs[c],e)){var d=a[e.headerDisplayOrderIdxs[c]];var h=e.columnHeaderArray[e.headerDisplayOrderIdxs[c]];if(h=="emm_acc"){continue}if(d!=null&&d.trim()!=""){if(d.indexOf("\n")>0&&d.charAt(0)=='"'&&d.endsWith('"')){d=d.replace(/\n/g,"<br>");d=d.substr(1,d.length-2)}if(fUNQ322("messageUrl")=="self"){d=d.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" >$1</a>')}else{d=d.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>')}if(mobileDevice){if(fUNQ272(d.trim())){d='<a href="tel:'+d.trim()+'">'+d+"</a>"}}if(mapObject.showLabels){g=g+'<div ><span class="markerLabel">'+h+": </span>"+d+"</div>"}else{g=g+"<div >"+d+"</div>"}}}}var f=j+k+g;f+=fUNQ43(a,j,mapObject,true,false);return f}function fUNQ274(){var g=$("#directions");if(g.length>0){var f=g.find("#markerEnd");var b=g.find("#markerStart");var e=g.find("#startAddr");var c=g.find("#endAddr");var d="";var a="";if(f.length>0){d=f.val()}if(c.length>0){a=c.val()}if(e.prop("readonly")){e.prop("readonly",false);c.prop("readonly",true)}else{if(c.prop("readonly")){e.prop("readonly",true);c.prop("readonly",false)}}f.val(b.val());c.val(e.val());b.val(d);e.val(a)}}function fUNQ275(d,a){var c=a.lat,f=a.lng;for(var e=0;e<d.length;e++){for(var b=e+1;b<d.length;b++){if(d[e].length>c&&d[b].length>c&&d[e].length>f&&d[b].length>f){}if(d[e][c]===d[b][c]&&d[e][f]===d[b][f]){return true}}}return false}function fUNQ276(b,a,d){if(mapObject.moveSingleMarker==null||mapObject.moveSingleMarker==false){for(var c=0;c<gMapMarkers.length;c++){if(c!=b.idx&&gMapMarkers[c]!=null&&mapDataLines[b.dataLineIdx][a]===mapDataLines[c][a]&&mapDataLines[b.dataLineIdx][d]===mapDataLines[c][d]){mapDataLines[c][a]=b.getPosition().lat().toFixed(6);mapDataLines[c][d]=b.getPosition().lng().toFixed(6);gMapMarkers[c].setPosition(new google.maps.LatLng(b.getPosition().lat().toFixed(6),b.getPosition().lng().toFixed(6)))}}}mapDataLines[b.dataLineIdx][a]=b.getPosition().lat().toFixed(6);mapDataLines[b.dataLineIdx][d]=b.getPosition().lng().toFixed(6)}function fUNQ277(){if(fUNQ103(redrawTextArea)){redrawTextArea()}}function fUNQ278(j,f){var a=false;var g=fUNQ297(j,f.address,""),e=fUNQ297(j,f.city,""),b=fUNQ297(j,f.state,""),c=fUNQ297(j,f.zip,""),d=fUNQ297(j,f.country,"");var h;if(f.regionCode!=null&&f.regionCode.trim().length>1&&EuroCountryFormat.indexOf(f.regionCode.trim())>-1){h=((c.length>0)?c:"");h+=(e.length>0)?" "+e:"";h+=((h.length>0&&b.length>0)?", "+b:b);h+=((h.length>0&&d.length>0)?" "+d:d)}else{if(f.regionCode=="jp"&&c.startsWith("〒")){h=((c.length>0)?c:"");h+=(e.length>0)?e:"";a=true}else{h=(e.length>0)?e:"";h+=((e.length>0&&b.length>0)?", "+b:b);h+=((h.length>0&&c.length>0)?" "+c:c);h+=((h.length>0&&d.length>0)?" "+d:d)}}if(a===true){if(g.length>0&&h.length>0){return h+" "+g}}if(g.length>0&&h.length>0){return g+" "+h}return(g.length>0?g:h)}function fUNQ279(l,k,g,f){var h=fUNQ298(l,f.address,"",g,f),e=fUNQ298(l,f.city,"",g,f),b=fUNQ298(l,f.state,"",g,f),c=fUNQ298(l,f.zip,"",g,f),d=fUNQ298(l,f.country,"",g,f);var a=false;if(k==undefined){k=""}var j;if(f.regionCode!=null&&f.regionCode.trim().length>1&&EuroCountryFormat.indexOf(f.regionCode.trim())>-1){j=((c.length>0)?c:"");j+=(e.length>0)?" "+e:"";j+=((j.length>0&&b.length>0)?", "+b:b);j+=((j.trim().length>0&&d.length>0)?k+d:d)}else{if(f.regionCode=="jp"&&c.startsWith("〒")){j=((c.length>0)?c:"");j+=(e.length>0)?k+e:"";a=true}else{j=(e.length>0)?e:"";j+=((e.length>0&&b.length>0)?", "+b:b);j+=((j.length>0&&c.length>0)?" "+c:c);j+=((j.trim().length>0&&d.length>0)?k+d:d)}}if(a===true){if(k!=undefined&&h.length>0&&j.length>0){return j+h}}if(k!=undefined&&h.length>0&&j.length>0){return h+k+j}if(h.length>0&&j.length>0){return h+" "+j}return(h.length>0?h:j)}function fUNQ280(f){var b=$("#groupChecksDiv");if(f.sortedGroupKeys.length<2){if(b.length>0){b.hide()}return}var a=f.columnHeaderArray[f.group]+": ";var k="";var h=0;var g="";for(var c=0;c<f.sortedGroupKeys.length;c++){var j=f.sortedGroupKeys[c];if(f.groupImageHash.hasOwnProperty(j)){if(f.useCustomImages!=null&&f.useCustomImages){if(f.customImageSizes.hasOwnProperty(j)){g=f.customImageSizes[j]}else{g=CLOUD_FRONT_URL+IMAGE_PATH+SMALL_IMAGE+IMG_LIST[0]+IMG_FILE_ENDING}}else{var e=parseInt(f.groupImageHash[j],10);g=CLOUD_FRONT_URL+IMAGE_PATH+SMALL_IMAGE+IMG_LIST[e]+IMG_FILE_ENDING}var d=' <li class="groupItem"><img src="'+g+'"><input type="checkbox" id="groupToggle'+h.toString()+'"  onclick="fUNQ289('+h.toString()+');" CHECKED/><span class="middleGroupText">'+j+"</span></li>";k=k+d;h++}}k='<ul class="groupList"><li class="groupItem">'+a+"</li> "+k+"</ul>";if(b.length>0){b.html(k);b.show()}}function fUNQ281(h,c){if(c==undefined){c=true}var k=[];var l=[];var g,e;for(g=0;g<h.sortedGroupKeys.length;g++){var o=h.sortedGroupKeys[g];if(groupsOff.indexOf(g)<0){var d=fUNQ72(o);l.push.apply(l,d)}}var m=[];if(h.multiSelectFilters!=null&&h.multiSelectFilters){for(g=0;g<multiSelectFilterValues.length;g++){if(multiSelectFilterValues[g]){var n=[];for(e=0;e<multiSelectFilterValues[g].length;e++){n.push.apply(n,fUNQ68(h.filterListNames[g],multiSelectFilterValues[g][e]))}if(n.length>0){m[m.length]=n}}}}else{for(g=0;g<selectedFilterValues.length;g++){if(selectedFilterValues[g]&&selectedFilterValues[g]!=ALL_FILTER){var n=fUNQ68(h.filterListNames[g],selectedFilterValues[g]);if(n.length>0){m[m.length]=n}}}}if(m.length==0&&h.sortedGroupKeys.length==0){for(g=0;g<gMapMarkers.length;g++){if(gMapMarkers[g]==null){continue}if(fUNQ282(gMapMarkers[g])){k.push(gMapMarkers[g].idx);fUNQ287(gMapMarkers[g])}else{fUNQ288(gMapMarkers[g])}}selectedMarkerSet=true;selectedMarkers=k;if(h.multiSelectFilters==null||!h.multiSelectFilters){if(h.disAbleDynamicFilters==null||h.disAbleDynamicFilters==false){fUNQ283(h)}}else{if(h.multiSelectFilters!=null&&h.multiSelectFilters){fUNQ284(h)}}if(c){fUNQ250(k)}else{fUNQ248(k)}fUNQ311();return}if(h.sortedGroupKeys.length>0){m[m.length]=l}var b=m[0];for(g=0;g<m.length;g++){if(m[g].length<b){b=m[g]}}var f={};for(g=0;g<b.length;g++){f[b[g].toString()]=0}for(g=0;g<m.length;g++){for(var e=0;e<m[g].length;e++){if(f.hasOwnProperty(m[g][e].toString())){f[m[g][e].toString()]=parseInt(f[m[g][e].toString()],10)+1}}}for(var a in f){if(f[a]!=m.length){delete f[a]}}for(g=0;g<gMapMarkers.length;g++){if(gMapMarkers[g]==null){continue}if(f.hasOwnProperty(gMapMarkers[g].idx.toString())&&fUNQ282(gMapMarkers[g])){fUNQ287(gMapMarkers[g]);k.push(gMapMarkers[g].idx)}else{fUNQ288(gMapMarkers[g])}}selectedMarkerSet=true;selectedMarkers=k;if(h.multiSelectFilters==null||!h.multiSelectFilters){if(h.disAbleDynamicFilters==null||h.disAbleDynamicFilters==false){fUNQ283(h)}}else{if(h.multiSelectFilters!=null&&h.multiSelectFilters){fUNQ284(h)}}fUNQ311();if(c){fUNQ250(k)}else{fUNQ248(k)}}function fUNQ282(a){if(!circleFilter){return true}if(circle.getBounds().contains(a.getPosition())&&a.distanceM<=circleRadius){return true}return false}function fUNQ283(e){var f=[];var d;for(d=0;d<e.sortedGroupKeys.length;d++){var l=e.sortedGroupKeys[d];if(groupsOff.indexOf(d)<0){var b=fUNQ72(l);f.push.apply(f,b)}}for(d=0;d<e.filterListNames.length;d++){var g=[];if(e.sortedGroupKeys.length>0){g.push.apply(g,f)}for(var c=0;c<selectedFilterValues.length;c++){var h=[];if(c==d||(selectedFilterValues[c]&&selectedFilterValues[c]==ALL_FILTER)){h=[];for(var a=0;a<mapDataLines.length;a++){h[a]=a}}else{h=fUNQ68(e.filterListNames[c],selectedFilterValues[c])}if(h.length>0){if(g.length==0){g.push.apply(g,h)}else{g=fUNQ106(g,h);if(g.length==0){g[0]=-1}}}}fUNQ286(d,g,selectedFilterValues[d])}}function fUNQ284(a){var g=[];var f,e;for(f=0;a.sortedGroupKeys!=null&&f<a.sortedGroupKeys.length;f++){var o=a.sortedGroupKeys[f];if(groupsOff.indexOf(f)<0){var c=fUNQ72(o);g.push.apply(g,c)}}for(f=0;a.filterListNames!=null&&f<a.filterListNames.length;f++){var l=[];if(a.sortedGroupKeys!=null&&a.sortedGroupKeys.length>0){l.push.apply(l,g)}for(var d=0;multiSelectFilterValues!=null&&d<multiSelectFilterValues.length;d++){var m=[];if(f==d){for(var b=0;b<mapDataLines.length;b++){m[b]=b}}else{if(multiSelectFilterValues[d]!=null&&multiSelectFilterValues[d]){for(e=0;e<multiSelectFilterValues[d].length;e++){m.push.apply(m,fUNQ68(a.filterListNames[d],multiSelectFilterValues[d][e]))}}else{for(var b=0;b<mapDataLines.length;b++){m[b]=b}}}if(l.length==0){l.push.apply(l,m)}else{l=fUNQ106(l,m);if(l.length==0){l[0]=-1}}}if(f==activeMultiSelectFilter){continue}var h=[];if(multiSelectFilterValues.length>f&&multiSelectFilterValues[f]){h=multiSelectFilterValues[f]}fUNQ285(f,l,h)}}function fUNQ285(b,e,c){var h=[];var g=[];var f=mapObject.filterListSortedKeyHash[mapObject.filterListNames[b]];for(var d=0;f!=null&&d<f.length;d++){var a=fUNQ68(mapObject.filterListNames[b],f[d]);g.push(f[d]);if(showFilterCounts){h.push(fUNQ107(a,e))}}fUNQ73(g,c,b.toString()+"_rfilter",h)}function fUNQ286(b,e,d){var h=[];var g=[];g.push(ALL_FILTER);if(showFilterCounts){h.push(e.length)}var f=mapObject.filterListSortedKeyHash[mapObject.filterListNames[b]];for(var c=0;c<f.length;c++){var a=fUNQ68(mapObject.filterListNames[b],f[c]);if(e.length==0||d==f[c]||fUNQ104(a,e)){g.push(f[c]);if(showFilterCounts){h.push(fUNQ107(a,e))}}}fUNQ74(g,d,b.toString()+"_rfilter",h)}function fUNQ287(a){if(!mapObject.clustering&&a.getMap()==null){a.setMap(gMap)}a.show=true}function fUNQ288(a){if(!mapObject.clustering&&a.getMap()!=null){a.setMap(null)}a.show=false}function fUNQ289(a){var d=parseInt(a,10);var b=false;var c=groupsOff.indexOf(a);if(c>-1){if(b){groupsOff.length=0;fUNQ281(mapObject)}else{groupsOff.splice(c,1);fUNQ281(mapObject)}}else{if(b){groupsOff=mapObject.sortedGroupKeys;groupsOff.splice(c,1);fUNQ281(mapObject)}else{if(groupsOff==null){groupsOff=[]}groupsOff[groupsOff.length]=d;fUNQ281(mapObject)}}}function fUNQ290(b){for(var a=0;a<gMapMarkers.length;a++){if(gMapMarkers[a]!=null){if(b){fUNQ287(gMapMarkers[a])}else{fUNQ288(gMapMarkers)}}}}function fUNQ291(){fUNQ292();fUNQ293();fUNQ281(mapObject);fUNQ324(mapObject)}function fUNQ292(){if(directionsDisplay!=null){directionsDisplay.setPanel(null);directionsDisplay.setMap(null)}if(mapObject.showMoreOptions!=null&&mapObject.showMoreOptions){$("#nearAddress").val("");$("#nearRadius").val("");$("#nearbyError").hide();if(circle!=null){circle.setMap(null)}$("#dirAddress1").val("");$("#dirAddress2").val("");$("#dirError").hide();activeDirTextBox=0;if(circleFilter){showDistance=false;circleFilter=false}nearAddressTextBox=false}}function fUNQ293(){fUNQ294();fUNQ295()}function fUNQ294(){var a=$("#groupChecksDiv");if(a==null||a.length==0){return}a.find(":checkbox").each(function(){$(this).prop("checked",true)});groupsOff.length=0}function fUNQ295(){var a=$("#filtersDiv");if(a==null||a.length==0){return}if(mapObject.multiSelectFilters!=null&&mapObject.multiSelectFilters){for(b=0;b<mapObject.filterListNames.length;b++){var c=b.toString()+"_rfilter";$("select#"+c).removeAttr("selected");multiSelectFilterValues[b]=null;var d=b}}else{a.find("select option").each(function(){$(this).filter(function(){return $(this).text()==ALL_FILTER}).prop("selected",true)})}for(var b=0;b<selectedFilterValues.length;b++){selectedFilterValues[b]=ALL_FILTER}}function fUNQ296(a){return(fUNQ299(a.address,a)||fUNQ299(a.city,a)||fUNQ299(a.state,a)||fUNQ299(a.zip,a)||fUNQ299(a.country,a))}function fUNQ297(a,b,c){return((b!=null&&(b<a.length&&b>-1)&&a[b].trim()!="")?a[b].trim():c)}function fUNQ298(a,c,e,d,b){if(d==false||fUNQ299(c,b)==false){return e}return((c!=null&&(c<a.length&&c>-1)&&a[c].trim()!="")?a[c].trim():e)}function fUNQ299(c,a){var b=parseInt(c,10);return(c!=null&&a.headerDisplayOrderIdxs.indexOf(b)>-1)}function fUNQ300(){var a=$("#mapWindowData");if(a.length==0||inIframe){return}a.html("");fUNQ303(undefined,0)}function fUNQ301(){var c=[];var b,a;if(selectedMarkers.length>0||selectedMarkerSet){for(b=0;b<selectedMarkers.length;b++){a=gMapMarkers[selectedMarkers[b]].idx;if(gMapMarkers[a].show){c[c.length]=a}}}else{for(b=0;b<gMapMarkers.length;b++){if(gMapMarkers[b].show){c[c.length]=gMapMarkers[b].idx}}}if(showNumberedMarkers){for(b=0;b<c.length;b++){a=c[b];if(c.length<100){fUNQ253(gMapMarkers[a],true,b+1)}else{fUNQ253(gMapMarkers[a],false,b+1)}}}}function fUNQ302(a){var g=$("#mapWindowData");if(g.length==0||inIframe){if(showNumberedMarkers){fUNQ301()}return}var f="";var e=0;var d,b;var h=[];if(a!=undefined){e=(a-1)*DISPLAYABLE_ITEMS_PER_PAGE}var c="";if(selectedMarkers.length>0||selectedMarkerSet){for(d=0;d<selectedMarkers.length&&selectedMarkers[d]<markerDescriptions.length;d++){b=markerDescriptions[selectedMarkers[d]].markerIdx;if(gMapMarkers[b].show){h[h.length]=b}}}else{for(d=0;d<markerDescriptions.length&&d<gMapMarkers.length;d++){b=markerDescriptions[d].markerIdx;if(gMapMarkers[b].show){h[h.length]=b}}}if(showMoreOptions&&showDistance){h.sort(function(k,j){return gMapMarkers[markerDescriptions[k].markerIdx].distanceM-gMapMarkers[markerDescriptions[j].markerIdx].distanceM})}for(d=e;d<h.length&&d<e+DISPLAYABLE_ITEMS_PER_PAGE;d++){b=markerDescriptions[h[d]].markerIdx;f+='<div class="printPageDetail"><div class="windowRowRight" onclick="fUNQ304('+b.toString()+')">'+(d+1).toString()+"</div>";c=markerDescriptions[h[d]].message;if(showMoreOptions&&showDistance){c=c.replace("noDistDisplay","distDisplay").replace("##dist##",gMapMarkers[b].displayDistance)}if(c.indexOf("markerLabel")<0){c+='<div class="markerLabelDiv"><span class="markerLabel"></span><br></div>'}f+='<div id="m'+b.toString()+'" class="windowRowLeft" onclick="fUNQ304('+b.toString()+')">'+c+"</div></div>"}if(showNumberedMarkers){for(d=0;d<h.length;d++){b=markerDescriptions[h[d]].markerIdx;if(h.length<100){fUNQ253(gMapMarkers[b],true,d+1)}else{fUNQ253(gMapMarkers[b],false,d+1)}}}fUNQ303(a,h.length);g.html(f)}function fUNQ303(a,b){if(a!=undefined){if(b<DISPLAYABLE_ITEMS_PER_PAGE){$("#compact-pagination").pagination("destroy")}}else{if(b>DISPLAYABLE_ITEMS_PER_PAGE){$("#compact-pagination").pagination({items:b,itemsOnPage:DISPLAYABLE_ITEMS_PER_PAGE,cssStyle:"compact-theme",displayedPages:7,onPageClick:changePage})}else{if(gMapMarkers.length>DISPLAYABLE_ITEMS_PER_PAGE){$("#compact-pagination").pagination("destroy")}}}}function changePage(a){fUNQ302(a)}function fUNQ304(a){window.scrollTo(0,0);if(gMapMarkers[a]==null){return}if(gMapMarkers[a].getMap()==null){gMapMarkers[a].setMap(gMap)}if(gMap.getZoom()<CLUSTER_ZOOM_LEVEL&&mapObject.clustering){gMap.setZoom(CLUSTER_ZOOM_LEVEL+1)}google.maps.event.trigger(gMapMarkers[a],"click")}function fUNQ305(e,b,c,a,d){if(e==null||c==null||b==null||a==null){return false}if(e==c&&b==a){return true}if(Math.abs(e-c)<=0.0001&&Math.abs(b-a)<=0.0001&&d<15){return(Math.sqrt((Math.pow(e-c,2)+Math.pow(b-a,2)))<0.00011)}return false}function fUNQ306(d,b,c,a){if(d==c&&b==a){return 0}return Math.sqrt((Math.pow(d-c,2)+Math.pow(b-a,2)))}function fUNQ307(e,h,d,g){var f=6371;var m=3959;var j=fUNQ308(d-e);var b=fUNQ308(g-h);var l=Math.sin(j/2)*Math.sin(j/2)+Math.cos(fUNQ308(e))*Math.cos(fUNQ308(d))*Math.sin(b/2)*Math.sin(b/2);var k=2*Math.atan2(Math.sqrt(l),Math.sqrt(1-l));return f*k}function fUNQ308(a){return a*(Math.PI/180)}function fUNQ309(b,a){if($.isNumeric(b)&&$.isNumeric(a)){return(Math.abs(b)<=90&&Math.abs(a)<=180)}return false}function fUNQ310(b){searchTermHash={};secondarySearchTermHash={};for(var e=0;e<mapDataLines.length&&e<gMapMarkers.length;e++){if(gMapMarkers[e]==null||!gMapMarkers[e].show){continue}var a=gMapMarkers[e].dataLineIdx;if(mapDataLines[a]==null||mapDataLines[a].length==0){continue}for(var c=0;c<b.headerDisplayOrderIdxs.length&&b.headerDisplayOrderIdxs[c]<mapDataLines[a].length;c++){if(!isIgnoreSearchColumn(c,b)&&mapDataLines[a][b.headerDisplayOrderIdxs[c]].length>0){var d=mapDataLines[a][b.headerDisplayOrderIdxs[c]].trim()+" ("+b.columnHeaderArray[b.headerDisplayOrderIdxs[c]]+")";if(searchTermHash.hasOwnProperty(d)){searchTermHash[d].push(e)}else{var g=[];g.push(e);searchTermHash[d]=g}var f=mapDataLines[e][b.headerDisplayOrderIdxs[c]].trim().toLowerCase();if(secondarySearchTermHash.hasOwnProperty(f)){secondarySearchTermHash[f].push(e)}else{var g=[];g.push(e);secondarySearchTermHash[f]=g}}}}}function fUNQ311(){var b=$("#searchBox");var a=$("#searchImg");if(mapObject.disableSearching!=null&&mapObject.disableSearching==true){if(b.length>0){b.hide()}if(a.length>0){a.hide()}return}if(b.length==0){return}else{b.show();if(a.length>0){a.show()}}fUNQ310(mapObject);var c=fUNQ317(searchTermHash);b.autocomplete({source:c,minLength:1,select:function(d,e){fUNQ312(e.item.value)}});if(mobileDevice||tabletDevice){b.blur(function(){runSearch()})}}function runSearch(){fUNQ312($("#searchBox").val())}function handleSearchSubmit(a){if(a.keyCode==13){fUNQ312($("#searchBox").val());return false}}Object.size=function(c){var b=0,a;for(a in c){if(c.hasOwnProperty(a)){b++}}return b};function fUNQ312(a){if(a.trim().length==0){if(zoomInSearching){fUNQ281(mapObject,true)}else{fUNQ281(mapObject,false)}return}if(searchTermHash.hasOwnProperty(a)){var b=searchTermHash[a];if(zoomInSearching){fUNQ249(b)}else{fUNQ313(b)}}else{if(secondarySearchTermHash.hasOwnProperty(a.toLowerCase())){var c=secondarySearchTermHash[a.toLowerCase()];if(zoomInSearching){fUNQ249(c)}else{fUNQ313(c)}}else{fUNQ314(a,mapObject.regionCode,geoResultCallbackSearchBox)}}}function fUNQ313(a){var c=[],b;for(b=0;b<a.length;b++){c[a[b]]=1}for(b=0;b<gMapMarkers.length;b++){if(gMapMarkers[b]==null){continue}if(c.hasOwnProperty(gMapMarkers[b].idx)){fUNQ287(gMapMarkers[b])}else{fUNQ288(gMapMarkers[b])}}if(a.length==1){fUNQ250(a);fUNQ304(a[0])}else{fUNQ250(a)}}function fUNQ314(a,b,c){if(a.length==0){return}if(mapGeocoder==null){mapGeocoder=new google.maps.Geocoder()}if(b!=undefined&&b.length>0){mapGeocoder.geocode({address:a,region:b},function(e,d){c(e,d)})}else{mapGeocoder.geocode({address:a},function(e,d){c(e,d)})}}function geoResultCallbackSearchBox(b,a){if(a==google.maps.GeocoderStatus.OK){if(mapObject.centerLocationOnMap!=null&&mapObject.centerLocationOnMap==true){gMap.setCenter(b[0].geometry.location);return}fUNQ316(b[0].geometry.location.lat().toFixed(6),b[0].geometry.location.lng().toFixed(6))}}function fUNQ315(f,b){var e=10000;var d=-1;if(selectedMarkerSet){for(c=0;c<selectedMarkers.length;c++){if(gMapMarkers[selectedMarkers[c]].show){var a=fUNQ306(f,b,gMapMarkers[c].getPosition().lat().toFixed(6),gMapMarkers[selectedMarkers[c]].getPosition().lng().toFixed(6));if(a<e){e=a;d=selectedMarkers[c]}}}}else{for(var c=0;c<gMapMarkers.length;c++){if(gMapMarkers[c]!=null&&gMapMarkers[c].show){var a=fUNQ306(f,b,gMapMarkers[c].getPosition().lat().toFixed(6),gMapMarkers[c].getPosition().lng().toFixed(6));if(a<e){e=a;d=c}}}}return d}function fUNQ316(c,a){var b=fUNQ315(c,a);if(b>=0){gMapMarkers[b].setMap(gMap);var d=gMap.getZoom();if(d<12){d=14}else{if(d<16){d=15}}gMap.panTo(gMapMarkers[b].getPosition());gMap.setZoom(d)}}function fUNQ317(a){var c=[];for(var b in a){c.push(b)}c.sort();return c}function fUNQ318(j){var b=false;var f;var k='<?xml version="1.0" ?>';k+='<kml xmlns="http://www.opengis.net/kml/2.2">';k+="<Document>\n";if(userSettings.title!=null&&userSettings.title.length>0){k+="<name><![CDATA["+userSettings.title+"]]></name>\n"}else{k+="<name><![CDATA[ Auto-generated KML by EasyMapMaker ]]></name>\n"}if(userSettings.description!=null&&userSettings.description.length>0){k+="<description><![CDATA["+userSettings.description+"]]></description>\n"}else{k+="<description><![CDATA[ Auto-generated KML by EasyMapMaker ]]></description>\n"}var d="<BalloonStyle><text><![CDATA[";if(fUNQ299(j.title,j)){d+="<b>$[name]</b><br /> "}if(fUNQ296(j)){d+="$[address]<br /> "}d+="$[description]<br/>$[geDirections] ";d+="]]></text></BalloonStyle>";var g=false;var o=IMG_LIST[0];var c=[];if(j.useCustomImages!=null&&j.useCustomImages){if(j.singleCustomImage!=null){o=fUNQ320(j.singleCustomImage);c[c.length]=o;k+=fUNQ319(d,o,CUSTOM_IMAGE_URL+j.singleCustomImage)}else{for(f=0;f<j.sortedGroupKeys.length;f++){var n=j.sortedGroupKeys[f];if(j.groupImageHash.hasOwnProperty(n)){k+=fUNQ319(d,fUNQ320(j.groupImageHash[n]),CUSTOM_IMAGE_URL+j.groupImageHash[n])}if(j.sortedGroupKeys.length>1){g=true}}}}else{if(j.markerImageIdx.length>0){for(f=0;f<IMG_LIST.length;f++){k+=fUNQ319(d,IMG_LIST[f],BASE_IMAGE_URL+IMAGE_PATH+IMG_LIST[f]+markerImgEnding)}g=true}else{k+=fUNQ319(d,IMG_LIST[0],BASE_IMAGE_URL+IMAGE_PATH+IMG_LIST[0]+IMG_FILE_ENDING)}}for(f=0;mapDataLines!=null&&f<mapDataLines.length&&f<gMapMarkers.length;f++){if(gMapMarkers[f]==null){continue}var l="";if(fUNQ299(j.title,j)&&mapDataLines[f][j.title]!=""){l=mapDataLines[f][j.title]}var m=fUNQ279(mapDataLines[f]," ",true,mapObject);var h=fUNQ321(mapDataLines[f],j);if(m&&m.length>0){h="<div>"+m+"</div>"+h}k+="<Placemark>";if(l.length>0){k+="<name><![CDATA["+l+"]]></name>\n"}if(m.length>0){k+="<address><![CDATA["+m+"]]></address>\n"}if(h.length>0){k+="<description><![CDATA["+h+"]]></description>\n"}var a=o;if(g){a=gMapMarkers[f].color}if(j.useCustomImages!=null&&j.useCustomImages){a=o;if(g){a=fUNQ320(gMapMarkers[f].getIcon().url)}}k+="<styleUrl>#"+a+"</styleUrl>\n";var e=gMapMarkers[f].getPosition().lng().toFixed(6).toString()+","+gMapMarkers[f].getPosition().lat().toFixed(6).toString();k+="<Point> <coordinates>"+e+",0</coordinates>\n</Point> \n";k+="</Placemark>\n"}k+="</Document>\n";k+="</kml>";return k}function fUNQ319(a,b,c){return'<Style id="'+b+'"><IconStyle><scale>1</scale> <Icon> <href>'+c+'</href></Icon> <hotSpot x="0.5"  y="0.5"  xunits="fraction" yunits="fraction"/> </IconStyle>'+a+"</Style>\n"}function fUNQ320(c){if(c==null||c.length<1){return"Unknown name"}var a=c.split("/");var b=(a[a.length-1].split("."))[0];return b}function fUNQ321(a,e){var h="";for(var c=0;c<e.headerDisplayOrderIdxs.length;c++){if(!isSelectedColumn(e.headerDisplayOrderIdxs[c],e)){var d=a[e.headerDisplayOrderIdxs[c]];var j=e.columnHeaderArray[e.headerDisplayOrderIdxs[c]];if(d!=null&&d.trim()!=""){if(d.indexOf("\n")>0&&d.charAt(0)=='"'&&d.endsWith('"')){d=d.replace(/\n/g,"<br>");d=d.substr(1,d.length-2)}d=d.replace(/^((https?|ftp):\/\/[^\<]+)$/gim,'<a href="$1" target="_blank">$1</a>');if(e.showLabels){h=h+"<div>"+j+": "+d+"</div>"}else{h=h+"<div>"+d+"</div>"}}}}var k="";if(fUNQ299(e.image,e)&&a[e.image]!=""){k='<img src="'+a[e.image]+'"/>'}var f="";if(fUNQ299(e.email,e)&&a[e.email]!=""){if(fUNQ44(a[e.email])){f='<div>e-mail: <a href="mailto:'+a[e.email]+'"  class="markerLabelDiv">'+a[e.email]+"</a></div>"}else{f="<div>e-mail:"+a[e.email]+"</div>"}}var b="";if(fUNQ299(e.web,e)&&a[e.web]!=""){b='<a href="'+urlizeUrl(a[e.web])+'" target="_blank">'+a[e.web]+"</a>"}var g=h;g=g+k;g=g+f;g=g+b;return g}function myCalculator(f,d){var a=0;var e="";var c=f.length.toString();var b=c;while(b!==0){b=parseInt(b/3,10);a++}a=Math.min(a,d);return{text:c,index:a,title:e}}function fUNQ322(g){var b=(location.search.length>0?location.search.substring(1):""),c=b.length?b.split("&"):[],f=null,d=null,e=0;var a=c.length;for(e=0;e<a;e++){f=c[e].split("=");d=decodeURIComponent(f[0]);if(d==g&&f.length==2){return decodeURIComponent(f[1])}}return""}function fUNQ323(){var b=0,a=0;if(typeof(window.innerWidth)=="number"){b=window.innerWidth;a=window.innerHeight}else{if(document.documentElement&&(document.documentElement.clientWidth||document.documentElement.clientHeight)){b=document.documentElement.clientWidth;a=document.documentElement.clientHeight}else{if(document.body&&(document.body.clientWidth||document.body.clientHeight)){b=document.body.clientWidth;a=document.body.clientHeight}}}return a}function fUNQ324(a){if(a.customZoomAndCenter!=null&&a.customZoomAndCenter){a.center_lat=gMap.getCenter().lat();a.center_lng=gMap.getCenter().lng();a.zoom=gMap.getZoom()}}function fUNQ326(){var a=fUNQ328();fUNQ327(a)}function fUNQ327(b){var a="";if(b!=null&&b.length>0){a=JSON.stringify(b)}$.ajax({type:"POST",url:"/util/getImage.php",data:({imgData:a}),cache:false,dataType:"json"})}function fUNQ328(){var t=$("#map");var q=t.height();var x=t.width();var C=0;var o=0;var b=640;if(q>x){C=b;o=((x*b)/q).toFixed(0)}else{o=b;C=((q*b)/x).toFixed(0)}var E=2;var D=[];var A=[];var e=2048;var c="http://maps.googleapis.com/maps/api/staticmap?key=AIzaSyArK9pT5ZBrngT8I_rzobA64CW5l_mJLTo";var p={};var r=gMap.getCenter().lat().toFixed(6);var l=gMap.getCenter().lng().toFixed(6);var u=0;var h=gMap.getBounds();var d,f,F;if(mapObject.clustering&&markerCluster!=null){var g=markerCluster.getClusters();for(u=0;u<g.length;u++){var v=g[u];if(v.clusterIcon_!=null&&v.clusterIcon_.url_!=null){if(h.contains(v.getCenter())){d=v.clusterIcon_.url_;f=v.getCenter().lat().toFixed(6);F=v.getCenter().lng().toFixed(6);if(d.startsWith("//")){d="http:"+d}if(!d.startsWith("http")){d=CUSTOM_IMAGE_URL+d}if(!p.hasOwnProperty(d)){p[d]=[];A.push(d)}var z={};z.lat=f;z.lng=F;p[d].push(z)}}}}for(u=0;u<gMapMarkers.length;u++){if(gMapMarkers[u]!=null&&gMapMarkers[u].getMap()!=null&&gMapMarkers[u].show&&h.contains(gMapMarkers[u].getPosition())){f=gMapMarkers[u].getPosition().lat().toFixed(6);F=gMapMarkers[u].getPosition().lng().toFixed(6);d=gMapMarkers[u].getIcon().url;if(!d.startsWith("http")){d=CUSTOM_IMAGE_URL+d}if(!p.hasOwnProperty(d)){p[d]=[];A.push(d)}var z={};z.lat=f;z.lng=F;p[d].push(z)}}var w="style=feature:all|visibility:off";var m=true;var n=[];var k="";var y=0;for(u=0;u<A.length;u++){var B=A[u];if(!m&&y<5){k+="&markers=icon:"+B}if(y==5){D.push(k);m=true;y=0}if(p.hasOwnProperty(A[u])){n=p[A[u]];for(var s=0;s<n.length;s++){var a=n[s].lat+","+n[s].lng;if(k.length+30>e){D.push(k);m=true;y=0}if(m){k=c+"&center="+r+","+l+"&size="+o.toString()+"x"+C.toString()+"&scale="+E;if(u!=0||s!=0){k=c+"&"+w+"&center="+r+","+l+"&size="+o.toString()+"x"+C.toString()+"&scale="+E}}if(m){m=false;k+="&markers=icon:"+B+"|"}else{a="|"+a}k+=a}}y++}if(A.length>0){D.push(k)}else{k=c+"&center="+r+","+l+"&size="+o.toString()+"x"+C.toString()+"&scale="+E;D.push(k)}return D}function fUNQ329(a){return encodeURIComponent(a).replace(/'/g,"%27").replace(/"/g,"%22")}function fUNQ330(a,b){$("#downloadFormPoster").remove();$("<div id='downloadFormPoster' style='display: none;'><iframe name='downloadFormPosterIframe'></iframe></div>").appendTo("body");$("<form id='submitDownload' action='"+a+'\' target=\'downloadFormPosterIframe\' method=\'post\'><input id="downloadInput" type="hidden" name="jsonstring" value=""/></form>').appendTo("#downloadFormPoster");$("#downloadInput").val(JSON.stringify(b));$("#submitDownload").submit()}if(!window.console){console={debug:function(a){}}}var console=console||{debug:function(){}};var advancedMap=false;var httpOverRide=false;var MAX_LINE_MESSAGE="Only first 100 rows shown, but all data processed.";var MAX_ERROR_LINE_MESSAGE="Only the first 100 errors are shown.";var ADDRESS_LIMIT=250;var GEO_CODE_SLOWNESS=7000;var imageData=null;var imageCount=0;var columnHeaderHash={};var dataLines=[];var mapDataLines=[];var selectFilterMatch={};var labelNames=["Address","City","State / Province","Zip (Postal) Code","Country","Latitude","Longitude","Marker Title","Url (website)","(website) Image","(website) E-mail","Group (marker colors)","Pin Label"];var prettyMatchNames=["address","city","state","zip","country","lat","long","title","url","image","email","group","pin_label"];var matchNames=["address_sel","city_sel","state_sel","zip_sel","country_sel","lat_sel","long_sel","title_sel","url_sel","image_sel","email_sel","group_sel","pin_label_sel"];var miscIds=["region_sel","clusterCB","showLabelCB","scrollWheelCB","noDisplay","toDisplay","noFilter","toFilter","mapType","moveAllToDisplay","removeAllFromDisplay","removeAllFromFilter","showMoreOptionsCB","dynamicFiltersCB","filterCountsCB","multiSelectFiltersCB","zoom_in_sel","buttonUpload","map_lang_sel"];var addressMatch=["address","addresses","street","streets"];var negAddressMatch=["email","e-mail"];var cityMatch=["city","cities","town","towns"];var zipMatch=["zip","zipcode","postcode","zip code","post code","postalcode","postal"];var stateMatch=["state","region","province"];var titleMatch=["title","name","company","label"];var urlMatch=["url","website","link"];var imageMatch=["img","image","picture","photo"];var emailMatch=["email","e-mail"];var latMatch=["latitude","lat","lt","emm_lat"];var longMatch=["longitude","ln","lng","lon","long","emm_lng"];var countryMatch=["country"];var groupMatch=["group","category","type"];var reservedMatches=["emm_lat","emm_lng","emm_acc"];var savedMapId=null;var saveMapEditId=null;var saveCount=1;var selected_columns={};var editMap=true;var clickMessage="<h2>Click here to paste data</h2><h4>(Or drag and drop your excel file)</h4>";var dataPresentMessage="<h2>Click here to copy/paste data</h2><h4>(Or drag and drop your excel file)</h4>";var textAreaDataLength=0;var textAreaChanged=false;var geoCoder;var defaultGeoCodeTimeout=600;var geoCodeHash={};var geoCodeStats={};geoCodeStats.init=false;geoCodeStats.geoCoding=false;geoCodeStats.limitHit=false;geoCodeStats.slowness=false;var tabletDevice=false,mobileDevice=false;var overTableMessageFocus=false;var google;var mainTextArea=null;var overTableMessageDiv=null;var outerOverTableDiv=null;var displayTableDiv=null;var reProcessData=false;var originalData=null;var disableGroupColorChange=false;var loadedJsPinLabel=false;var loadedJsCircle=false;var loadedJsCirclePin=false;var ie=(function(){var c,d=-1;if(navigator.appName=="Microsoft Internet Explorer"){var a=navigator.userAgent;var b=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})");if(b.exec(a)!=null){d=parseFloat(RegExp.$1)}}return((d>-1)?d:c)}());function init(){if(!window.console){console={debug:function(){}}}if((navigator.userAgent.match(/iPhone/i))||(navigator.userAgent.match(/iPod/i))||((navigator.userAgent.match(/mobile/i))&&(navigator.userAgent.match(/Android/i)))||(navigator.userAgent.match(/blackberry/i))||(navigator.userAgent.match(/windows phone/i))){mobileDevice=true}if(!mobileDevice&&((navigator.userAgent.match(/Android/i))||(navigator.userAgent.match(/iPad/i)))){tabletDevice=true}advancedMap=fUNQ201();if(advancedMap){$("#easyMaps").toggleClass("active");$("#advancedMaps").toggleClass("active")}mainTextArea=$("#sourceData");overTableMessageDiv=$("#overTableMessage");outerOverTableDiv=$("#outerOverTable");displayTableDiv=$("#displayTable");if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){displayTableDiv.html(initial_table_display)}var h=document.getElementById("sourceData");if(h.addEventListener){h.addEventListener("input",function(){p()},false)}else{if(h.attachEvent){h.attachEvent("onpropertychange",function(){p()})}}function p(){textAreaChanged=true;reProcessData=true;fUNQ158();textAreaDataLength=mainTextArea.val().length;if(textAreaDataLength==0){overTableMessageDiv.html(clickMessage);if(!displayTableDiv.hasClass("light-gray")){displayTableDiv.toggleClass("light-gray")}}}$("#errorButton").click(function(){fUNQ120()});if((typeof EditingMap!="undefined"&&EditingMap)||(typeof BulkGeoMap!="undefined"&&BulkGeoMap)){fUNQ0()}$("#useSample1").click(function(){fUNQ113(sample_data1)});$("#useSample2").click(function(){fUNQ113(sample_data2)});$("#optionButton").click(function(){var u=$("#mapOptions");if(u.css("display")=="none"||reProcessData){editPageObject.emm_lat=-1;editPageObject.emm_lng=-1;editPageObject.emm_acc=-1;$("#makeMapButton").prop("disabled",false);$("#mapUpdateButton").prop("disabled",true);if(fUNQ187()>1){$("#outerProgressDiv").hide();$("#timeRemaining").html("");fUNQ119();reProcessData=false;u.show()}}});$("#mapUpdateButton").click(function(){reGenerateMap()});$("#makeMapButton").click(function(){if((dataLines.length==0||reProcessData)&&mainTextArea.val().length>0){var v=$("#mapOptions");if(typeof BulkGeoMap==="undefined"&&v.css("display")=="none"){v.show()}fUNQ187();if(typeof EditingMap!="undefined"&&EditingMap&&reProcessData===false){}else{editPageObject.emm_lat=-1;editPageObject.emm_lng=-1;editPageObject.emm_acc=-1;fUNQ119()}reProcessData=false}var u=fUNQ125();if(!u){alert("Location options are not set.");return}if(!fUNQ124()){alert("Data is not present.");return}if(!geoCodeStats.geoCoding&&!$(this).hasClass("btn-danger")){fUNQ121();mapPrep()}else{if($(this).hasClass("btn-danger")){fUNQ122();geoCodeStats.geoCoding=false;redrawTextArea()}}});$("#mapModal").modal({backdrop:"static",keyboard:false,show:false});$("#mapModalButton").click(function(){if(savedMapId!=null){$("#mapModalButton").button("loading");fUNQ177();return}if(window.location.protocol=="https:"||httpOverRide){if($("#mapProtection").length>0){$("#mapProtection").hide()}if($("#mapPasswordProtection").length>0){$("#mapPasswordProtection").show()}}$("#mapModalButton").button("loading");$("#mapModal").modal("show")});$("#mapSaveButton").click(function(){if(fUNQ178()){$("#mapModal").modal("hide")}});$("#closeSaveModal").click(function(){$("#mapModalButton").button("reset")});$("#closeSaveButton").click(function(){$("#mapModalButton").button("reset")});function l(){return(mainTextArea.val().trim().length>0)}overTableMessageDiv.blur(function(){if(mobileDevice||tabletDevice){overTableMessageFocus=false}});outerOverTableDiv.blur(function(){if(mobileDevice||tabletDevice){if($("#overTableMessage").css("display")=="none"){}else{if(l()){overTableMessageDiv.hide()}}}});outerOverTableDiv.mouseenter(function(){if($(this).css("display")=="none"){return}if(geoCodeStats.geoCoding){return}if(mobileDevice||tabletDevice){if(overTableMessageDiv.css("display")=="none"){overTableMessageFocus=true}else{overTableMessageFocus=false;outerOverTableDiv.focus();return}}r()});var g=document.getElementById("outerOverTable");var c=document.getElementById("tableText");var j=false;var f=null;var o=typeof FileReader!=="undefined"&&typeof FileReader.prototype!=="undefined"&&typeof FileReader.prototype.readAsBinaryString!=="undefined";function m(){if(typeof XLSX==="undefined"){setTimeout(m,700);return}j=true;var y=XLSX;try{var v=false;if(v){xw(f,a)}else{var x;if(o){x=y.read(f,{type:"binary"})}else{var u=e(f);x=y.read(btoa(u),{type:"base64"})}a(x)}}catch(w){alert("problem processing excel file: "+w.message)}}function e(x){var y="",v=0,u=10240;for(;v<x.byteLength/u;++v){y+=String.fromCharCode.apply(null,new Uint8Array(x.slice(v*u,v*u+u)))}y+=String.fromCharCode.apply(null,new Uint8Array(x.slice(v*u)));return y}function a(v){var u="";u=q(v);fUNQ130(u)}function q(v){var w=XLSX;var u={};v.SheetNames.forEach(function(x){var y=w.utils.sheet_to_array(v.Sheets[x]);if(y.length>0){u[x]=y}});return u}function n(v){var w=XLSX;var u={};v.SheetNames.forEach(function(x){var y=w.utils.sheet_to_row_object_array(v.Sheets[x]);if(y.length>0){u[x]=y}});return u}function t(y){y.stopPropagation();y.preventDefault();var w=y.dataTransfer.files;var x=w[0];var u=new FileReader();u.onload=function(A){var z=A.target.result;f=z;if(!j){fUNQ118(m)}else{m()}};try{if(o){u.readAsBinaryString(x)}else{u.readAsArrayBuffer(x)}}catch(v){alert("problem processing excel file: "+v.message)}}function b(u){u.stopPropagation();u.preventDefault();u.dataTransfer.dropEffect="copy"}if(g.addEventListener){g.addEventListener("dragenter",b,false);g.addEventListener("dragover",b,false);g.addEventListener("drop",t,false)}if(c.addEventListener){c.addEventListener("dragenter",b,false);c.addEventListener("dragover",b,false);c.addEventListener("drop",t,false)}function r(){if(l()){displayTableDiv=$("#displayTable");if(!displayTableDiv.hasClass("light-gray")){displayTableDiv.toggleClass("light-gray")}overTableMessageDiv.html(dataPresentMessage)}else{overTableMessageDiv.html(clickMessage)}overTableMessageDiv.fadeIn("medium")}mainTextArea.blur(function(){if(l()){if(textAreaChanged){fUNQ131();fUNQ129()}fUNQ112();if(mobileDevice||tabletDevice){d()}}});$("#toggleDiv").mouseleave(function(){d()});function d(){if(l()&&!geoCodeStats.geoCoding){if(displayTableDiv.hasClass("light-gray")){displayTableDiv.removeClass("light-gray")}overTableMessageDiv.fadeOut("medium")}}function s(){textAreaDataLength=mainTextArea.val().length;if(textAreaDataLength>0){fUNQ131();fUNQ112()}else{overTableMessageDiv.html(clickMessage);$("#tableText").hide()}$("#displayTable").addClass("light-gray")}if(ie!=null){$("#prettyTable").click(function(){if(geoCodeStats.geoCoding){return}k()});overTableMessageDiv.click(function(){if(geoCodeStats.geoCoding){return}k()})}outerOverTableDiv.click(function(){if(geoCodeStats.geoCoding){return}k()});function k(){textAreaChanged=false;$("#tableText").show();var u=mainTextArea;u.show();u.select();u.mouseup(function(){u.unbind("mouseup");return false});$("#prettyTable").hide();outerOverTableDiv.hide()}fUNQ93();s();$("[rel=tooltip]").tooltip();fUNQ224();fUNQ220();fUNQ223();fUNQ221();fUNQ222("togglePinRadius","searchRadiusId");fUNQ219()}function fUNQ112(){$("#prettyTable").show();displayTableDiv.removeClass("light-gray");overTableMessageDiv.html(dataPresentMessage);outerOverTableDiv.show();$("#tableText").hide()}function fUNQ113(a){textAreaChanged=true;mainTextArea.val(a);textAreaDataLength=mainTextArea.val().length;fUNQ131();overTableMessageDiv.html(clickMessage);overTableMessageDiv.hide();fUNQ112();if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){reProcessData=true}fUNQ158()}function fUNQ114(b){var c="";if($("#map_lang_sel").length>0){c=$("#map_lang_sel option:selected").val();if(c!=null&&c.trim().length>0){c="&language="+c}if(typeof c=="undefined"||c==null||c=="undefined"){c=""}}var a=document.createElement("script");a.type="text/javascript";a.src="//maps.googleapis.com/maps/api/js?v=3.24&key=AIzaSyArK9pT5ZBrngT8I_rzobA64CW5l_mJLTo&libraries=geometry&callback="+b+c;document.body.appendChild(a)}function fUNQ115(a){if(loadedJsPinLabel==true){setTimeout(a,5)}var b=document.createElement("script");b.type="text/javascript";b.src="/js/markerwithlabel.js";document.body.appendChild(b);loadedJsPinLabel=true;setTimeout(a,500)}function fUNQ116(a){if(loadedJsCircle==true){setTimeout(a,5)}var b=document.createElement("script");b.type="text/javascript";b.src="/js/MarkerWithCircle.js?cacheBust=yes";document.body.appendChild(b);loadedJsCircle=true;setTimeout(a,500)}function fUNQ117(a){if(loadedJsCirclePin==true){setTimeout(a,5)}var b=document.createElement("script");b.type="text/javascript";b.src="/js/markerwithlabelCircle.js";document.body.appendChild(b);loadedJsCirclePin=true;setTimeout(a,500)}function fUNQ118(a){var b=document.createElement("script");b.type="text/javascript";b.src="/js/xlsx.core2.min.js";document.body.appendChild(b);setTimeout(a,300)}function fUNQ119(){if(dataLines.length==0){return}if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){return}selectFilterMatch={};fUNQ190(columnHeaderHash);fUNQ140();fUNQ145();fUNQ153();fUNQ154();fUNQ155();fUNQ198();fUNQ186("selectorData");fUNQ184("selectorData");if(advancedMap){fUNQ185("selectorData")}fUNQ137("selectorData");fUNQ135();fUNQ157("selectorData");fUNQ138("selectorData");fUNQ139("selectorData");$("#markerTitleCB").prop("checked",true);fUNQ146("selectorData");fUNQ147("selectorData");fUNQ151("selectorData");fUNQ152("selectorData");fUNQ149("selectorData");fUNQ150("selectorData");fUNQ148();fUNQ126();fUNQ127();fUNQ128();fUNQ41();fUNQ123();var a=$("#headerInst");if(a.length>0){if(fUNQ125()){a.hide()}else{a.show()}}if(advancedMap){$("#outerFilterSelects").show();$("#outerMarkerDisplaySelects").show();$("#outerCustoms").show();$("#outerSearchDisplay").show();$("#outerMisc").show();if(imageCount>0){fUNQ210(imageData,imageCount,true)}}}function fUNQ120(){var b=$("#errorButton");var a=$("#prettyErrorTable");if(b.text()=="Show Errors"){b.text("Hide Errors");a.show()}else{b.text("Show Errors");a.hide()}}function fUNQ121(){var a=$("#makeMapButton");if(a.hasClass("btn-caution")){a.toggleClass("btn-caution btn-danger");a.text("Stop Mapping")}else{if(a.hasClass("btn-success")){a.toggleClass("btn-success btn-danger");a.text("Stop Mapping")}}return true}function fUNQ122(){var a=fUNQ125();var b=$("#makeMapButton");if(b.hasClass("btn-danger")){if(a){b.toggleClass("btn-success btn-danger")}else{b.toggleClass("btn-caution btn-danger")}b.text("Make Map");if(typeof EditingMap!="undefined"&&EditingMap){b.text("Re-Map")}}}function fUNQ123(){var a=fUNQ125();var b=$("#makeMapButton");if(a&&b.hasClass("btn-caution")){b.toggleClass("btn-caution btn-success")}else{if(!a&&b.hasClass("btn-success")){b.toggleClass("btn-caution btn-success")}}}function fUNQ124(){return(dataLines!=null&&dataLines.length>0&&dataLines[0]!=null&&dataLines[0].length>0)}function fUNQ125(){return((editPageObject.lat!=null&&editPageObject.lat>-1&&editPageObject.lng!=null&&editPageObject.lng>-1)||(editPageObject.address!=null&&editPageObject.address>-1)||(editPageObject.city!=null&&editPageObject.city>-1)||(editPageObject.state!=null&&editPageObject.state>-1)||(editPageObject.zip!=null&&editPageObject.zip>-1)||(editPageObject.country!=null&&editPageObject.country>-1))}function fUNQ126(){var c=[];var a=[];editPageObject.headerDisplayOrderIdxs.length=0;for(var b=0;b<editPageObject.columnHeaderArray.length;b++){if(reservedMatches.indexOf(editPageObject.columnHeaderArray[b])>=0){continue}if(b==editPageObject.lat||b==editPageObject.lng){continue}if(editPageObject.noDisplayNames!=null&&editPageObject.noDisplayNames.indexOf(editPageObject.columnHeaderArray[b])>=0){a.push(b);continue}else{c.push(b)}editPageObject.headerDisplayOrderIdxs[editPageObject.headerDisplayOrderIdxs.length]=b}if($("#markerDisplaySelects").length==0){return}fUNQ49("noDisplay","toDisplay",c,a,editPageObject.columnHeaderArray);fUNQ39()}function fUNQ127(){if($("#filterSelects").length==0){return}var a=[];var c=[];for(var b=0;b<editPageObject.columnHeaderArray.length;b++){if(reservedMatches.indexOf(editPageObject.columnHeaderArray[b])>=0){continue}if(b==editPageObject.lat||b==editPageObject.lng){continue}if(editPageObject.filterListNames!=null&&editPageObject.filterListNames.indexOf(editPageObject.columnHeaderArray[b])>=0){c.push(b);continue}a.push(b)}fUNQ49("noFilter","toFilter",c,a,editPageObject.columnHeaderArray);fUNQ47(MAX_FILTERS)}function fUNQ128(){if($("#innerSearchSelects").length==0){return}var a=[];var c=[];for(var b=0;b<editPageObject.columnHeaderArray.length;b++){if(reservedMatches.indexOf(editPageObject.columnHeaderArray[b])>=0){continue}if(b==editPageObject.lat||b==editPageObject.lng){continue}if(editPageObject.noSearchColumns!=null&&editPageObject.noSearchColumns.indexOf(b)>=0){c.push(b);continue}a.push(b)}fUNQ49("noSearch","toSearch",a,c,editPageObject.columnHeaderArray);fUNQ48()}function fUNQ129(){return;if(typeof EditingMap!="undefined"&&EditingMap){var c=$.extend(true,{},editPageObject.groupCustomColorImageHash);fUNQ187();var a=0;if(editPageObject.emm_acc>-1||clonedHeaders.indexOf("emm_acc")){a++}if(editPageObject.emm_lat>-1){a++}if(editPageObject.emm_lng>-1){a++}if(clonedHeaders.length-a>editPageObject.columnHeaderArray.length){$("#lineCount").html('<div class="alert alert-error">Do not add or remove columns from the data or change column headers.</div>')}for(var b=0;b<clonedHeaders.length&&b<editPageObject.columnHeaderArray.length;b++){if(clonedHeaders[b].toLocaleLowerCase()!=editPageObject.columnHeaderArray[b].toLocaleLowerCase()){$("#lineCount").html('<div class="alert alert-error">Do not add or remove columns from the data or change column headers.</div>');break}}fUNQ141();fUNQ2(c)}}function fUNQ130(m){reProcessData=true;fUNQ158();var b=false;var c="";var a="";var n=[];var k=[];var l=Object.keys(m);for(var f=0;f<l.length;f++){if(m.hasOwnProperty(l[f])){k.push.apply(k,m[l[f]])}}if(k.length>0){var h=0;var o=0;for(var f=0;f<k.length;f++){var d=k[f].join("	");if(d.trim().indexOf("#")==0||d.trim()==""){continue}if(h==0&&k[f].length>0){h=k[f].length}a="";o++;for(var e=0;e<h&&e<k[f].length;e++){if(!b){a+="<th>"+fUNQ132(fUNQ134(k[f][e].fulltrim(),25))+"</th>"}else{a+="<td>"+fUNQ132(fUNQ134(k[f][e].fulltrim(),25))+"</td>"}}c+="<tr>"+a+"</tr>";if(o>100&&o>0){c+='<tr><td colspan="'+h+'">'+MAX_LINE_MESSAGE+"</td></tr>";break}b=true}$("#outerDisplayTable").html('<table id="displayTable" class="table table-bordered table-condensed" style="width: 100%">'+c+"</table>");var g="";for(var f=0;f<k.length;f++){for(var e=0;e<k[f].length;e++){if(k[f][e].indexOf("\n")>0){k[f][e]='"'+k[f][e]+'"'}}g+=k[f].join("	")+"\n"}mainTextArea.val(g)}}function htmlEscape(a){return String(a).replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&#39;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function htmlUnescape(a){return String(a).replace(/&quot;/g,'"').replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}function fUNQ131(){if(editMap){editPageObject.dataType=null}var h=mainTextArea.val();var b=false;var c="";var a="";var k=[];safeLineProcessor(h,k,0);var l=0;var g=0;for(var f=0;f<k.length;f++){var d=k[f].join("	");if(d.trim().indexOf("#")==0||d.trim()==""){continue}if(!b){g=k[f].length}a="";l++;for(var e=0;e<g&&e<k[f].length;e++){if((editPageObject.hideLatLong==null||editPageObject.hideLatLong==true)&&e==editPageObject.emm_lat||e==editPageObject.emm_lng){}if(!b){a+="<th>"+fUNQ134(k[f][e].fulltrim(),25)+"</th>"}else{a+="<td>"+fUNQ132(fUNQ134(k[f][e].fulltrim(),25))+"</td>"}}c+="<tr>"+a+"</tr>";if(l>100&&l>0){c+='<tr><td colspan="'+g+'">'+MAX_LINE_MESSAGE+"</td></tr>";break}b=true}$("#outerDisplayTable").html('<table id="displayTable" class="table table-bordered table-condensed" style="width: 100%">'+c+"</table>")}function redrawTextArea(){var b=fUNQ133(fUNQ86(editPageObject.columnHeaderArray,editPageObject));var a=fUNQ133(fUNQ80(dataLines,editPageObject));if(b.length>0&&a.length>0){mainTextArea.val(b+"\n"+a)}}function fUNQ132(a){return a.replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;").replace(/'/,"&apos;")}function fUNQ133(a){return a.replace(/&amp;/g,"&").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&apos;/,"'")}function fUNQ134(b,a){if(b==null){return""}if(typeof b!=="string"){b=b.toString()}if(b.trim().length>a){return b.substring(0,a-5)+"..."}return b}String.prototype.fulltrim=function(){return this.replace(/[\xC2]*/g,"").trim()};function fUNQ135(){if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){var a=false;if(dataLines.length>=150){$("#clusterCB").prop("checked",true)}if(dataLines.length>2000){$("#clusterCB").click(function(){if(!this.checked&&a==false){var b=confirm("Map performance will degrade significantly without clustering.  Are you sure you want to disable clustering?");a=true;if(!b){this.checked=true}}})}}}function fUNQ136(h,j,c,f,a,e,k,b){if(!h&&$("#"+c).length>0){return}if($("#"+c).length>0){return}var g="";if(e!=null&&e===true){g="checked"}var d='<p><label id="'+c+'_label" for="'+c+'">'+f+" ";if(a!=null&&a.length>0){d+='<a id="'+c+'_ToolTip" data-toggle="tooltip" title="'+a+'"><i class="icon-question-sign"></i></a> '}d+='</label>  <input id="'+c+'" type="checkbox" name="'+b+'" value="'+b+'" '+g+" > </p>";$("#"+j).append(d);$("#"+c+"_ToolTip").tooltip({placement:"right"});if(k!=null&&k.length>0){$("#"+c).change(function(){editPageObject[k]=this.checked})}}function fUNQ137(a){if($("#clusterCB").length>0){return}var b='<p><label id="clusterCB_label" for="clusterCB">enable clustering <a id="cbToolTip" data-toggle="tooltip" title="Combine dense markers together, improves map performance."><i class="icon-question-sign"></i></a> </label>  <input id="clusterCB" type="checkbox" name="cluster" value="Cluster"> </p>';$("#"+a).append(b);$("#cbToolTip").tooltip({placement:"right"})}function fUNQ138(a){if($("#scrollWheelCB").length>0){return}var b='<p><label id="scrollWheelCB_label" for="scrollWheelCB">Mouse Scrollwheel <a id="swToolTip" data-toggle="tooltip" title="Allow the mouse wheel to resize the map."><i class="icon-question-sign"></i></a> </label>  <input id="scrollWheelCB" type="checkbox" name="scrollWheel" value="ScrollWheel"> </p>';$("#"+a).append(b);$("#swToolTip").tooltip({placement:"right"})}function fUNQ139(a){if($("#markerTitleCB").length>0){return}var b='<p><label id="markerTitleCB_label" for="markerTitleCB">(mouse-over) Marker <a id="markerTitleToolTip" data-toggle="tooltip" title="Show the title (if one exists) when the mouse is over a pin."><i class="icon-question-sign"></i></a> </label>  <input id="markerTitleCB" type="checkbox" name="markerTitle" value="markerTitle"> </p>';$("#"+a).append(b);$("#markerTitleToolTip").tooltip({placement:"right"})}function fUNQ140(){var e=BASIC_GROUP_COUNT;var b="";if(advancedMap){e=MAX_GROUPS;b=", or use to set multiple custom images."}var c=' <a id="groupToolTip" data-toggle="tooltip" title="Allows filtering on up to '+e.toString()+" different marker colors"+b+'"><i class="icon-question-sign"></i></a>';var d=$("#group_sel_label");var a=$("#groupToolTip");if(d.length==0||a.length>0){}else{d.append(c);$("#groupToolTip").tooltip({placement:"right"})}fUNQ141()}function fUNQ141(){var c=$("#group_sel option:selected").attr("value");var a=$("#group_color_div");if(c==-1){if(a.length>0){editPageObject.groupCustomColorImageHash={};$("#group_color_div").hide()}return}if(a.length==0){var d=$("#group_sel").parent();var b='<div id="group_color_div" >	<a id="toggleGroupColors">Show Group Markers</a><div id="groupMarkersSelected" style="display: none;"> </div></div>';d.after(b);$("#toggleGroupColors").click(function(){if($(this).text()=="Show Group Markers"){$("#groupMarkersSelected").show();$(this).text("Hide Group Markers")}else{$("#groupMarkersSelected").hide();$(this).text("Show Group Markers")}})}else{a.show()}$("#groupMarkersSelected").html(fUNQ142())}function fUNQ142(){fUNQ70(dataLines,undefined,editPageObject);var h=BASIC_GROUP_COUNT;if(editPageObject.mapType=="advanced"){h=MAX_GROUPS}var g="";for(var d=0;d<editPageObject.sortedGroupKeys.length;d++){var k=editPageObject.sortedGroupKeys[d];editPageObject.groupCustomColorImageHash[k]=d;var l="";var f="";var c="";if(!editPageObject.groupImageHash.hasOwnProperty(k)||isNaN(editPageObject.groupImageHash[k])||editPageObject.groupImageHash[k]>IMG_LIST.length||editPageObject.groupImageHash[k]<0){f="None";l="/img/blank.gif";c="None"}else{l=CLOUD_FRONT_URL+IMAGE_PATH+SMALL_IMAGE+IMG_LIST[editPageObject.groupImageHash[k]]+IMG_FILE_ENDING;f=IMG_LIST[editPageObject.groupImageHash[k]];c=LANG_COLOR_LIST[editPageObject.groupImageHash[k]]}g+='<div> <label class="groupColorLabel" id="groupColor'+d+'">'+k+'</label><div class="pull-left">   <div class="pull-right"><div class="btn-group">   <a class="btn  dropdown-toggle" data-toggle="dropdown"><img src="'+l+'" id="pinImage'+d+'" style="padding-right: 5px;"><span id="pinSpan'+d+'" data-color="'+f+'"  >'+c+'</span><span class="caret"></span></a>';g+='<ul class="dropdown-menu" style="text-align: left;"> ';for(var e=0;e<h;e++){var a=IMG_LIST[e];var b=CLOUD_FRONT_URL+IMAGE_PATH+SMALL_IMAGE+a+IMG_FILE_ENDING;c=LANG_COLOR_LIST[e];g+=' <li  class="markerHover" onclick="fUNQ144(\''+a+"', "+d+",'"+c+'\')"><img src="'+b+'" id="pinImage'+d+'" style="padding-right: 5px; padding-left: 5px;">'+c+"</li>"}g+="</ul>";g+="</div></div></div></div>"}return g}function fUNQ143(){for(var b=0;b<editPageObject.sortedGroupKeys.length;b++){var d=$("#groupColor"+b).text();var a=$("#pinSpan"+b).attr("data-color");var c=IMG_LIST.indexOf(a);editPageObject.groupCustomColorImageHash[d]=c}}function fUNQ144(b,a,f){if(disableGroupColorChange===true||b==undefined){return}var d=CLOUD_FRONT_URL+IMAGE_PATH+SMALL_IMAGE+b+IMG_FILE_ENDING;$("#pinImage"+a).attr("src",d);$("#pinSpan"+a).html(f);$("#pinSpan"+a).attr("data-color",b);var e=$("#groupColor"+a).text();var c=IMG_LIST.indexOf(b);editPageObject.groupCustomColorImageHash[e]=c}function fUNQ145(){var b=' <a id="pinLabelToolTip" data-toggle="tooltip" title="Shows text below the pin on the map (causes browser to crash on iphone/ipad)"><i class="icon-question-sign"></i></a>';var c=$("#pin_label_sel_label");var a=$("#pinLabelToolTip");if(c.length==0||a.length>0){}else{c.append(b);$("#pinLabelToolTip").tooltip({placement:"right"})}}function fUNQ146(a){if(!advancedMap||$("#showMoreOptionsCB").length>0){return}var b='<p><label id="showMoreOptionsCB_label" for="showMoreOptionsCB">directions &amp; nearby filter <a id="showMoreOptionsToolTip" data-toggle="tooltip" title="Enable a left panel for directions and a radius search"><i class="icon-question-sign"></i></a> </label>  <input id="showMoreOptionsCB" type="checkbox" name="showMoreOptions" value="directions panel" > </p>';$("#"+a).append(b);$("#showMoreOptionsToolTip").tooltip({placement:"right"});$("#showMoreOptionsCB").change(function(){editPageObject.showMoreOptions=this.checked})}function fUNQ147(a){if(!advancedMap||$("#exportDataCB").length>0){return}var b='<p><label id="exportDataCB_label" for="exportDataCB">Export Data <a id="exportDataToolTip" data-toggle="tooltip" title="Add the ability to export the data displayed on the map."><i class="icon-question-sign"></i></a> </label>  <input id="exportDataCB" type="checkbox" name="exportData" value="directions panel" > </p>';$("#"+a).append(b);$("#exportDataToolTip").tooltip({placement:"right"});$("#exportDataCB").change(function(){editPageObject.exportData=this.checked})}function fUNQ148(){fUNQ136(advancedMap,"selectorData","ZoomAndCenterCB","Custom Zoom &amp; Center","Sets the starting zoom level and center to the values of when the map was saved.  The default is to zoom out so all points are visible.",false,"customZoomAndCenter","customZoomAndCenter")}function fUNQ149(a){if($("#showDescriptionDirectionsCB").length>0){return}var b='<p><label id="showDescriptionDirectionsCB_label" for="showDescriptionDirectionsCB">Description Directions  <a id="showDescriptionDirectionsToolTip" data-toggle="tooltip" title="Show direction box after clicking on the address in the marker description."><i class="icon-question-sign"></i></a> </label>  <input id="showDescriptionDirectionsCB" type="checkbox" name="showMarkerNumbers" checked > </p>';$("#"+a).append(b);$("#showDescriptionDirectionsToolTip").tooltip({placement:"right"});$("#showDescriptionDirectionsCB").change(function(){editPageObject.showDirectionDescription=this.checked;$("#showGoogleMapsDirectionsCB").prop("checked",false);editPageObject.useGoogleMapsDirections=false})}function fUNQ150(a){if($("#showGoogleMapsDirectionsCB").length>0){return}var b='<p><label id="showGoogleMapsDirectionsCB_label" for="showGoogleMapsDirectionsCB">Google Maps Directions  <a id="showGoogleMapsDirectionsToolTip" data-toggle="tooltip" title="Use Google Maps for directions."><i class="icon-question-sign"></i></a> </label>  <input id="showGoogleMapsDirectionsCB" type="checkbox" name="showGoogleMaps"  > </p>';$("#"+a).append(b);$("#showGoogleMapsDirectionsToolTip").tooltip({placement:"right"});$("#showGoogleMapsDirectionsCB").change(function(){editPageObject.useGoogleMapsDirections=this.checked;$("#showDescriptionDirectionsCB").prop("checked",false);editPageObject.showDirectionDescription=false})}function fUNQ151(a){if(!advancedMap||$("#zoomInSearchingCB").length>0){if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){editPageObject.zoomInSearching=true}return}var b='<p><label id="zoomInSearchingCB_label" for="zoomInSearchingCB">Zoom In Search Box <a id="zoomInSearchingToolTip" data-toggle="tooltip" title="Zoom into items that match the search while still showing other items.  Other option is to zoom in and only display items matching the search."><i class="icon-question-sign"></i></a> </label>  <input id="zoomInSearchingCB" type="checkbox" name="zoomInSearching" value="directions panel" checked> </p>';$("#"+a).append(b);$("#zoomInSearchingToolTip").tooltip({placement:"right"});$("#zoomInSearchingCB").change(function(){editPageObject.zoomInSearching=this.checked})}function fUNQ152(a){if($("#showMarkerNumbersCB").length>0){return}var b='<p><label id="showMarkerNumbersCB_label" for="showMarkerNumbersCB">Show Numbered Pins <a id="showMarkerNumbersToolTip" data-toggle="tooltip" title="Show numbered pins when there are less than 100. Not compatible with custom images."><i class="icon-question-sign"></i></a> </label>  <input id="showMarkerNumbersCB" type="checkbox" name="showMarkerNumbers" value="directions panel" > </p>';$("#"+a).append(b);$("#showMarkerNumbersToolTip").tooltip({placement:"right"});$("#showMarkerNumbersCB").change(function(){editPageObject.showMarkerNumbers=this.checked})}function fUNQ153(){if(!advancedMap){return}$("#dynamicFiltersToolTip").tooltip({placement:"right"});$("#dynamicFiltersCB").change(function(){editPageObject.disAbleDynamicFilters=this.checked});$("#filterCountsToolTip").tooltip({placement:"right"});$("#filterCountsCB").change(function(){editPageObject.filterCounts=this.checked});$("#multiSelectFiltersToolTip").tooltip({placement:"right"});$("#multiSelectFiltersCB").change(function(){editPageObject.multiSelectFilters=this.checked;if(this.checked){$("#dynamicFiltersCB").prop("checked",false);$("#dynamicFiltersCB").attr("disabled","disabled")}else{$("#dynamicFiltersCB").removeAttr("disabled")}});$("#customLogoToolTip").tooltip({placement:"right"});$("#customMarkersToolTip").tooltip({placement:"right"})}function fUNQ154(){if(!advancedMap){return}$("#disableSearchTip").tooltip({placement:"right"});$("#disableSearchCB").change(function(){editPageObject.disableSearching=this.checked;if(this.checked){$("#showEnabledSearchDiv").hide()}else{$("#showEnabledSearchDiv").show()}});$("#mobileSerchToolTip").tooltip({placement:"right"});$("#mobileSearchCB").change(function(){editPageObject.mobileSearchEnabled=this.checked});$('input[type=radio][name="searchType"]').change(function(){if(this.value=="nearestSearch"){editPageObject.centerLocationOnMap=false}else{if(this.value=="centerSearch"){editPageObject.centerLocationOnMap=true}}})}function fUNQ155(){if(!advancedMap){return}$("#enableRadiusTip").tooltip({placement:"right"});$("#enableMarkerRadiusCB").change(function(){editPageObject.CircleWithRadius=this.checked;if(this.checked){$("#showSearchRadiusDiv").show();var a="";for(var b=0;b<editPageObject.columnTypes.length&&b<editPageObject.columnHeaderArray.length;b++){if(b==editPageObject.emm_lat||b==editPageObject.emm_lng||editPageObject.columnTypes[b]!=NUMBER_TYPE){continue}a+='<option value="'+b+'">'+editPageObject.columnHeaderArray[b]+"</option>"}if(a.length>0){a='<option value="-1">None</option>'+a;$("#dataRadiusSelect").html(a)}else{$("#predefinedRadiusSelect option[value='-1']").remove()}}else{$("#showSearchRadiusDiv").hide()}});$('input[type=radio][name="radiusUnits"]').change(function(){editPageObject.CircleWithRadiusUnits=this.value});$("#predefinedRadiusSelect").change(function(){if(this.value==-1){$("#dataRadiusSelectDiv").show()}else{editPageObject.CircleRadiusColumn=null;$("#dataRadiusSelectDiv").hide()}editPageObject.DefaultCircleRadius=this.value});$("#dataRadiusSelect").change(function(){editPageObject.CircleRadiusColumn=this.value;if(this.value==-1){editPageObject.CircleRadiusColumn=null}})}function fUNQ156(){if(advancedMap){if(editPageObject.CircleWithRadius!=null&&editPageObject.CircleWithRadius==true){if(editPageObject.DefaultCircleRadius>=1||editPageObject.CircleRadiusColumn!=null){return true}}}return false}function fUNQ157(b){var a=$("#showLabelCB");if(!advancedMap||a.length>0){return}var c='<p><label id="showLabelCB_label" for="showLabelCB">show labels <a id="showLabelsToolTip" data-toggle="tooltip" title="Show labels in marker descriptions (view the sample when disabling this)."><i class="icon-question-sign"></i></a> </label>  <input id="showLabelCB" type="checkbox" name="showLabels" value="Show Labels" checked> </p>';$("#"+b).append(c);$("#showLabelsToolTip").tooltip({placement:"right"});$("#showLabelCB").change(function(){editPageObject.showLabels=this.checked;fUNQ41()})}function mapPrep(){if(typeof dataLines==="undefined"||dataLines==null||dataLines.length==0||dataLines[0]==null){alert("Data is not present.");return}if(google==undefined||google.maps==undefined){fUNQ114("mapPrep");return}var b=(typeof editPageObject.pinLabel!="undefined"&&editPageObject.pinLabel!=null&&editPageObject.pinLabel>-1);var g=fUNQ156();var f=(b&&g);editPageObject.CircleWithRadius=g;if(f&&typeof MarkerWithLabelCircle=="undefined"){fUNQ117(mapPrep);return}else{if(b&&typeof MarkerWithLabel=="undefined"){fUNQ115(mapPrep);return}else{if(g&&typeof MarkerWithCircle=="undefined"){fUNQ116(mapPrep);return}}}var a,e;if(editPageObject.emm_lat>-1&&editPageObject.emm_lng>-1&&editPageObject.lat<0&&editPageObject.lng<0){editPageObject.lat=editPageObject.emm_lat;editPageObject.lng=editPageObject.emm_lng}if(editPageObject.lat>-1&&editPageObject.lng>-1&&editPageObject.lat<dataLines[0].length&&editPageObject.lng<dataLines[0].length&&editPageObject.lat!=editPageObject.lng){if((dataLines[0][editPageObject.lat]!=null&&dataLines[0][editPageObject.lat]!=null)&&(dataLines[0][editPageObject.lat].endsWith("N")||dataLines[0][editPageObject.lat].endsWith("S"))){a=fUNQ207(dataLines[0][editPageObject.lat]);e=fUNQ207(dataLines[0][editPageObject.lng]);if(fUNQ309(a,e)){dataLines[0][editPageObject.lat]=a;dataLines[0][editPageObject.lng]=e}}if(fUNQ309(dataLines[0][editPageObject.lat],dataLines[0][editPageObject.lng])){if((editPageObject.emm_lat==-1&&editPageObject.emm_lng==-1)||(editPageObject.emm_lat!=editPageObject.lat)||(editPageObject.emm_lng!=editPageObject.lng)){editPageObject.emm_lat=editPageObject.lat;editPageObject.emm_lng=editPageObject.lng}var d=true;for(var c=1;c<dataLines.length;c++){if((dataLines[c][editPageObject.lat]!=null&&dataLines[c][editPageObject.lat]!=null)&&(dataLines[c][editPageObject.lat].endsWith("N")||dataLines[c][editPageObject.lat].endsWith("S"))){a=fUNQ207(dataLines[c][editPageObject.lat]);e=fUNQ207(dataLines[c][editPageObject.lng]);if(fUNQ309(a,e)){dataLines[c][editPageObject.lat]=a;dataLines[c][editPageObject.lng]=e}}if(!fUNQ309(dataLines[c][editPageObject.lat],dataLines[c][editPageObject.lng])){d=false;break}}if(d&&dataLines.length>0){editPageObject.emm_lat=editPageObject.lat;editPageObject.emm_lng=editPageObject.lng;$("#lineCount").html("<strong> Mapping "+dataLines.length.toString()+" items.</strong>");fUNQ122();fUNQ173();return}}}var h=fUNQ182();if(h>0){fUNQ159(h);geoCodeStats.geoCoding=true;geoCodeStats.StartTime=new Date().getTime();fUNQ162()}}function fUNQ158(){geoCodeStats.init=false;geoCodeStats.linesGeoCoded=0;$("#optionButton").prop("disabled",false);geoCodeStats.geoCoding=false}function fUNQ159(a){geoCodeStats.linesToGeoCode=a;if(geoCodeStats.init==true){geoCodeStats.linesToGeoCode+=geoCodeStats.linesGeoCoded;if(geoCodeStats.linesToGeoCode>dataLines.length){geoCodeStats.linesToGeoCode=dataLines.length}return}geoCodeStats.init=true;geoCodeStats.allDone=false;geoCodeStats.linesGeoCoded=0;geoCodeStats.totalLinesGeoCoded=0;geoCodeStats.cachedLines=0;geoCodeStats.geoCodingIdx=0;geoCodeStats.defaultGeoCodeTimeout=defaultGeoCodeTimeout;geoCodeStats.errors=[];geoCodeStats.errorAddresses={};geoCodeStats.consecutiveTimeouts=0;geoCodeStats.consecutiveErrors=0;geoCodeStats.totalTime=0;geoCodeStats.lastFiveTimes=[0,0,0,0,0];$("#outerProgressDiv").show();fUNQ199(0);if(geoCodeStats.linesToGeoCode<20){geoCodeStats.defaultGeoCodeTimeout=200}if(geoCodeStats.linesToGeoCode>200){geoCodeStats.defaultGeoCodeTimeout=1000}geoCodeStats.lastProcessingTime=1000;geoCodeStats.regionCode=$("#region_sel option:selected").attr("value");editPageObject.regionCode=geoCodeStats.regionCode;editPageObject.regionCountry=$("#region_sel option:selected").text()}function fUNQ160(){var c=0;var a=0;for(var b=0;b<geoCodeStats.lastFiveTimes.length;b++){if(geoCodeStats.lastFiveTimes[b]==0){continue}a++;c+=geoCodeStats.lastFiveTimes[b]}if(a==0){return geoCodeStats.lastProcessingTime}return Math.ceil(c/a)}function fUNQ161(){var c=0;var a=0;for(var b=0;b<geoCodeStats.lastFiveTimes.length;b++){if(geoCodeStats.lastFiveTimes[b]==0){continue}a++;if(geoCodeStats.lastFiveTimes[b]>10000){c+=2000}c+=geoCodeStats.lastFiveTimes[b]}if(a==0){return geoCodeStats.lastProcessingTime}return Math.ceil(c/a)}function fUNQ162(){if(!geoCodeStats.geoCoding){return}var a="";var b=true;for(var c=geoCodeStats.geoCodingIdx;c<dataLines.length;c++){if(dataLines[c]!=null&&!fUNQ309(dataLines[c][editPageObject.emm_lat],dataLines[c][editPageObject.emm_lng])){geoCodeStats.geoCodingIdx=c;a=fUNQ278(dataLines[geoCodeStats.geoCodingIdx],editPageObject);if(a!=null&&a.trim()==""){geoCodeStats.errors[geoCodeStats.errors.length]={message:"Empty Address",address:a,lineNumber:geoCodeStats.geoCodingIdx+1};continue}if(geoCodeStats.errorAddresses.hasOwnProperty(a)){continue}if(!geoCodeHash.hasOwnProperty(a)){b=false;break}else{geoCodeStats.cachedLines++;geoCodeStats.totalLinesGeoCoded++;if(editPageObject.emm_lat>0&&editPageObject.emm_lat<=dataLines[c].length){dataLines[c][editPageObject.emm_lat]=geoCodeHash[a].emm_lat}if(editPageObject.emm_lng>0&&editPageObject.emm_lng<=dataLines[c].length){dataLines[c][editPageObject.emm_lng]=geoCodeHash[a].emm_lng}if(editPageObject.emm_acc>0&&editPageObject.emm_acc<=dataLines[c].length){dataLines[c][editPageObject.emm_acc]=geoCodeHash[a].emm_acc}if(geoCodeStats.geoCodingIdx==100||geoCodeStats.geoCodingIdx+1==dataLines.length){fUNQ188()}}}}if(b){geoCodeStats.geoCodingIdx=dataLines.length;fUNQ169();return}if(fUNQ180(a)){fUNQ91(a)}else{if(geoCoder==null){geoCoder=new google.maps.Geocoder()}if(geoCodeStats.totalLinesGeoCoded+1>geoCodeStats.geoCodingIdx&&geoCodeStats.linesToGeoCode>geoCodeStats.totalLinesGeoCoded){geoCodeStats.totalLinesGeoCoded=geoCodeStats.geoCodingIdx+1}var d=$("#lineVal");d.show();d.html("Processing: "+a+" ("+(geoCodeStats.totalLinesGeoCoded).toString()+" of "+geoCodeStats.linesToGeoCode.toString()+")");fUNQ181("Estimated time remaining: ",fUNQ160()*(geoCodeStats.linesToGeoCode-geoCodeStats.totalLinesGeoCoded));if(geoCodeStats.regionCode.length>0){geoCoder.geocode({address:a,region:geoCodeStats.regionCode},function(f,e){fUNQ166(f,e,a)})}else{geoCoder.geocode({address:a},function(f,e){fUNQ166(f,e,a)})}}}function fUNQ163(a,c,b){fUNQ164();if(c=="OK"){fUNQ165(b,a.latitude,a.longitude,"APPROXIMATE")}else{fUNQ179(c,b)}fUNQ169()}function fUNQ164(){geoCodeStats.lastProcessingTime=(new Date().getTime())-geoCodeStats.StartTime;geoCodeStats.lastFiveTimes[geoCodeStats.geoCodingIdx%5]=geoCodeStats.lastProcessingTime;geoCodeStats.totalTime+=geoCodeStats.lastProcessingTime;geoCodeStats.StartTime=new Date().getTime()}function fUNQ165(a,d,b,c){if(dataLines!=null&&dataLines[geoCodeStats.geoCodingIdx]!=null){dataLines[geoCodeStats.geoCodingIdx][editPageObject.emm_lat]=d;dataLines[geoCodeStats.geoCodingIdx][editPageObject.emm_lng]=b;dataLines[geoCodeStats.geoCodingIdx][editPageObject.emm_acc]=c}geoCodeHash[a]={};geoCodeHash[a].emm_lat=d;geoCodeHash[a].emm_lng=b;geoCodeHash[a].emm_acc=c;geoCodeStats.geoCodingIdx++;geoCodeStats.linesGeoCoded++;geoCodeStats.totalLinesGeoCoded++;geoCodeStats.consecutiveTimeouts=0;geoCodeStats.consecutiveErrors=0}function fUNQ166(c,b,a){fUNQ164();if(b==google.maps.GeocoderStatus.OK){fUNQ165(a,c[0].geometry.location.lat().toFixed(6),c[0].geometry.location.lng().toFixed(6),c[0].geometry.location_type)}else{if(b==google.maps.GeocoderStatus.ZERO_RESULTS){if(dataLines!=null&&dataLines[geoCodeStats.geoCodingIdx]!=null){dataLines[geoCodeStats.geoCodingIdx][editPageObject.emm_acc]="No Results"}fUNQ179("No Results",a);geoCodeStats.consecutiveErrors=0}else{if(b==google.maps.GeocoderStatus.REQUEST_DENIED){fUNQ179("Request Denied",a)}else{if(b==google.maps.GeocoderStatus.OVER_QUERY_LIMIT){geoCodeStats.consecutiveTimeouts++;if(geoCodeStats.defaultGeoCodeTimeout>=GEO_CODE_SLOWNESS&&geoCodeStats.consecutiveTimeouts>3){geoCodeStats.slowness=true;fUNQ168();return}if((geoCodeStats.defaultGeoCodeTimeout*1.5)<2000){geoCodeStats.defaultGeoCodeTimeout*=1.5}else{if(geoCodeStats.defaultGeoCodeTimeout<4000){geoCodeStats.defaultGeoCodeTimeout+=500}}}else{if(b==google.maps.GeocoderStatus.INVALID_REQUEST){fUNQ179("Invalid Request",a)}else{if(b==google.maps.GeocoderStatus.UNKNOWN_ERROR){fUNQ179("Unknown Error",a)}}}}}}if(fUNQ161()>GEO_CODE_SLOWNESS){geoCodeStats.limitHit=true;fUNQ168();return}if(typeof BulkGeoMap!="undefined"&&BulkGeoMap&&geoCodeStats.linesGeoCoded>=ADDRESS_LIMIT){geoCodeStats.limitHit=true;fUNQ7(location.href);return}if(geoCodeStats.linesGeoCoded>=ADDRESS_LIMIT){geoCodeStats.limitHit=true;fUNQ167();return}fUNQ169()}function fUNQ167(){fUNQ122();fUNQ171();geoCodeStats.geoCoding=false;var a="";if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){a="The remaining items can be geo-coded by clicking the bulkgeo url after saving the map."}fUNQ170("Google slows down geo-coding after "+ADDRESS_LIMIT.toString()+" addresses, would you like to map the completed addresses?  "+a);if(geoCodeStats.linesGeoCoded>0){fUNQ181("Finished processing "+(geoCodeStats.geoCodingIdx+1).toString()+" items in ",geoCodeStats.totalTime)}fUNQ189()}function fUNQ168(){fUNQ122();fUNQ171();geoCodeStats.geoCoding=false;var a="";if((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined")){a="The remaining items can be geo-coded by clicking the bulkgeo url after saving the map."}if(geoCodeStats.linesGeoCoded>0){fUNQ170("Stopped geo-coding due to slowness, do you want to map the geo-coded addresses? "+a);fUNQ181("Finished processing "+(geoCodeStats.geoCodingIdx+1).toString()+" items in ",geoCodeStats.totalTime)}else{alert("Stopping geo-coding due to excessive slowness.")}fUNQ189()}function fUNQ169(){if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){fUNQ199((geoCodeStats.totalLinesGeoCoded*100)/(geoCodeStats.linesToGeoCode))}else{fUNQ199((geoCodeStats.linesGeoCoded*100)/(geoCodeStats.linesToGeoCode-geoCodeStats.cachedLines))}if(geoCodeStats.errors.length>=5&&geoCodeStats.linesGeoCoded<10&&geoCodeStats.totalLinesGeoCoded<10){fUNQ122();geoCodeStats.geoCoding=false;redrawTextArea();alert("Stopping geo-coding due to too many errors, please verify the addresses with errors and try again.");fUNQ189();fUNQ171();return}if(dataLines.length==geoCodeStats.geoCodingIdx){geoCodeStats.limitHit=false;fUNQ122();geoCodeStats.geoCoding=false;redrawTextArea();geoCodeStats.allDone=true;fUNQ171();fUNQ189();if(geoCodeStats.linesGeoCoded>0){fUNQ181("Finished processing "+geoCodeStats.linesGeoCoded.toString()+" items in ",geoCodeStats.totalTime)}if(geoCodeStats.errors.length>0){if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){fUNQ7(location.href.replace("bulkgeo","edit"));return}$("#lineVal").html("There were "+geoCodeStats.errors.length.toString()+" errors.");fUNQ170("Not all addresses can be mapped, do you want to map the addresses without errors?")}else{if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){fUNQ7(location.href.replace("bulkgeo","edit"));return}$("#lineVal").hide();fUNQ173()}return}if(geoCodeStats.geoCoding){setTimeout(function(){fUNQ162()},geoCodeStats.defaultGeoCodeTimeout)}if(geoCodeStats.consecutiveTimeouts==0){fUNQ171()}}function fUNQ170(a){var b=confirm(a);if(b){fUNQ173()}}function fUNQ171(){if(geoCodeStats.geoCodingIdx<101){fUNQ188()}}function reGenerateMap(){var a=(typeof editPageObject.pinLabel!="undefined"&&editPageObject.pinLabel!=null&&editPageObject.pinLabel>-1);var d=fUNQ156();var c=(a&&d);editPageObject.CircleWithRadius=d;if(c&&typeof MarkerWithLabelCircle=="undefined"){fUNQ117(reGenerateMap);return}else{if(a&&typeof MarkerWithLabel=="undefined"){fUNQ115(reGenerateMap);return}else{if(d&&typeof MarkerWithCircle=="undefined"){fUNQ116(reGenerateMap);return}}}fUNQ172();var b=myMapOptions.indexOf(editPageObject.selectedMapType);fUNQ225(b)}function fUNQ172(){if(editPageObject.emm_lat!=-1&&editPageObject.lat!=editPageObject.emm_lat){editPageObject.lat=editPageObject.emm_lat}if(editPageObject.emm_lng!=-1&&editPageObject.lng!=editPageObject.emm_lng){editPageObject.lng=editPageObject.emm_lng}for(var a=dataLines.length-1;a>=0;a--){if(!fUNQ309(dataLines[a][editPageObject.lat],dataLines[a][editPageObject.lng])){dataLines.splice(a,1)}}if(dataLines.length==0){alert("Cannot map the data; no data found with latitude and longitude coordinates.");return}$("#makeMapButton").attr("disabled","disabled");$("#optionButton").attr("disabled","disabled");$("#mapUpdateButton").prop("disabled",false);fUNQ174(false);fUNQ50();fUNQ52(editPageObject.columnHeaderArray,dataLines);fUNQ51();if((editPageObject.useCustomImages!==null&&editPageObject.useCustomImages===true)&&(typeof EditingMap!="undefined"&&EditingMap)||(typeof BulkGeoMap!="undefined"&&BulkGeoMap)&&imageCount>1){fUNQ69(dataLines,imageCount,editPageObject)}fUNQ214();if(editPageObject.useCustomImages==null||editPageObject.useCustomImages==false){fUNQ143();fUNQ70(dataLines,undefined,editPageObject)}editPageObject.clustering=$("#clusterCB").is(":checked");editPageObject.scrollWheel=$("#scrollWheelCB").is(":checked");editPageObject.markerTitle=$("#markerTitleCB").is(":checked");$("#outerMap").show();$("#saveMapDiv").show();if(fUNQ275(dataLines,editPageObject)){if(!$("#sameLocationMarkers").is(":visible")){$("#sameLocationMarkers").show();editPageObject.moveSingleMarker=false;mapObject.moveSingleMarker=false;$("#moveAllMarkers").change(function(){if(this.value=="all"){mapObject.moveSingleMarker=false;editPageObject.moveSingleMarker=false}else{mapObject.moveSingleMarker=true;editPageObject.moveSingleMarker=true}})}}mapObject=$.extend(true,{},editPageObject);mapDataLines=$.extend([],dataLines)}function fUNQ173(){if($("#outerMap").is(":visible")){reGenerateMap()}fUNQ172();var a=myMapOptions.indexOf(editPageObject.selectedMapType);initMap("map",a);$("html, body").animate({scrollTop:$("#outerMap").offset().top-70},1000)}function fUNQ174(b){return;var e=[];var c,a;e.push.apply(e,matchNames);e.push.apply(e,miscIds);for(c=0;c<e.length;c++){a=$("#"+e[c]);if(a.length==0){continue}if(b==false){a.attr("disabled","disabled")}else{a.removeAttr("disabled")}}if(imageData!=null){for(c=0;c<imageData.length;c++){a=$("#imgGroupSelect"+c.toString());var d=$("#delButton"+c.toString());if(b==false){a.attr("disabled","disabled");d.attr("disabled","disabled")}else{a.removeAttr("disabled");d.removeAttr("disabled")}}}disableGroupColorChange=true}function fUNQ175(){for(var b=0;b<matchNames.length;b++){var a=$("#"+matchNames[b]);if(a.length==0){continue}a.remove()}}function fUNQ176(){var c=["clusterCB","scrollWheelCB","mapType"];var b,a;for(b=0;b<c.length;b++){a=$("#"+c[b]);if(a.length==0){continue}a.remove()}c=["noDisplay","toDisplay","noFilter","toFilter"];for(b=0;b<c.length;b++){a=$("#"+c[b]);if(a.length==0){continue}a.empty()}}function fUNQ177(){fUNQ97();fUNQ102()}function fUNQ178(){if(!fUNQ98()){alert("The email address is not valid.");return false}fUNQ97();fUNQ102();return true}function fUNQ179(b,a){geoCodeStats.geoCodingIdx++;geoCodeStats.consecutiveTimeouts=0;geoCodeStats.consecutiveErrors++;geoCodeStats.linesGeoCoded++;geoCodeStats.totalLinesGeoCoded++;geoCodeStats.errors[geoCodeStats.errors.length]={message:b,address:a,lineNumber:geoCodeStats.geoCodingIdx+1};if(!geoCodeStats.errorAddresses.hasOwnProperty(a)){geoCodeStats.errorAddresses[a]={};geoCodeStats.errorAddresses[a].lineNumber=geoCodeStats.geoCodingIdx+1}}function fUNQ180(d){var b=d.split(".");if(b.length==4){for(var a=0;a<b.length;a++){var c=parseInt(b[a],10);if(!(c>=0&&c<=255)){return false}}return true}return false}function fUNQ181(f,d){var e=Math.ceil(d/1000);var g=e%60;var c=Math.floor(e/60)%60;var a=Math.floor(e/(3600));var b="";if(a>0){b=a.toString()+" hours "+c.toString()+" minutes "}else{if(c>0){b=c.toString()+" minutes "+g.toString()+" seconds"}else{if(g>=1){b=g.toString()+" seconds"}else{b="less than 1 second."}}}$("#timeRemaining").html(f+b)}function fUNQ182(){if(dataLines.length==0){return -1}if(dataLines[0].length!=editPageObject.columnHeaderArray.length){alert("There is a data mismatch between headers and data");return -1}var d=0;var a=editPageObject.columnHeaderArray.length;var b=false;var e=0;if(editPageObject.lat!=null&&editPageObject.lat>-1){editPageObject.emm_lat=editPageObject.lat;if(editPageObject.lat>=dataLines[0].length){editPageObject.columnHeaderArray.push("emm_lat");d++}}else{if(editPageObject.columnHeaderArray.indexOf("emm_lat")==-1){editPageObject.emm_lat=editPageObject.columnHeaderArray.length;editPageObject.columnHeaderArray.push("emm_lat");b=true;d++}}if(editPageObject.lng!=null&&editPageObject.lng>-1){editPageObject.emm_lng=editPageObject.lng;if(editPageObject.lng>=dataLines[0].length){editPageObject.columnHeaderArray.push("emm_lng");d++}}else{if(editPageObject.columnHeaderArray.indexOf("emm_lng")==-1){editPageObject.emm_lng=editPageObject.columnHeaderArray.length;editPageObject.columnHeaderArray.push("emm_lng");b=true;d++}}if(editPageObject.columnHeaderArray.indexOf("emm_acc")==-1){editPageObject.emm_acc=editPageObject.columnHeaderArray.length;editPageObject.columnHeaderArray.push("emm_acc");d++}else{if(editPageObject.emm_acc==-1&&editPageObject.columnHeaderArray.indexOf("emm_acc")>=0){editPageObject.emm_acc=editPageObject.columnHeaderArray.indexOf("emm_acc")}}if(d>0){a+=d;fUNQ183(a)}if(b){return dataLines.length}else{for(var c=0;c<dataLines.length;c++){if(!fUNQ309(dataLines[c][editPageObject.emm_lat],dataLines[c][editPageObject.emm_lng])){e++}}}if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){return geoCodeStats.linesToGeoCode}return e}function fUNQ183(a){for(var b=0;b<dataLines.length;b++){while(dataLines[b].length<a){dataLines[b][dataLines[b].length]=""}}}function fUNQ184(a){if($("#hideSelector").html().length==0){return}$("#"+a).append($("#hideSelector").html());$("#hideSelector").html("");$("#zoomInToolTip").tooltip({placement:"right"});jQuery("#zoom_in_sel").change(function(){editPageObject.zoomInLevel=this.value})}function fUNQ185(a){if(!advancedMap){$("#hideLangSelector").hide();return}if($("#hideLangSelector").length==0||$("#hideLangSelector").html().length==0){return}$("#"+a).append($("#hideLangSelector").html());$("#hideLangSelector").html("");$("#mapLangToolTip").tooltip({placement:"right"});jQuery("#map_lang_sel").change(function(){editPageObject.mapLanguage=this.value})}function fUNQ186(a){if($("#mapType").length>0){return}var b=fUNQ75(myMapOptions,editPageObject.selectedMapType,"mapType","default map display type");b="<p>"+b+"</p>";$("#"+a).append(b);jQuery("#mapType").change(function(){editPageObject.selectedMapType=this.value})}function fUNQ187(){var h=[];if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){h=editPageObject.headerDisplayOrderIdxs.slice()}var g=mainTextArea.val();var b=false;columnHeaderHash={};dataLines.length=0;var l=0,d;var f=0;var k=[];fUNQ82(g,k,0);for(var e=0;e<k.length;e++){var c=k[e].join("	");if(c.trim().indexOf("#")==0||c.trim()==""){continue}if(!b){b=true;var a=0;editPageObject.headerDisplayOrderIdxs.length=0;editPageObject.columnHeaderArray.length=0;for(d=0;d<k[e].length;d++){columnHeaderHash[k[e][d]]=a;editPageObject.columnHeaderArray.push(k[e][d].trim());editPageObject.headerDisplayOrderIdxs[editPageObject.headerDisplayOrderIdxs.length]=a;a++}f=editPageObject.columnHeaderArray.length}else{while(k[e].length<editPageObject.columnHeaderArray.length){k[e][k[e].length]=""}dataLines.push(k[e])}l++}originalData=g;if(l<2){$("#lineCount").html('<div class="alert alert-error">Make sure headers and data are present.</div>')}else{$("#lineCount").html("<strong>Found "+l.toString()+" lines including headers.</strong>")}if(typeof EditingMap!="undefined"&&EditingMap&&advancedMap){fUNQ41()}if(typeof BulkGeoMap!="undefined"&&BulkGeoMap){editPageObject.headerDisplayOrderIdxs=h.slice()}editPageObject.columnTypes=[];for(e=0;e<editPageObject.columnHeaderArray.length;e++){editPageObject.columnTypes.push(fUNQ63(dataLines,e))}return l}function fUNQ188(){var d="";var c;var b="";for(c=0;c<editPageObject.columnHeaderArray.length;c++){if((editPageObject.hideLatLong==null||editPageObject.hideLatLong==true)&&c==editPageObject.emm_lat||c==editPageObject.emm_lng){continue}b=b+"<th>"+fUNQ134(editPageObject.columnHeaderArray[c],25)+"</th>"}b="<tr>"+b+"</tr>";d+=b;for(c=0;c<dataLines.length&&c<100;c++){b="";for(var a=0;a<dataLines[c].length;a++){if((editPageObject.hideLatLong==null||editPageObject.hideLatLong==true)&&a==editPageObject.emm_lat||a==editPageObject.emm_lng){continue}b+="<td>"+fUNQ132(fUNQ134(dataLines[c][a],25))+"</td>"}d+="<tr>"+b+"</tr>"}if(dataLines.length>100&&dataLines.length>0){d+='<tr><td colspan="'+dataLines[0].length+'">'+MAX_LINE_MESSAGE+"</td></tr>"}$("#outerDisplayTable").html('<table id="displayTable" class="table table-bordered table-condensed" style="width: 100%;">'+d+"</table>")}function fUNQ189(){var c="";if(geoCodeStats.errors.length==0){$("#errorStuff").hide();return}else{$("#errorStuff").show()}var b="";b=b+"<th>Line Number</th><th>Address</th><th>Error Message</th>";b="<tr>"+b+"</tr>";c+=b;for(var a=0;a<geoCodeStats.errors.length&&a<100;a++){b="";b+="<td>"+geoCodeStats.errors[a].lineNumber+"</td><td>"+geoCodeStats.errors[a].address+"</td><td>"+geoCodeStats.errors[a].message+"</td>";c+="<tr>"+b+"</tr>"}if(geoCodeStats.errors.length>100&&geoCodeStats.errors.length>0){c+='<tr><td colspan="3"></td>'+MAX_ERROR_LINE_MESSAGE+"</tr>"}$("#prettyErrorTable").html('<table id="errorTable" class="table table-bordered table-condensed" style="width: 100%">'+c+"</table>")}function fUNQ190(b){fUNQ194(b,addressMatch,negAddressMatch,matchNames[0],editPageObject.addressPrettyName);fUNQ194(b,cityMatch,[],matchNames[1],editPageObject.cityPrettyName);fUNQ194(b,stateMatch,[],matchNames[2],editPageObject.statePrettyName);fUNQ194(b,zipMatch,[],matchNames[3],editPageObject.zipPrettyName);fUNQ194(b,countryMatch,[],matchNames[4],editPageObject.countryPrettyName);fUNQ194(b,latMatch,[],matchNames[5],editPageObject.latPrettyName);fUNQ194(b,longMatch,[],matchNames[6],editPageObject.lngPrettyName);fUNQ194(b,titleMatch,[],matchNames[7],editPageObject.titlePrettyName);fUNQ194(b,urlMatch,[],matchNames[8],editPageObject.webPrettyName);fUNQ194(b,imageMatch,[],matchNames[9],editPageObject.imagePrettyName);fUNQ194(b,emailMatch,[],matchNames[10],editPageObject.emailPrettyName);fUNQ194(b,groupMatch,[],matchNames[11],editPageObject.groupPrettyName);for(var a=0;a<matchNames.length&&a<labelNames.length;a++){fUNQ191(matchNames[a],labelNames[a])}}function fUNQ191(f,a){var g=["-1"];var b=["none"];var e="none";var d=selectFilterMatch[f];if(d!=null&&d.length>0&&d[0]<editPageObject.columnHeaderArray.length){e=editPageObject.columnHeaderArray[d[0]]}for(var c=0;c<editPageObject.columnHeaderArray.length;c++){if(reservedMatches.indexOf(editPageObject.columnHeaderArray)>=0&&reservedMatches.indexOf(e)<0){continue}if(editPageObject.columnHeaderArray[c].trim()==""){continue}b.push(editPageObject.columnHeaderArray[c]);g.push(c)}fUNQ192(b,g,e,f,a)}function fUNQ192(d,g,f,b,j){var c='<label id="'+b+'_label" for="'+b+'">'+j+"</label>";var a='<select name="'+b+'" id="'+b+'"> \n';var e="";for(var h=0;h<d.length;h++){if(d[h]==f){e+='<option value="'+g[h]+'" selected>'+d[h]+"</option>\n";selected_columns[b]=g[h]}else{e+='<option value="'+g[h]+'" >'+d[h]+"</option>\n"}}a=a.concat(e+"</select>");var l=$("#"+b);if(l.length>0){l.html(e)}else{var k="<p>"+c+a+"</p>";$("#selectorData").append(k);jQuery("#"+b).change(function(){selected_columns[b]=parseInt(this.value,10);fUNQ193();if(b=="group_sel"){if(imageCount>0){fUNQ210(imageData,imageCount,false)}else{editPageObject.groupCustomColorImageHash={};fUNQ141()}}})}}function fUNQ193(){fUNQ198();fUNQ41();fUNQ123()}function fUNQ194(a,h,b,f,d){if(d!=null){for(var j in a){if(a.hasOwnProperty(j)){var e=a[j];if(j==d){if(selectFilterMatch.hasOwnProperty(f)){g=selectFilterMatch[f];g.push(e)}else{g=[];g.push(e);selectFilterMatch[f]=g}}}}}for(var j in a){if(a.hasOwnProperty(j)){var e=a[j];var c=j.toLowerCase().split(" ");if(fUNQ104(c,h)||fUNQ195(h,j)==true){if(b==null||b.length==0||!fUNQ104(c,b)){var g;if(selectFilterMatch.hasOwnProperty(f)){g=selectFilterMatch[f];g.push(e)}else{g=[];g.push(e);selectFilterMatch[f]=g}}}}}}function fUNQ195(c,b){for(var a=0;a<c.length;a++){if(b.toLocaleLowerCase().indexOf(c[a].toLocaleLowerCase())>-1){return true}}return false}function fUNQ196(a){return((new Date(a)!=="Invalid Date"&&!isNaN(new Date(a))))}function fUNQ197(b){var a=prettyMatchNames.indexOf(b);if(a!=-1){var c=matchNames[a];if(selected_columns.hasOwnProperty(c)){return selected_columns[c]}}return -1}function fUNQ198(){editPageObject.address=fUNQ197("address");editPageObject.city=fUNQ197("city");editPageObject.state=fUNQ197("state");editPageObject.zip=fUNQ197("zip");editPageObject.country=fUNQ197("country");editPageObject.lat=fUNQ197("lat");editPageObject.lng=fUNQ197("long");editPageObject.title=fUNQ197("title");editPageObject.web=fUNQ197("url");editPageObject.image=fUNQ197("image");editPageObject.email=fUNQ197("email");editPageObject.group=fUNQ197("group");editPageObject.pinLabel=fUNQ197("pin_label");editPageObject.addressPrettyName=null;editPageObject.cityPrettyName=null;editPageObject.statePrettyName=null;editPageObject.zipPrettyName=null;editPageObject.countryPrettyName=null;editPageObject.latPrettyName=null;editPageObject.lngPrettyName=null;editPageObject.titlePrettyName=null;editPageObject.webPrettyName=null;editPageObject.imagePrettyName=null;editPageObject.emailPrettyName=null;editPageObject.groupPrettyName=null;if(editPageObject.address>-1&&editPageObject.columnHeaderArray.length>editPageObject.address){editPageObject.addressPrettyName=editPageObject.columnHeaderArray[editPageObject.address]}if(editPageObject.city>-1&&editPageObject.columnHeaderArray.length>editPageObject.city){editPageObject.cityPrettyName=editPageObject.columnHeaderArray[editPageObject.city]}if(editPageObject.state>-1&&editPageObject.columnHeaderArray.length>editPageObject.state){editPageObject.statePrettyName=editPageObject.columnHeaderArray[editPageObject.state]}if(editPageObject.zip>-1&&editPageObject.columnHeaderArray.length>editPageObject.zip){editPageObject.zipPrettyName=editPageObject.columnHeaderArray[editPageObject.zip]}if(editPageObject.country>-1&&editPageObject.columnHeaderArray.length>editPageObject.country){editPageObject.countryPrettyName=editPageObject.columnHeaderArray[editPageObject.country]}if(editPageObject.lat>-1&&editPageObject.columnHeaderArray.length>editPageObject.lat){editPageObject.latPrettyName=editPageObject.columnHeaderArray[editPageObject.lat]}if(editPageObject.lng>-1&&editPageObject.columnHeaderArray.length>editPageObject.lng){editPageObject.lngPrettyName=editPageObject.columnHeaderArray[editPageObject.lng]}if(editPageObject.title>-1&&editPageObject.columnHeaderArray.length>editPageObject.title){editPageObject.titlePrettyName=editPageObject.columnHeaderArray[editPageObject.title]}if(editPageObject.web>-1&&editPageObject.columnHeaderArray.length>editPageObject.web){editPageObject.webPrettyName=editPageObject.columnHeaderArray[editPageObject.web]}if(editPageObject.image>-1&&editPageObject.columnHeaderArray.length>editPageObject.image){editPageObject.imagePrettyName=editPageObject.columnHeaderArray[editPageObject.image]}if(editPageObject.email>-1&&editPageObject.columnHeaderArray.length>editPageObject.email){editPageObject.emailPrettyName=editPageObject.columnHeaderArray[editPageObject.email]}if(editPageObject.group>-1&&editPageObject.columnHeaderArray.length>editPageObject.group){editPageObject.groupPrettyName=editPageObject.columnHeaderArray[editPageObject.group]}if(editPageObject.lat==-1&&editPageObject.emm_lat>0){editPageObject.lat=editPageObject.emm_lat}if(editPageObject.lng==-1&&editPageObject.emm_lng>0){editPageObject.lng=editPageObject.emm_lng}}function fUNQ199(a){var b=a.toString()+"%";$("#progressDisplayDiv").css("width",b)}if(!String.prototype.trim){String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}}function fUNQ200(a){if(a==null||a===undefined){return""}return a.replace(/(\r\n|\n|\r|\t)/gm," ")}function fUNQ201(){var a=(location.pathname.length>0?location.pathname.substring(1):""),b=a.length?a.split("/"):[];var c="basic";if(b.length==1){c=b[0]}if(editPageObject.mapType==null&&(c=="advanced"||c=="basic")){editPageObject.mapType=c}return(editPageObject.mapType=="advanced")}function fUNQ202(c,b){var a=$("#aliasStatusDiv");a.html("<strong>"+c+"</strong>");if(!a.hasClass("alert")){a.addClass("alert")}if(b=="error"){if(!a.hasClass("alert-error")){a.addClass("alert-error")}if(a.hasClass("alert-success")){a.removeClass("alert-success")}}else{if(a.hasClass("alert-error")){a.removeClass("alert-error")}if(!a.hasClass("alert-success")){a.addClass("alert-success")}}}function fUNQ203(b,a){$.ajax({type:"POST",url:"/modifyAlias",data:{id:userSettings.name,alias:b},cache:false,dataType:"json",success:function(e,d,c){if(e.errorMessage){fUNQ202(e.errorMessage,"error")}else{if(e.status=="Saved"){fUNQ202("Url Saved","success");if(a!=null){a(b)}}else{fUNQ202("Unable to save url","error")}}},error:function(e,d,c){fUNQ202(e.errorMessage,"error")}})}function fUNQ204(){$("#editable_url_btn").hide();$("#edit-slug-buttons").show();var c=$("#aliasStatusDiv");c.html("");c.removeClass();var d=$("#editable-url");var b=d.html();d.hide();var a=$("#mod-url");a.html('<input type="text" value="'+b+'" id="new-post-slug" MAXLENGTH=100 >');a.show();$("#aliasInstDiv").show()}function fUNQ205(){var a=$("#new-post-slug").val();if(a.length>0&&fUNQ45(a)){fUNQ203(a,successUrlChange)}else{fUNQ202("Invalid alias.","error")}}function successUrlChange(b){$("#mod-url").hide();var c=$("#editable-url");c.html(b);c.show();var a=location.protocol+"//"+location.hostname+"/map/"+b;$("#genMapUrl").attr("href",a);$("#edit-slug-buttons").hide();$("#editable_url_btn").show();$("#aliasInstDiv").hide()}function fUNQ206(){$("#edit-slug-buttons").hide();$("#editable_url_btn").show();$("#mod-url").hide();$("#editable-url").show();$("#aliasInstDiv").hide();var a=$("#aliasStatusDiv");a.html("");a.removeClass()}function fUNQ207(a){var b=a.split(/[^\d\w]+/);return fUNQ208(b[0],b[1],b[2],b[3])}function fUNQ208(e,b,d,c){var a=parseFloat(e)+(parseFloat(b)/60)+(parseFloat(d)/(60*60));if(c=="S"||c=="W"){a=a*-1}return a}function ajaxFileUpload(a){var b=$("#imgKey").val();var e={id:b,type:a,ek:saveMapEditId};if(typeof EditingMap!="undefined"&&EditingMap){var c=$("#ek").val();e={id:b,type:a,ek:c}}$.ajaxFileUpload({url:"/util/doajaxfileupload.php",secureuri:false,fileElementId:a,dataType:"json",data:e,success:function(f,d){if(a=="fileToUpload"){if(f.errorMessage!=null&&f.errorMessage.length>0){$("#imageTable").html(f.errorMessage)}else{fUNQ210(f.data,f.imgCount,false)}}else{if(a=="logoToUpload"){fUNQ209(f)}}if(b==null||b==""){$("#imgKey").val(f.imgId);userSettings.imgDir=f.imgId}if(typeof(f.error)!="undefined"){if(f.error!=""){alert(f.error)}else{}}},error:function(f,d,g){alert("There was a problem uploading your image(s): "+g)}});return false}function fUNQ209(b){if(b.errorMessage==null||b.errorMessage.length==0){var a='<img src="'+b.logoUrl+"?"+new Date().getTime()+'">';$("#logoSpan").html(a);$("#searchImgLogo").attr("src",b.logoUrl+"?"+new Date().getTime())}else{$("#logoSpan").html("problem: "+b.errorMessage)}}function fUNQ210(k,f,e){imageData=k;imageCount=f;var l;for(l=0;l<k.length;l++){}var d="";var a="";a=a+"<th>Image</th><th>Name</th><th>Size</th><th>Upload Status</th><th>Delete</th>";var h=false;var n=$("#group_sel option:selected").attr("value");var q=$("#group_sel option:selected").text();if(n!="-1"&&f>1){h=true;fUNQ69(dataLines,f,editPageObject)}if(h){a+="<th>"+q+"</th>"}a="<tr>"+a+"</tr>";d+=a;for(l=0;l<k.length;l++){var r=(k[l]["url"]!=null&&k[l]["url"].length>0)?'<img src="'+k[l]["url"]+'">':"";var p=(k[l]["name"]!=null&&k[l]["name"].length>0)?k[l]["name"]:"";var o=(k[l]["size"]!=null&&$.isNumeric(k[l]["size"]))?k[l]["size"]:"";var j=(k[l]["error"]!=null&&k[l]["error"].length>0)?k[l]["error"]:"Successful";var g="";if(j=="Successful"){g='<button id="delButton'+l.toString()+'" class="btn btn-small btn-danger"  type="button"  onclick="fUNQ218('+l.toString()+')">Delete</button>'}a="";a+="<td>"+r+"</td><td>"+p+"</td><td>"+o+"</td>";a+="<td>"+j+"</td>";a+="<td>"+g+"</td>";if(h){if(j=="Successful"){var c=[];c.push("none");c=c.concat(editPageObject.sortedGroupKeys);var m=fUNQ215(editPageObject.sortedGroupKeys,p,"none");if(e){m=fUNQ212(k[l]["url"],"none")}var b=fUNQ75(c,m,"imgGroupSelect"+l);b=b.replace(/<select name=[^\>]+/,"$&  onchange=fUNQ211("+l+") ");a+="<td>"+b+"</td>";imageData[l]["oldSelection"]="none";imageData[l]["error"]="Successful"}else{a+="<td></td>"}}d+="<tr>"+a+"</tr>"}$("#imageTable").html('<table id="mapList" class="table table-bordered table-condensed" style="width: 100%">'+d+"</table>");if(k.length>0){$("#imageTable").show()}if(h&&e){for(l=0;l<k.length;l++){fUNQ211(l)}}}function fUNQ211(a){var d=$("#imgGroupSelect"+a.toString()+" option:selected").attr("value");var b=imageData[a]["oldSelection"];imageData[a]["oldSelection"]=d;for(var c=0;c<imageData.length;c++){if(imageData[c]["error"]!="Successful"){continue}if(d!="none"){if(c!=a){$("#imgGroupSelect"+c.toString()+' option[value="'+d+'"]').remove()}}if(b!="none"){if(c!=a){$("#imgGroupSelect"+c.toString()).append('<option value="'+b+'">'+b+"</option>")}}}}function fUNQ212(c,a){for(var b in editPageObject.groupImageHash){if(editPageObject.groupImageHash[b]==c){return b}}return a}function fUNQ213(){if(editPageObject.groupImageHash===undefined||editPageObject.groupImageHash==null){editPageObject.groupImageHash={}}if(editPageObject.ImageDimensions===undefined||editPageObject.ImageDimensions==null){editPageObject.ImageDimensions={}}if(editPageObject.customImageSizes===undefined||editPageObject.customImageSizes==null){editPageObject.customImageSizes={}}if(editPageObject.CustomImages===undefined||editPageObject.CustomImages==null){editPageObject.CustomImages=[]}}function fUNQ214(){fUNQ213();var a=0;var d=$("#group_sel option:selected").attr("value");if(d==-1&&imageData!=null&&imageData.length==1){editPageObject.singleCustomImage=imageData[a]["url"];editPageObject.singleCustomImageWidth=imageData[a]["width"];editPageObject.singleCustomImageHeight=imageData[a]["height"];editPageObject.useCustomImages=true;editPageObject.showMarkerNumber=false;editPageObject.sortedGroupKeys=[];return}editPageObject.groupImageHash={};editPageObject.useCustomImages=false;if(imageData==null){return}for(a=0;a<imageData.length;a++){if(imageData[a]["error"]!="Successful"){continue}var b=$("#imgGroupSelect"+a.toString()+" option:selected").attr("value");imageData[a]["imgSelection"]=b;if(editPageObject.groupHash.hasOwnProperty(b)&&!editPageObject.groupImageHash.hasOwnProperty(b)){editPageObject.groupImageHash[b]=imageData[a]["url"];editPageObject.customImageSizes[b]=imageData[a]["url_small"];editPageObject.useCustomImages=true;editPageObject.ImageDimensions[b]={height:imageData[a]["height"],width:imageData[a]["width"]}}}var c=Object.keys(editPageObject.groupHash);for(a=0;a<c.length;a++){if(!editPageObject.groupImageHash.hasOwnProperty(c[a])){editPageObject.groupImageHash[c[a]]=CLOUD_FRONT_URL+"/marker_images/image.png";editPageObject.customImageSizes[c[a]]=CLOUD_FRONT_URL+IMAGE_PATH+SMALL_IMAGE+IMG_LIST[0]+IMG_FILE_ENDING}}if(editPageObject.useCustomImages){for(a=0;a<editPageObject.sortedGroupKeys.length;a++){if(!editPageObject.groupImageHash.hasOwnProperty(editPageObject.sortedGroupKeys[a])){editPageObject.groupImageHash[b]=DEFAULT_IMAGE}}}}function fUNQ215(a,d,b){for(var c=0;c<a.length;c++){if(a[c].toLocaleLowerCase().replace(/ /g,"_")==d.replace(/.\w{2,4}$/,"")){return a[c]}}return b}function fUNQ216(){var a=$("#imgKey").val();$.ajax({type:"POST",url:"/util/existedUploadedFiles.php",data:({id:a}),cache:false,dataType:"json",success:function(d,c,b){fUNQ210(d.data,d.imgCount,true)},error:function(d,c,b){if(d.errorMessage){}else{}}})}function fUNQ217(b){var a=$("#imgKey").val();var c=$("#ek").val();var e={id:a,img:b};if(typeof EditingMap!="undefined"&&EditingMap){e={id:a,img:b,ek:c}}$.ajax({type:"POST",url:"/fileUpload/deleteImage.php",data:e,cache:false,dataType:"json",success:function(g,f,d){if(g.errorMessage){}if(g.status=="removed"){}else{}},error:function(g,f,d){if(g.errorMessage){}else{}}})}function fUNQ218(a){var c=imageData[a]["name"];var b=$("#imgKey").val();var e=$("#ek").val();var f={id:b,img:c,ek:saveMapEditId};if(typeof EditingMap!="undefined"&&EditingMap){f={id:b,img:c,ek:e}}$.ajax({type:"POST",url:"/fileUpload/deleteImage.php",data:f,cache:false,dataType:"json",success:function(h,g,d){if(h.errorMessage){}if(h.status=="removed"){imageData.splice(a,1);imageCount--;fUNQ210(imageData,imageCount,false)}else{}},error:function(h,g,d){if(h.errorMessage){}else{}}})}function fUNQ219(){if(!((typeof EditingMap=="undefined")&&(typeof BulkGeoMap=="undefined"))){return}var f="simpleVideoFrame";var e="Watch a sample video to see how easy mapping is.";var c="Hide (and stop) video";if(advancedMap){e="Watch a demo video to see how easy advanced mapping is.";f="advancedVideoFrame"}(function(){$(".youtube-player").each(function(){var g=$(this).attr("data-id");$(this).html('<div id="'+g+'_div">'+d(g)+"</div>");$("#"+g+"_div").click(function(){var j=$("#"+g+"_div");var h=$("#"+f);if(h.length==0){j.html(a(g))}})})})();function a(h){var g='<iframe src="//www.youtube.com/embed/'+h+'?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0" frameborder="0" id="'+f+'"></iframe>';return g}function d(g){return'<img class="youtube-thumb" src="//i.ytimg.com/vi/'+g+'/maxresdefault.jpg"><div class="play-button"></div>'}function b(){var g=document.createElement("iframe");g.setAttribute("src","//www.youtube.com/embed/"+this.parentNode.dataset.id+"?autoplay=1&autohide=2&border=0&wmode=opaque&enablejsapi=1&controls=1&showinfo=0");g.setAttribute("frameborder","0");g.setAttribute("id",f);this.parentNode.replaceChild(g,this)}$("#demoVideoId").click(function(){var j=$("#demoVideoId").text();if(j===e){$("#demoVideoId").html(c);var h=$("#demoVideoDisplayAdvanced");if(advancedMap){var h=$("#demoVideoDisplayAdvanced");if(h.length>0){h.show()}}else{var h=$("#demoVideoDisplaySimple");if(h.length>0){h.show()}}}else{$("#demoVideoId").html(e);if(advancedMap){$("#demoVideoDisplayAdvanced").hide();if($("#advancedVideoFrame").length>0){var g=$("#advancedVideoFrame").attr("src").replace(/autoplay=1&/,"");$("#advancedVideoFrame").attr("src","");$("#advancedVideoFrame").attr("src",g)}}else{$("#demoVideoDisplaySimple").hide();if($("#simpleVideoFrame").length>0){var g=$("#simpleVideoFrame").attr("src").replace(/autoplay=1&/,"");$("#simpleVideoFrame").attr("src","");$("#simpleVideoFrame").attr("src",g)}}}});$("#demoVideoId").show();$("#demoVideoId").html(e)}function fUNQ220(){if(typeof EditingMap!="undefined"&&EditingMap){return}$("#filterSelects").hide();$("#toggleFilters").click(function(){if($(this).text()=="(hide)"){$(this).text("(show)");$("#filterSelects").hide()}else{$(this).text("(hide)");$("#filterSelects").show()}})}function fUNQ221(){$("#searchSelects").hide();$("#toggleSearchOptions").click(function(){if($(this).text()=="(hide)"){$(this).text("(show)");$("#searchSelects").hide()}else{$(this).text("(hide)");$("#searchSelects").show()}})}function fUNQ222(b,a){$("#"+a).hide();$("#"+b).click(function(){if($(this).text()=="(hide)"){$(this).text("(show)");$("#"+a).hide()}else{$(this).text("(hide)");$("#"+a).show()}})}function fUNQ223(){if(typeof EditingMap!="undefined"&&EditingMap){return}$("#markerDisplaySelects").hide();$("#toggleMarkerDisplay").click(function(){if($(this).text()=="(hide)"){$(this).text("(show)");$("#markerDisplaySelects").hide()}else{$(this).text("(hide)");$("#markerDisplaySelects").show()}})}function fUNQ224(){$("#toggleCustomizations").click(function(){if($(this).text()=="(hide)"){$(this).text("(show)");$("#customizationsDiv").hide()}else{$(this).text("(hide)");$("#customizationsDiv").show()}});$("#markerColor").change(function(){editPageObject.clusterHexColor=this.value;var a=IMG_HEX_COLORS.indexOf(editPageObject.clusterHexColor);if(a>=0&&a<IMG_LIST.length){editPageObject.clusterColor=IMG_LIST[a]}})}jQuery.extend({handleError:function(b,d,a,c){if(b.error){b.error(d,a,c)}else{if(d.responseText){console.log(d.responseText)}}},createUploadIframe:function(d,b){var a="jUploadFrame"+d;var c='<iframe id="'+a+'" name="'+a+'" style="position:absolute; top:-9999px; left:-9999px"';if(window.ActiveXObject){if(typeof b=="boolean"){c+=' src="javascript:false"'}else{if(typeof b=="string"){c+=' src="'+b+'"'}}}c+=" />";jQuery(c).appendTo(document.body);return jQuery("#"+a).get(0)},createUploadForm:function(a,j,d){var h="jUploadForm"+a;var c="jUploadFile"+a;var b=jQuery('<form  action="" method="POST" name="'+h+'" id="'+h+'" enctype="multipart/form-data"></form>');if(d){for(var e in d){jQuery('<input type="hidden" name="'+e+'" value="'+d[e]+'" />').appendTo(b)}}var f=jQuery("#"+j);var g=jQuery(f).clone();jQuery(f).attr("id",c);jQuery(f).before(g);jQuery(f).appendTo(b);jQuery(b).css("position","absolute");jQuery(b).css("top","-1200px");jQuery(b).css("left","-1200px");jQuery(b).appendTo("body");return b},ajaxFileUpload:function(l){l=jQuery.extend({},jQuery.ajaxSettings,l);var a=new Date().getTime();var b=jQuery.createUploadForm(a,l.fileElementId,(typeof(l.data)=="undefined"?false:l.data));var j=jQuery.createUploadIframe(a,l.secureuri);var h="jUploadFrame"+a;var k="jUploadForm"+a;if(l.global&&!jQuery.active++){jQuery.event.trigger("ajaxStart")}var c=false;var f={};if(l.global){jQuery.event.trigger("ajaxSend",[f,l])}var d=function(m){var q=document.getElementById(h);try{if(q.contentWindow){f.responseText=q.contentWindow.document.body?q.contentWindow.document.body.innerHTML:null;f.responseXML=q.contentWindow.document.XMLDocument?q.contentWindow.document.XMLDocument:q.contentWindow.document}else{if(q.contentDocument){f.responseText=q.contentDocument.document.body?q.contentDocument.document.body.innerHTML:null;f.responseXML=q.contentDocument.document.XMLDocument?q.contentDocument.document.XMLDocument:q.contentDocument.document}}}catch(p){jQuery.handleError(l,f,null,p)}if(f||m=="timeout"){c=true;var n;try{n=m!="timeout"?"success":"error";if(n!="error"){var o=jQuery.uploadHttpData(f,l.dataType);if(l.success){l.success(o,n)}if(l.global){jQuery.event.trigger("ajaxSuccess",[f,l])}}else{jQuery.handleError(l,f,n)}}catch(p){n="error";jQuery.handleError(l,f,n,p)}if(l.global){jQuery.event.trigger("ajaxComplete",[f,l])}if(l.global&&!--jQuery.active){jQuery.event.trigger("ajaxStop")}if(l.complete){l.complete(f,n)}jQuery(q).unbind();setTimeout(function(){try{jQuery(q).remove();jQuery(b).remove()}catch(r){jQuery.handleError(l,f,null,r)}},100);f=null}};if(l.timeout>0){setTimeout(function(){if(!c){d("timeout")}},l.timeout)}try{var b=jQuery("#"+k);jQuery(b).attr("action",l.url);jQuery(b).attr("method","POST");jQuery(b).attr("target",h);if(b.encoding){jQuery(b).attr("encoding","multipart/form-data")}else{jQuery(b).attr("enctype","multipart/form-data")}jQuery(b).submit()}catch(g){jQuery.handleError(l,f,null,g)}jQuery("#"+h).load(d);return{abort:function(){}}},uploadHttpData:function(r,type){var data=!type;data=type=="xml"||data?r.responseXML:r.responseText;if(type=="script"){jQuery.globalEval(data)}if(type=="json"){eval("data = "+data)}if(type=="html"){jQuery("<div>").html(data).evalScripts()}return data}});